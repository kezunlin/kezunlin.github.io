<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"kezunlin.me","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Kezunlin&#39;s Blog">
<meta property="og:url" content="https://kezunlin.me/page/5/index.html">
<meta property="og:site_name" content="Kezunlin&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="kezunlin">
<meta property="article:tag" content="linux, c++, python, AI, LLM">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://kezunlin.me/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Kezunlin's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Kezunlin's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Kezunlin's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Live and Learn</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/keras-multi-gpu-training/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/keras-multi-gpu-training/" class="post-title-link" itemprop="url">keras multi gpu training</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-09-10 09:41:00" itemprop="dateCreated datePublished" datetime="2019-09-10T09:41:00+08:00">2019-09-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/deep-learning/" itemprop="url" rel="index"><span itemprop="name">deep learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="multi-gpu-model"><a href="#multi-gpu-model" class="headerlink" title="multi_gpu_model"></a>multi_gpu_model</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> keras.applications <span class="keyword">import</span> Xception</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> multi_gpu_model</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">G = <span class="number">8</span> </span><br><span class="line">batch_size_per_gpu = <span class="number">32</span></span><br><span class="line">batch_size = batch_size_per_gpu * G</span><br><span class="line"></span><br><span class="line">num_samples = <span class="number">1000</span></span><br><span class="line">height = <span class="number">224</span></span><br><span class="line">width = <span class="number">224</span></span><br><span class="line">num_classes = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Instantiate the base model (or &quot;template&quot; model).</span></span><br><span class="line"><span class="comment"># We recommend doing this with under a CPU device scope,</span></span><br><span class="line"><span class="comment"># so that the model&#x27;s weights are hosted on CPU memory.</span></span><br><span class="line"><span class="comment"># Otherwise they may end up hosted on a GPU, which would</span></span><br><span class="line"><span class="comment"># complicate weight sharing.</span></span><br><span class="line"><span class="keyword">with</span> tf.device(<span class="string">&#x27;/cpu:0&#x27;</span>):</span><br><span class="line">    model = Xception(weights=<span class="literal">None</span>,</span><br><span class="line">                     input_shape=(height, width, <span class="number">3</span>),</span><br><span class="line">                     classes=num_classes)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Replicates the model on 8 GPUs.</span></span><br><span class="line"><span class="comment"># This assumes that your machine has 8 available GPUs.</span></span><br><span class="line">parallel_model = multi_gpu_model(model, gpus=G)</span><br><span class="line">parallel_model.<span class="built_in">compile</span>(loss=<span class="string">&#x27;categorical_crossentropy&#x27;</span>,</span><br><span class="line">                       optimizer=<span class="string">&#x27;rmsprop&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Generate dummy data.</span></span><br><span class="line">x = np.random.random((num_samples, height, width, <span class="number">3</span>))</span><br><span class="line">y = np.random.random((num_samples, num_classes))</span><br><span class="line"></span><br><span class="line"><span class="comment"># This `fit` call will be distributed on 8 GPUs.</span></span><br><span class="line"><span class="comment"># Since the batch size is 256, each GPU will process 32 samples.</span></span><br><span class="line">parallel_model.fit(x, y, epochs=<span class="number">20</span>, batch_size=batch_size)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Save model via the template model (which shares the same weights):</span></span><br><span class="line">model.save(<span class="string">&#x27;my_model.h5&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="results"><a href="#results" class="headerlink" title="results"></a>results</h3><p>results from <a target="_blank" rel="noopener" href="https://medium.com/@joinal/multi-gpu-training-with-keras-python-and-deep-learning-on-onepanel-io-e0eee865b423">Multi-GPU training with Keras, Python, and deep learning on Onepanel.io</a><br>To validate this, we trained MiniGoogLeNet on the CIFAR-10 dataset with 4 V100 GPU.</p>
<blockquote>
<p>Using a single GPU we were able to obtain 63 second epochs with a total training time of 74m10s.<br>However, by using multi-GPU training with Keras and Python we decreased training time to 16 second epochs with a total training time of 19m3s.<br>4x times speedup!</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://keras.io/utils/">multi_gpu_model</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/@joinal/multi-gpu-training-with-keras-python-and-deep-learning-on-onepanel-io-e0eee865b423">Multi-GPU training with Keras, Python, and deep learning on Onepanel.io</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20190910:: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/compile-and-install-cgal-on-ubuntu-16-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/compile-and-install-cgal-on-ubuntu-16-04/" class="post-title-link" itemprop="url">compile and install cgal on ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-09-02 14:02:00" itemprop="dateCreated datePublished" datetime="2019-09-02T14:02:00+08:00">2019-09-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><ul>
<li>version: 4.13.1</li>
</ul>
<h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/CGAL/cgal/releases/download/releases%2FCGAL-4.13.1/CGAL-4.13.1.zip</span><br><span class="line"><span class="built_in">cd</span> CGAL-4.13.1</span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build &amp;&amp; cmake-gui ..</span><br></pre></td></tr></table></figure>

<p>with options </p>
<pre><code>QT5_DIR            /opt/qt/5.7/gcc_64/lib/cmake/Qt5
</code></pre>
<p>compile and install </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make -j8</span><br><span class="line"><span class="built_in">sudo</span> make install </span><br></pre></td></tr></table></figure>

<p>output</p>
<pre><code>Scanning dependencies of target CGAL
[ 16%] Building CXX object src/CGAL/CMakeFiles/CGAL.dir/all_files.cpp.o
[ 33%] Linking CXX shared library ../../lib/libCGAL.so
[ 33%] Built target CGAL
Scanning dependencies of target CGAL_ImageIO
Scanning dependencies of target CGAL_Core
[ 50%] Building CXX object src/CGAL_Core/CMakeFiles/CGAL_Core.dir/all_files.cpp.o
[ 66%] Building CXX object src/CGAL_ImageIO/CMakeFiles/CGAL_ImageIO.dir/all_files.cpp.o
[ 83%] Linking CXX shared library ../../lib/libCGAL_ImageIO.so
[ 83%] Built target CGAL_ImageIO
[100%] Linking CXX shared library ../../lib/libCGAL_Core.so
[100%] Built target CGAL_Core
</code></pre>
<h3 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(CGAL REQUIRED)</span><br><span class="line"><span class="keyword">include</span>(<span class="variable">$&#123;CGAL_USE_FILE&#125;</span>)</span><br><span class="line"><span class="keyword">MESSAGE</span>( [Main] <span class="string">&quot; CGAL_INCLUDE_DIRS = $&#123;CGAL_INCLUDE_DIRS&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">MESSAGE</span>( [Main] <span class="string">&quot; CGAL_LIBRARIES = $&#123;CGAL_LIBRARIES&#125;&quot;</span>)  </span><br><span class="line"><span class="comment">#[Main] CGAL_INCLUDE_DIRS = /usr/local/include</span></span><br><span class="line"><span class="comment">#[Main] CGAL_LIBRARIES = CGAL::CGAL </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(my_executable my_source_file.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(my_executable <span class="variable">$&#123;CGAL_LIBRARIES&#125;</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>CGAL_USE_FILE<br>CGAL_DIR  &#x2F;usr&#x2F;local&#x2F;lib&#x2F;cmake&#x2F;CGAL</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/CGAL/cgal/blob/master/Installation/INSTALL.md">cgal install</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20190902: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/kaggle-competetions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/kaggle-competetions/" class="post-title-link" itemprop="url">kaggle image classification competitions and solutions</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-09-02 07:46:00" itemprop="dateCreated datePublished" datetime="2019-09-02T07:46:00+08:00">2019-09-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/deep-learning/" itemprop="url" rel="index"><span itemprop="name">deep learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><p>fine-tuning</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.keras.io/building-powerful-image-classification-models-using-very-little-data.html">keras fine-tuning</a></li>
</ul>
<h3 id="dogs-vs-cats"><a href="#dogs-vs-cats" class="headerlink" title="dogs vs cats"></a>dogs vs cats</h3><p>2 classes: binary classification</p>
<h3 id="dog-breed-identification"><a href="#dog-breed-identification" class="headerlink" title="dog-breed-identification"></a>dog-breed-identification</h3><p>120 classes </p>
<p>see <a target="_blank" rel="noopener" href="https://www.kaggle.com/c/dog-breed-identification/leaderboard">dog-breed-identification</a></p>
<h3 id="plant-seedlings-classification"><a href="#plant-seedlings-classification" class="headerlink" title="plant-seedlings-classification"></a>plant-seedlings-classification</h3><p>960 unique plants belonging to 12 classes<br>(植物幼苗分类)<br>see <a target="_blank" rel="noopener" href="https://www.kaggle.com/c/plant-seedlings-classification">here</a></p>
<p>solutions:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://medium.com/neuralspace/kaggle-1-winning-approach-for-image-classification-challenge-9c1188157a86">top-1 solution</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/41140947">zh</a></li>
<li><a target="_blank" rel="noopener" href="https://www.kaggle.com/dingkun/xception-model-training-pipeline-lb-0-9798">xception-model-training-pipeline-lb-0-9798</a></li>
</ul>
<h3 id="cdiscount-image-classification-challenge"><a href="#cdiscount-image-classification-challenge" class="headerlink" title="cdiscount-image-classification-challenge"></a>cdiscount-image-classification-challenge</h3><p><a target="_blank" rel="noopener" href="https://www.kaggle.com/c/cdiscount-image-classification-challenge/discussion/45863">超大规模图像分类</a></p>
<h2 id="Advanced"><a href="#Advanced" class="headerlink" title="Advanced"></a>Advanced</h2><h3 id="Data-Augmentation"><a href="#Data-Augmentation" class="headerlink" title="Data Augmentation"></a>Data Augmentation</h3><ul>
<li><a target="_blank" rel="noopener" href="https://medium.com/ymedialabs-innovation/data-augmentation-techniques-in-cnn-using-tensorflow-371ae43d5be9">数据增强</a></li>
<li><a target="_blank" rel="noopener" href="https://machinelearningmastery.com/image-augmentation-deep-learning-keras/">image-augmentation-deep-learning-keras</a></li>
</ul>
<h3 id="SMOTE"><a href="#SMOTE" class="headerlink" title="SMOTE"></a>SMOTE</h3><ul>
<li>[smote解决样本不均衡问题](<a target="_blank" rel="noopener" href="https://smote-variants.readthedocs.io/en/latest/installation.html%EF%BC%89">https://smote-variants.readthedocs.io/en/latest/installation.html）</a></li>
<li><a target="_blank" rel="noopener" href="https://www.svds.com/learning-imbalanced-classes/">learning-imbalanced-classes</a></li>
<li><a target="_blank" rel="noopener" href="https://www.dlology.com/blog/multi-class-classification-with-focal-loss-for-imbalanced-datasets/">multi-class-classification-with-focal-loss-for-imbalanced-datasets</a></li>
</ul>
<blockquote>
<p>the <code>class_weights</code> argument in <code>model.fit</code>, which you can use to make the model learn more from the minority class.</p>
</blockquote>
<h3 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h3><ul>
<li><a target="_blank" rel="noopener" href="https://medium.com/@ckyrkou/changing-input-size-of-pre-trained-models-in-keras-3dfbe3ca3091">changing-input-size-of-pre-trained-models-in-keras</a></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20190902: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/quick-guide-for-dl4cv-book/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/quick-guide-for-dl4cv-book/" class="post-title-link" itemprop="url">install and configure deep learning environments on linux server</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-21 17:07:00" itemprop="dateCreated datePublished" datetime="2019-08-21T17:07:00+08:00">2019-08-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/deep-learning/" itemprop="url" rel="index"><span itemprop="name">deep learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Quick-Guide"><a href="#Quick-Guide" class="headerlink" title="Quick Guide"></a>Quick Guide</h2><h3 id="prepare"><a href="#prepare" class="headerlink" title="prepare"></a>prepare</h3><h4 id="tools"><a href="#tools" class="headerlink" title="tools"></a>tools</h4><ul>
<li>MobaXterm (for windows)</li>
<li>ssh + vscode</li>
</ul>
<blockquote>
<p>for windows:<br>drop files to MobaXterm to upload to server<br>use <code>zip</code> format</p>
</blockquote>
<h4 id="commands"><a href="#commands" class="headerlink" title="commands"></a>commands</h4><p>view disk </p>
<pre><code>du -d 1 -h
df -h
</code></pre>
<p>gpu and cpu usage </p>
<pre><code>watch -n 1 nvidia-smi
top 
</code></pre>
<p>view files and count </p>
<pre><code>wc -l data.csv

# count how many folders
ls -lR | grep &#39;^d&#39; | wc -l
17

# count how many jpg files
ls -lR | grep &#39;.jpg&#39; | wc -l
1360

# view 10 images 
ls train | head
ls test | head
</code></pre>
<p>link datasets</p>
<pre><code># link 
ln -s srt dest
ln -s /data_1/kezunlin/datasets/ dl4cv/datasets
</code></pre>
<p>scp </p>
<pre><code>scp -r node17:~/dl4cv  ~/git/
scp -r node17:~/.keras ~/
</code></pre>
<p>tmux for background tasks</p>
<pre><code>tmux new -s notebook
tmux ls 
tmux attach -t notebook
tmux detach
</code></pre>
<p>wget download </p>
<pre><code># wget 
# continue donwload
wget -c url 

# background donwload for large file
wget -b -c url
tail -f wget-log

# kill background wget
pkill -9 wget
</code></pre>
<p><strong>tips about training large model</strong></p>
<p>terminal 1:</p>
<pre><code>tmux new -s train
conda activate keras

time python train_alexnet.py
</code></pre>
<p>terminal 2:</p>
<pre><code>tmux detach

tmux attach -t train
</code></pre>
<p>and then close vscode, otherwise bash training process will exit when we close vscode.</p>
<h3 id="cuda-driver-and-toolkits"><a href="#cuda-driver-and-toolkits" class="headerlink" title="cuda driver and toolkits"></a>cuda driver and toolkits</h3><p>see <a target="_blank" rel="noopener" href="https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html">cuda-toolkit for cuda driver version</a></p>
<blockquote>
<p>cudatookit version depends on cuda driver version.</p>
</blockquote>
<h4 id="install-nvidia-drivers"><a href="#install-nvidia-drivers" class="headerlink" title="install nvidia-drivers"></a><del>install nvidia-drivers</del></h4><pre><code>sudo add-apt-repository ppa:graphics-drivers/ppa
sudp apt-get update

sudo apt-cache search nvidia-*
# nvidia-384
# nvidia-396
sudo apt-get -y install nvidia-418

# test 
nvidia-smi
Failed to initialize NVML: Driver/library version mismatch
</code></pre>
<blockquote>
<p>reboot to test again<br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/43022843/nvidia-nvml-driver-library-version-mismatch">https://stackoverflow.com/questions/43022843/nvidia-nvml-driver-library-version-mismatch</a></p>
</blockquote>
<h4 id="install-cuda-toolkit-dirvers"><a href="#install-cuda-toolkit-dirvers" class="headerlink" title="install cuda-toolkit(dirvers)"></a>install cuda-toolkit(dirvers)</h4><p>remove all previous nvidia drivers</p>
<pre><code>sudo apt-get -y pruge nvidia-*
</code></pre>
<p>go to <a target="_blank" rel="noopener" href="https://developer.nvidia.com/cuda-toolkit-archive">here</a> and download <code>cuda_10.1</code></p>
<pre><code>wget -b -c http://developer.download.nvidia.com/compute/cuda/10.1/Prod/local_installers/cuda_10.1.243_418.87.00_linux.run
sudo sh cuda_10.1.243_418.87.00_linux.run

sudo ./cuda_10.1.243_418.87.00_linux.run

vim .bashrc
# for cuda and cudnn
export PATH=/usr/local/cuda/bin:$PATH
export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH
</code></pre>
<p>check cuda driver version </p>
<pre><code>&gt; cat /proc/driver/nvidia/version
NVRM version: NVIDIA UNIX x86_64 Kernel Module  418.87.00  Thu Aug  8 15:35:46 CDT 2019
GCC version:  gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.11) 


&gt;nvidia-smi
Tue Aug 27 17:36:35 2019       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 418.87.00    Driver Version: 418.87.00    CUDA Version: 10.1     |
|-------------------------------+----------------------+----------------------+


&gt; nvidia-smi -L
GPU 0: Quadro RTX 8000 (UUID: GPU-acb01c1b-776d-cafb-ea35-430b3580d123)
GPU 1: Quadro RTX 8000 (UUID: GPU-df7f0fb8-1541-c9ce-e0f8-e92bccabf0ef)
GPU 2: Quadro RTX 8000 (UUID: GPU-67024023-20fd-a522-dcda-261063332731)
GPU 3: Quadro RTX 8000 (UUID: GPU-7f9d6a27-01ec-4ae5-0370-f0c356327913)

&gt; nvcc -V
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2019 NVIDIA Corporation
Built on Sun_Jul_28_19:07:16_PDT_2019
Cuda compilation tools, release 10.1, V10.1.243
</code></pre>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>




<h3 id="install-conda"><a href="#install-conda" class="headerlink" title="install conda"></a>install conda</h3><pre><code>./Anaconda3-2019.03-Linux-x86_64.sh 
[yes]
[yes]
</code></pre>
<h3 id="config-channels"><a href="#config-channels" class="headerlink" title="config channels"></a>config channels</h3><pre><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/menpo/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/

conda config --set show_channel_urls yes
</code></pre>
<h3 id="install-libraries"><a href="#install-libraries" class="headerlink" title="install libraries"></a>install libraries</h3><p>conclusions:</p>
<ul>
<li>py37&#x2F;keras: conda install -y tensorflow-gpu keras&#x3D;&#x3D;2.2.5 </li>
<li>py37&#x2F;torch: conda install -y pytorch torchvision</li>
<li>py36&#x2F;mxnet: conda install -y mxnet</li>
</ul>
<blockquote>
<p>keras 2.2.5 was released on 2019&#x2F;8&#x2F;23.<br>Add new Applications: ResNet101, ResNet152, ResNet50V2, ResNet101V2, ResNet152V2.</p>
</blockquote>
<p>common libraries </p>
<pre><code>conda install -y scikit-learn scikit-image pandas matplotlib pillow opencv seaborn
pip install imutils progressbar pydot pylint
</code></pre>
<blockquote>
<p><code>pip install imutils</code>  to avoid downgrade for tensorflow-gpu </p>
</blockquote>
<h4 id="py37"><a href="#py37" class="headerlink" title="py37"></a>py37</h4><pre><code>cudatoolkit               10.0.130                  0    
cudnn                     7.6.0                cuda10.0_0    
tensorflow-gpu            1.13.1 
</code></pre>
<h4 id="py36"><a href="#py36" class="headerlink" title="py36"></a>py36</h4><pre><code>cudatoolkit        anaconda/pkgs/main/linux-64::cudatoolkit-10.1.168-0
cudnn              anaconda/pkgs/main/linux-64::cudnn-7.6.0-cuda10.1_0
tensorboard        anaconda/pkgs/main/linux-64::tensorboard-1.14.0-py36hf484d3e_0
tensorflow         anaconda/pkgs/main/linux-64::tensorflow-1.14.0-gpu_py36h3fb9ad6_0
tensorflow-base    anaconda/pkgs/main/linux-64::tensorflow-base-1.14.0-gpu_py36he45bfe2_0
tensorflow-estima~ anaconda/cloud/conda-forge/linux-64::tensorflow-estimator-1.14.0-py36h5ca1d4c_0
tensorflow-gpu     anaconda/pkgs/main/linux-64::tensorflow-gpu-1.14.0-h0d30ee6_0
</code></pre>
<blockquote>
<p>imutils only support 36 and 37.<br>mxnet only support 35 and 36.</p>
</blockquote>
<h4 id="details"><a href="#details" class="headerlink" title="details"></a>details</h4><pre><code># remove py35
conda remove -n py35 --all

conda info --envs

conda create -n py37 python==3.7
conda activate py37

# common libraries
conda install -y scikit-learn pandas pillow opencv
pip install imutils

# imutils
conda search imutils  
# py36 and py37

# Name                       Version           Build  Channel             
imutils                        0.5.2          py27_0  anaconda/cloud/conda-forge
imutils                        0.5.2          py36_0  anaconda/cloud/conda-forge
imutils                        0.5.2          py37_0  anaconda/cloud/conda-forge

# tensorflow-gpu and keras
conda install -y tensorflow-gpu keras

# install pytorch
conda install -y pytorch torchvision

# install mxnet
# method 1: pip
pip search mxnet
mxnet-cu80[mkl]/mxnet-cu90[mkl]/mxnet-cu91[mkl]/mxnet-cu92[mkl]/mxnet-cu100[mkl]/mxnet-cu101[mkl]

# method 2: conda
conda install mxnet
# py35 and py36
</code></pre>
<h4 id="TensorFlow-Object-Detection-API"><a href="#TensorFlow-Object-Detection-API" class="headerlink" title="TensorFlow Object Detection API"></a>TensorFlow Object Detection API</h4><p>home page: <a target="_blank" rel="noopener" href="https://github.com/tensorflow/models/tree/master/research/object_detection">home page</a></p>
<p>download <a target="_blank" rel="noopener" href="https://github.com/tensorflow/models">tensorflow models</a> and rename <code>models-master</code> to <code>tfmodels</code></p>
<p>vim ~&#x2F;.bashrc </p>
<pre><code>export PYTHONPATH=/home/kezunlin/dl4cv:/data_1/kezunlin/tfmodels/research:$PYTHONPATH
</code></pre>
<p>source ~&#x2F;.bashrc</p>
<h3 id="jupyter-notebook"><a href="#jupyter-notebook" class="headerlink" title="jupyter notebook"></a>jupyter notebook</h3><pre><code>conda activate py37
conda install -y jupyter 
</code></pre>
<h4 id="install-kernels"><a href="#install-kernels" class="headerlink" title="install kernels"></a>install kernels</h4><pre><code>python -m ipykernel install --user --name=py37
Installed kernelspec py37 in /home/kezunlin/.local/share/jupyter/kernels/py37
</code></pre>
<h4 id="config-for-server"><a href="#config-for-server" class="headerlink" title="config for server"></a>config for server</h4><pre><code>python -c &quot;import IPython;print(IPython.lib.passwd())&quot;
Enter password: 
Verify password: 
sha1:ef2fb2aacff2:4ea2998699638e58d10d594664bd87f9c3381c04

jupyter notebook --generate-config
Writing default config to: /home/kezunlin/.jupyter/jupyter_notebook_config.py

vim .jupyter/jupyter_notebook_config.py

c.NotebookApp.ip = &#39;*&#39;  
c.NotebookApp.password = u&#39;sha1:xxx:xxx&#39; 
c.NotebookApp.open_browser = False 
c.NotebookApp.port = 8888 
c.NotebookApp.enable_mathjax = True
</code></pre>
<h4 id="run-jupyter-on-background"><a href="#run-jupyter-on-background" class="headerlink" title="run jupyter on background"></a>run jupyter on background</h4><pre><code>tmux new -s notebook
jupyter notebook
# ctlr+b+d exit session and DO NOT close session
# ctlr+d exit session and close session
</code></pre>
<p>access <a target="_blank" rel="noopener" href="http://192.168.100.27:8888/">web</a> and input password</p>
<h3 id="test"><a href="#test" class="headerlink" title="test"></a>test</h3><h4 id="py37-1"><a href="#py37-1" class="headerlink" title="py37"></a>py37</h4><pre><code>import cv2
cv2.__version
import tensorflow as tf
import keras 
import torch
import torchvision
</code></pre>
<p>cat .keras&#x2F;keras.json</p>
<pre><code>&#123;
    &quot;epsilon&quot;: 1e-07,
    &quot;floatx&quot;: &quot;float32&quot;,
    &quot;backend&quot;: &quot;tensorflow&quot;,
    &quot;image_data_format&quot;: &quot;channels_last&quot;
&#125;
</code></pre>
<h4 id="py36-1"><a href="#py36-1" class="headerlink" title="py36"></a>py36</h4><pre><code>import mxnet
</code></pre>
<h3 id="train-demo"><a href="#train-demo" class="headerlink" title="train demo"></a>train demo</h3><h4 id="export"><a href="#export" class="headerlink" title="export"></a>export</h4><pre><code># use CPU only
export CUDA_VISIBLE_DEVICES=&quot;&quot;

# use gpu 0 1
export CUDA_VISIBLE_DEVICES=&quot;0,1&quot;
</code></pre>
<h4 id="code"><a href="#code" class="headerlink" title="code"></a>code</h4><pre><code>import os
os.environ[&#39;CUDA_VISIBLE_DEVICES&#39;] = &quot;0,1&quot;
</code></pre>
<p>start train </p>
<pre><code>python train.py
</code></pre>
<h3 id="keras-folder"><a href="#keras-folder" class="headerlink" title=".&#x2F;keras folder"></a>.&#x2F;keras folder</h3><p>view keras models and datasets</p>
<pre><code>ls .keras/
datasets  keras.json  models
</code></pre>
<blockquote>
<p>models saved to  <code>/home/kezunlin/.keras/models/</code><br>datasets saved to  <code>/home/kezunlin/.keras/datasets/</code></p>
</blockquote>
<p>models lists</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/fchollet/deep-learning-models/releases/download/v0.1/vgg16_weights_tf_dim_ordering_tf_kernels_notop.h5">vgg16</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/fchollet/deep-learning-models/releases/download/v0.1/vgg19_weights_tf_dim_ordering_tf_kernels_notop.h5">vgg19</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/fchollet/deep-learning-models/releases/download/v0.2/resnet50_weights_tf_dim_ordering_tf_kernels_notop.h5">resnet50</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/fchollet/deep-learning-models/releases/download/v0.5/inception_v3_weights_tf_dim_ordering_tf_kernels_notop.h5">inceptionv3</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/fchollet/deep-learning-models/releases/download/v0.4/xception_weights_tf_dim_ordering_tf_kernels_notop.h5">xception</a></li>
</ul>
<blockquote>
<p><code>xxx_kernels_notop.h5</code> for <code>include_top = False</code><br><code>xxx_kernels.h5</code> for <code>include_top = True</code></p>
</blockquote>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>



<h2 id="Datasets"><a href="#Datasets" class="headerlink" title="Datasets"></a>Datasets</h2><h3 id="mnist"><a href="#mnist" class="headerlink" title="mnist"></a>mnist</h3><h3 id="cifar10"><a href="#cifar10" class="headerlink" title="cifar10"></a>cifar10</h3><p>to skip download </p>
<pre><code>wget http://www.cs.toronto.edu/~kriz/cifar-10-python.tar.gz
mv ~/Download/cifar-10-python.tar.gz ~/.keras/datasets/cifar-10-batches-py.tar.gz
</code></pre>
<p>to load data </p>
<pre><code>(x_train, y_train), (x_test, y_test) = cifar10.load_data()
</code></pre>
<h3 id="flowers-17"><a href="#flowers-17" class="headerlink" title="flowers-17"></a>flowers-17</h3><ul>
<li><a target="_blank" rel="noopener" href="http://www.robots.ox.ac.uk/~vgg/data/flowers/17/">offical flowers-17</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/danqu130/classification_17flowers/tree/master/data">data</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/naoya3e/17flowers-classification/tree/master/data/train.csv">train.csv</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/naoya3e/17flowers-classification/blob/master/data/test.csv">test.csv</a></li>
</ul>
<h3 id="animals"><a href="#animals" class="headerlink" title="animals"></a>animals</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/shengqishi8787/Starter_Bundle/tree/master/datasets/animals">cat dog panda</a></li>
</ul>
<blockquote>
<p>panda images are WRONG !!!</p>
</blockquote>
<p>counts </p>
<pre><code>ls -lR animals/cat | grep &quot;.jpg&quot; | wc -l
1000
ls -lR animals/dog | grep &quot;.jpg&quot; | wc -l
1000
ls -lR animals/panda | grep &quot;.jpg&quot; | wc -l
1000
</code></pre>
<h3 id="kaggle-cats-vs-dogs"><a href="#kaggle-cats-vs-dogs" class="headerlink" title="kaggle cats vs dogs"></a>kaggle cats vs dogs</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.kaggle.com/c/dogs-vs-cats/data">dogs-vs-cats</a></li>
</ul>
<h3 id="caltech101"><a href="#caltech101" class="headerlink" title="caltech101"></a>caltech101</h3><ul>
<li><a target="_blank" rel="noopener" href="http://www.vision.caltech.edu/Image_Datasets/Caltech101/101_ObjectCategories.tar.gz">caltech101</a></li>
</ul>
<p>download background </p>
<pre><code>wget -b -c http://www.vision.caltech.edu/Image_Datasets/Caltech101/101_ObjectCategories.tar.gz
</code></pre>
<h2 id="Kaggle-API"><a href="#Kaggle-API" class="headerlink" title="Kaggle API"></a>Kaggle API</h2><h3 id="install-and-config"><a href="#install-and-config" class="headerlink" title="install and config"></a>install and config</h3><p>see <a target="_blank" rel="noopener" href="https://github.com/Kaggle/kaggle-api">kaggle-api</a></p>
<pre><code>conda activate keras
conda install kaggle

# download kaggle.json
mv kaggle.json ~/.kaggle/kaggle.json
chmod 600 ~/.kaggle/kaggle.json

cat kaggle.json
&#123;&quot;username&quot;:&quot;xxx&quot;,&quot;key&quot;:&quot;yyy&quot;&#125;
</code></pre>
<p>or by export </p>
<pre><code>export KAGGLE_USERNAME=xxx
export KAGGLE_KEY=yyy
</code></pre>
<blockquote>
<p>tips</p>
<ol>
<li>go to <a target="_blank" rel="noopener" href="https://www.kaggle.com/xxx/account">account</a> and select ‘Create API Token’ and <code>keras.json</code> will be downloaded.</li>
<li>Ensure <code>kaggle.json</code> is in the location <code>~/.kaggle/kaggle.json </code>to use the API.</li>
</ol>
</blockquote>
<p>check version </p>
<pre><code>kaggle --version
Kaggle API 1.5.5
</code></pre>
<h3 id="commands-overview"><a href="#commands-overview" class="headerlink" title="commands overview"></a>commands overview</h3><p>commands </p>
<pre><code>kaggle competitions &#123;list, files, download, submit, submissions, leaderboard&#125;
kaggle datasets &#123;list, files, download, create, version, init&#125;
kaggle kernels &#123;list, init, push, pull, output, status&#125;
kaggle config &#123;view, set, unset&#125;
</code></pre>
<h3 id="download-datasets"><a href="#download-datasets" class="headerlink" title="download datasets"></a>download datasets</h3><pre><code>kaggle competitions download -c dogs-vs-cats
</code></pre>
<h3 id="show-leaderboard"><a href="#show-leaderboard" class="headerlink" title="show leaderboard"></a>show leaderboard</h3><pre><code>kaggle competitions leaderboard dogs-vs-cats --show
teamId  teamName                           submissionDate       score    
------  ---------------------------------  -------------------  -------  
71046  Pierre Sermanet                    2014-02-01 21:43:19  0.98533  
66623  Maxim Milakov                      2014-02-01 18:20:58  0.98293  
72059  Owen                               2014-02-01 17:04:40  0.97973  
74563  Paul Covington                     2014-02-01 23:05:20  0.97946  
74298  we&#39;ve been in KAIST                2014-02-01 21:15:30  0.97840  
71949  orchid                             2014-02-01 23:52:30  0.97733  
</code></pre>
<h3 id="set-default-competition"><a href="#set-default-competition" class="headerlink" title="set default competition"></a>set default competition</h3><pre><code>kaggle config set --name competition --value dogs-vs-cats
- competition is now set to: dogs-vs-cats

kaggle config set --name competition --value dogs-vs-cats-redux-kernels-edition
</code></pre>
<blockquote>
<p>dogs-vs-cats<br>dogs-vs-cats-redux-kernels-edition</p>
</blockquote>
<h3 id="submit"><a href="#submit" class="headerlink" title="submit"></a>submit</h3><pre><code>kaggle c submissions
- Using competition: dogs-vs-cats
- No submissions found

kaggle c submit -f ./submission.csv -m &quot;first submit&quot;
</code></pre>
<blockquote>
<p>competition has already ended, so can not submit.</p>
</blockquote>
<h2 id="Nvidia-docker-and-containers"><a href="#Nvidia-docker-and-containers" class="headerlink" title="Nvidia-docker and containers"></a>Nvidia-docker and containers</h2><h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><pre><code>sudo apt-get -y install docker

# Install nvidia-docker2 and reload the Docker daemon configuration
sudo apt-get install -y nvidia-docker2
sudo pkill -SIGHUP dockerd
</code></pre>
<h3 id="restart-optional"><a href="#restart-optional" class="headerlink" title="restart (optional)"></a>restart (optional)</h3><p>cat &#x2F;etc&#x2F;docker&#x2F;daemon.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;runtimes&quot;: &#123;</span><br><span class="line">        &quot;nvidia&quot;: &#123;</span><br><span class="line">            &quot;path&quot;: &quot;nvidia-container-runtime&quot;,</span><br><span class="line">            &quot;runtimeArgs&quot;: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code>sudo systemctl enable docker
sudo systemctl start docker
</code></pre>
<blockquote>
<p>if errors occur:<br>Job for docker.service failed because the control process exited with error code.<br>See “systemctl status docker.service” and “journalctl -xe” for details.<br>check <code>/etc/docker/daemon.json</code></p>
</blockquote>
<h3 id="test-1"><a href="#test-1" class="headerlink" title="test"></a>test</h3><pre><code>sudo docker run --runtime=nvidia --rm nvidia/cuda:10.1-base nvidia-smi
sudo nvidia-docker run --rm nvidia/cuda:10.1-base nvidia-smi

Thu Aug 29 00:11:32 2019       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 418.87.00    Driver Version: 418.87.00    CUDA Version: 10.1     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  Quadro RTX 8000     Off  | 00000000:02:00.0 Off |                  Off |
| 43%   67C    P2   136W / 260W |  46629MiB / 48571MiB |     17%      Default |
+-------------------------------+----------------------+----------------------+
|   1  Quadro RTX 8000     Off  | 00000000:03:00.0 Off |                  Off |
| 34%   54C    P0    74W / 260W |      0MiB / 48571MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   2  Quadro RTX 8000     Off  | 00000000:82:00.0 Off |                  Off |
| 34%   49C    P0    73W / 260W |      0MiB / 48571MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   3  Quadro RTX 8000     Off  | 00000000:83:00.0 Off |                  Off |
| 33%   50C    P0    73W / 260W |      0MiB / 48571MiB |      3%      Default |
+-------------------------------+----------------------+----------------------+
                                                                            
+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID   Type   Process name                             Usage      |
|=============================================================================|
+-----------------------------------------------------------------------------+
</code></pre>
<blockquote>
<p>add user to <code>docker</code> group, and no need to use <code>sudo docker xxx</code></p>
</blockquote>
<h3 id="command-refs"><a href="#command-refs" class="headerlink" title="command refs"></a>command refs</h3><pre><code>sudo nvidia-docker run --rm nvidia/cuda:10.1-base nvidia-smi
sudo nvidia-docker -t -i --privileged nvidia/cuda bash

sudo docker run -it --name kzl -v /home/kezunlin/workspace/:/home/kezunlin/workspace nvidia/cuda
</code></pre>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20190821: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/dl-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/dl-notes/" class="post-title-link" itemprop="url">dl notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-21 11:00:00" itemprop="dateCreated datePublished" datetime="2019-08-21T11:00:00+08:00">2019-08-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/deep-learning/" itemprop="url" rel="index"><span itemprop="name">deep learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Quick-Links"><a href="#Quick-Links" class="headerlink" title="Quick Links"></a>Quick Links</h2><h3 id="kaggle"><a href="#kaggle" class="headerlink" title="kaggle"></a>kaggle</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.kaggle.com/shivamb/data-science-glossary-on-kaggle">data-science-glossary-on-kaggle</a><blockquote>
<p>+860</p>
</blockquote>
</li>
</ul>
<h3 id="blogs"><a href="#blogs" class="headerlink" title="blogs"></a>blogs</h3><p>en</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.pyimagesearch.com/">pyimagesearch</a></li>
<li><a target="_blank" rel="noopener" href="http://www.zubairahmed.net/">zubairahmed Deep Learning Practitioner</a></li>
<li><a target="_blank" rel="noopener" href="https://www.learnopencv.com/">LearnOpenCV</a></li>
<li><a target="_blank" rel="noopener" href="https://www.hackevolve.com/">MACHINE INTELLIGENCE<br>FOR HUMANS</a></li>
<li><a target="_blank" rel="noopener" href="http://zbigatron.com/">zbigatron Computer Vision and AI</a></li>
</ul>
<p>zh</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.aiuai.cn/category/gpus/">ai and gpu</a></li>
</ul>
<p>less useful</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://nummist.com/opencv/default.aspx">Joseph Howse</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.piekniewski.info/">Piekniewski’s blog</a></li>
</ul>
<h3 id="themed-topics"><a href="#themed-topics" class="headerlink" title="themed topics"></a>themed topics</h3><h4 id="image-video-processing"><a href="#image-video-processing" class="headerlink" title="image video processing"></a>image video processing</h4><ul>
<li><a target="_blank" rel="noopener" href="http://vmlaker.github.io/">vmlaker c++&#x2F;python image video processing</a></li>
<li><a target="_blank" rel="noopener" href="https://hui-wang.info/2017/01/01/%E5%A6%82%E4%BD%95%E6%8F%90%E5%8D%87%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E4%BB%B7%E5%80%BC/">how to improve programmer’s value</a></li>
</ul>
<h4 id="Raspberry-Pi"><a href="#Raspberry-Pi" class="headerlink" title="Raspberry Pi"></a>Raspberry Pi</h4><ul>
<li><a target="_blank" rel="noopener" href="https://www.pyimagesearch.com/2019/03/18/im-writing-a-book-on-computer-vision-and-the-raspberry-pi-and-i-need-your-input/">Movidius NCS and OpenVINO toolkit</a></li>
<li><a target="_blank" rel="noopener" href="https://software.intel.com/es-es/node/762799?language=en">Movidius NCS with caffe</a></li>
</ul>
<blockquote>
<p>NCS(Neural Computing Stick)支持Caffe和Tensorflow框架训练出来的模型。<br>NCS SDK API提供了Python和C语言的支持。<br>Intel’s Movidius NCS and OpenVINO toolkit<br>Movidius APIv1—&gt;Movidius APIv2—&gt; OpenVINO<br>OpenVINO supports Intel CPUs, GPUs, FPGAs, and VPUs.<br>Movidius VPU (Vision Processing Unit)</p>
</blockquote>
<h3 id="papers"><a href="#papers" class="headerlink" title="papers"></a>papers</h3><ul>
<li><a target="_blank" rel="noopener" href="https://paperswithcode.com/sota">paperswithcode</a></li>
<li><a target="_blank" rel="noopener" href="http://www.arxiv-sanity.com/">arxiv-sanity</a></li>
<li><a href="scholar.google.com/">google schloar</a></li>
<li><a target="_blank" rel="noopener" href="https://www.semanticscholar.org/">semanticscholar</a></li>
<li><a target="_blank" rel="noopener" href="https://researchcode.com/">researchcode</a></li>
</ul>
<h3 id="online-books"><a href="#online-books" class="headerlink" title="online books"></a>online books</h3><p>Publisher</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.oreilly.com/">oreilly</a></li>
<li><a target="_blank" rel="noopener" href="https://www.packtpub.com/data/deep-learning">packtpub</a></li>
<li><a target="_blank" rel="noopener" href="https://www.manning.com/">manning</a></li>
</ul>
<p>free books </p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.allitebooks.in/learning-image-processing-with-opencv/">free books</a></li>
<li><a target="_blank" rel="noopener" href="https://sanet.st/blogs/polatebooks/">e-books</a></li>
</ul>
<p>specific books </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.ebook3000.co/generative-deep-learning/">Generative Deep Learning</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ageron/handson-ml">handson-ml book</a></li>
</ul>
<h3 id="online-courses"><a href="#online-courses" class="headerlink" title="online courses"></a>online courses</h3><h4 id="cs231n"><a href="#cs231n" class="headerlink" title="cs231n"></a>cs231n</h4><p>cs231n </p>
<ul>
<li><a target="_blank" rel="noopener" href="http://vision.stanford.edu/teaching/cs231n/syllabus.html">cs231n&#x2F;syllabus</a></li>
<li><a target="_blank" rel="noopener" href="http://cs231n.github.io/">cs231n.github.io</a></li>
</ul>
<p>github</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/mbadry1/CS231n-2017-Summary">CS231n-2017-Summary</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Burton2000/CS231n-2017">CS231n-2017</a></li>
</ul>
<h4 id="self-driving-cars"><a href="#self-driving-cars" class="headerlink" title="self-driving cars"></a>self-driving cars</h4><ul>
<li><a target="_blank" rel="noopener" href="https://www.coursera.org/learn/visual-perception-self-driving-cars">visual-perception-self-driving-cars</a></li>
</ul>
<h3 id="GitHub-Tools"><a href="#GitHub-Tools" class="headerlink" title="GitHub Tools"></a>GitHub Tools</h3><h4 id="machine-learning"><a href="#machine-learning" class="headerlink" title="machine learning"></a>machine learning</h4><ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/abhayspawar/featexp">featexp特征探索工具</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/yzhao062/combo">combo: A Python Toolbox for Machine Learning Model Combination</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/pandas-profiling/pandas-profiling">pandas-profiling</a></p>
<blockquote>
<p>pandas-profiling，一行代码生成超详细数据分析报告。</p>
</blockquote>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/PAIR-code/facets">facets</a></p>
<blockquote>
<p>facebook的facets, Visualizations for machine learning datasets</p>
</blockquote>
</li>
</ul>
<h4 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h4><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/cool-RR/PySnooper">pysnooper</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/zasdfgbnm/TorchSnooper">totchsnooper</a></li>
</ul>
<h4 id="nvidia"><a href="#nvidia" class="headerlink" title="nvidia"></a>nvidia</h4><ul>
<li><a target="_blank" rel="noopener" href="https://developer.nvidia.com/embedded/twodaystoademo">nvidia Jetson</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dusty-nv/jetson-inference">jetson-inference</a></li>
</ul>
<h4 id="mxnet"><a href="#mxnet" class="headerlink" title="mxnet"></a>mxnet</h4><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/apache/incubator-mxnet">mxnet</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dmlc/gluon-cv">gluon-cv</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dmlc/gluon-nlp">gluon-nlp</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/55996985">tvm deploy mxnet nodels</a></li>
</ul>
<h4 id="other"><a href="#other" class="headerlink" title="other"></a>other</h4><ul>
<li><a target="_blank" rel="noopener" href="https://revealjs.com/#/">Reveal.js</a><blockquote>
<p>把 Reveal.js 以及类似的 HTML 5 幻灯免费存放在 Github 上，利用 Github Pages 在线播放和分享 Reveal.js 幻灯</p>
</blockquote>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/pyecharts/pyecharts">Pyecharts</a></li>
<li><a href="www.kepler.gl/">uber的kepler.gl</a></li>
</ul>
<h3 id="Train-Skills"><a href="#Train-Skills" class="headerlink" title="Train Skills"></a>Train Skills</h3><p>gan训练技巧</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/HuB0yIbtKoTj21kTudKArw">gan训练技巧 中文</a> </li>
<li><a target="_blank" rel="noopener" href="https://towardsdatascience.com/10-lessons-i-learned-training-generative-adversarial-networks-gans-for-a-year-c9071159628">gan训练技巧 英文</a></li>
</ul>
<p>pytorch with dail for training</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/r8K3jZsmpRnSoVijKXZkMA">使用nvidia的dail,使用内存disk 加速gpu训练</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/tanglang96/DataLoaders_DALI">dail code</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/JLMe0lJ6SAhOtrLR9IYEjQ">pytorch坑汇总 </a></p>
</li>
</ul>
<h3 id="Architectures"><a href="#Architectures" class="headerlink" title="Architectures"></a>Architectures</h3><h4 id="basic"><a href="#basic" class="headerlink" title="basic"></a>basic</h4><ul>
<li>lenet 1999,alexnet 2012,vggnet 2013,googlenet 2013,inception v1-v4, xception, resnet 2015, </li>
<li>squeezenet, densenet, mobilenet, unet</li>
<li>rcnn,fast rcnn,faster rcnn,mask rcnn</li>
<li>ssd,yolo v1 v2 v3，retinanet(focal loss)</li>
</ul>
<h4 id="extension"><a href="#extension" class="headerlink" title="extension"></a>extension</h4><ul>
<li>ResNeXt: ResNet的优化版ResNeXt,100层相当于resnet200层的精度。一个ResNet打所有，如果不行，那就Stacked Hourglass，还不行就SEResNet。</li>
<li>SEResNet</li>
<li>yolov3 tiny,yolov3 spp1,yolov3 spp3，slim yolov3 spp3(无人机目标检测)</li>
</ul>
<h3 id="Classification"><a href="#Classification" class="headerlink" title="Classification"></a>Classification</h3><ul>
<li>cnn倾向于学习到纹理信息，而不是形状信息。<a target="_blank" rel="noopener" href="https://cugtyt.github.io/blog/papers/2019/0708">here</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/8DFbRI6gsjFL3-I1nBmGqg">细粒度图像分类</a></li>
<li><a target="_blank" rel="noopener" href="https://eng.uber.com/coordconv/">coordconv坐标卷积</a></li>
</ul>
<h3 id="Object-Detection"><a href="#Object-Detection" class="headerlink" title="Object Detection"></a>Object Detection</h3><ul>
<li><a target="_blank" rel="noopener" href="https://arxiv.org/abs/1908.03673">目标检测综述Recent Advances in Deep Learning for Object Detection</a></li>
<li><a target="_blank" rel="noopener" href="https://towardsdatascience.com/evolution-of-object-detection-and-localization-algorithms-e241021d8bad">evolution-of-object-detection-and-localization-algorithms</a></li>
<li><a target="_blank" rel="noopener" href="https://www.sciencedirect.com/science/article/pii/S092523121830924X">Evaluation of deep neural networks for traffic sign detection systems</a><blockquote>
<p>本文比较各目标检测算法在交通标志检测任务中的综合性能。一共比较了8种模型(Faster R-CNN, R-FCN, SSD和 YOLO V2)，用5项指标（mAP&#x2F;FPS&#x2F;参数&#x2F;内存&#x2F;FLOPS）进行性能评价。</p>
</blockquote>
</li>
</ul>
<h4 id="anchor-based"><a href="#anchor-based" class="headerlink" title="anchor-based"></a>anchor-based</h4><ul>
<li>《IoU Loss for 2D&#x2F;3D Object Detection》 注：可提高 2D&#x2F;3D 目标检测的 mAP</li>
<li>IoU-balanced RetinaNet: 专用于Single-stage目标检测的IoU损失函数，如 IoU-balanced RetinaNet 相对于RetinaNet涨点1.1%，特别是高IoU，如涨点2.3% for AP90</li>
<li>上交&amp;中南&amp;南理提出：R3Det 适用于旋转目标的检测网络，综合性能优于RRPN、R2CNN和RetinaNet-R等网络，在航拍图像和场景文本检测数据集上表现SOTA</li>
</ul>
<h4 id="anchor-free"><a href="#anchor-free" class="headerlink" title="anchor-free"></a>anchor-free</h4><ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/CqNdfdW5wXZTtP1b6wi6iQ">Matrix Net (xNet)</a><blockquote>
<p>基于关键点的目标检测器中，18 年提出的 CornerNet 是开山之作，今年又沿着它提出了 CenterNet。这些非常厉害的 single-shot 检测器看起来效果都不如 xNet(matrix net)</p>
</blockquote>
</li>
</ul>
<h3 id="Semantic-Segmentation"><a href="#Semantic-Segmentation" class="headerlink" title="Semantic Segmentation"></a>Semantic Segmentation</h3><ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/ektiUl_H_JlUJdaba-NGsw">语义分割总结</a></li>
</ul>
<h3 id="Instance-Segmentation"><a href="#Instance-Segmentation" class="headerlink" title="Instance Segmentation"></a>Instance Segmentation</h3><h3 id="Optimizers"><a href="#Optimizers" class="headerlink" title="Optimizers"></a>Optimizers</h3><ul>
<li>lookahead,SGD,RMSProp, Adam基础之上的wrapper optimizer</li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/scGkuMJ4lZULhmK69vWYpA">RAdam</a><blockquote>
<p> Adam、RMSProp这些算法虽然收敛速度很快，当往往会掉入局部最优解的“陷阱”；原始的SGD方法虽然能收敛到更好的结果，但是训练速度太慢。<br>最近，一位来自UIUC的中国博士生Liyuan Liu提出了一个新的优化器RAdam。它兼有Adam和SGD两者的优点，既能保证收敛速度快，也不容易掉入局部最优解，而且收敛结果对学习率的初始值非常不敏感。在较大学习率的情况下，RAdam效果甚至还优于SGD。目前论文作者已将RAdam开源，FastAI现在已经集成了RAdam，只需几行代码即可直接调用。RAdam在图像分类、语言建模，以及机器翻译等等许多任务上，都证明有效。<br>上次的adabound出来的时候adam也退休了一波，但是现在还是在用adam。</p>
</blockquote>
</li>
</ul>
<h3 id="Normization"><a href="#Normization" class="headerlink" title="Normization"></a>Normization</h3><ul>
<li><a target="_blank" rel="noopener" href="https://arxiv.org/abs/1908.01259">新的归一化方法 AN：Attentive Normalization</a><blockquote>
<p>注意力归一化，从性能上看，AN 要优于 BN、GN和SN等归一化方法，From 北卡罗来纳大学</p>
</blockquote>
</li>
</ul>
<h3 id="Attention"><a href="#Attention" class="headerlink" title="Attention"></a>Attention</h3><ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/uLkhJ6eYbuy_fHXu5jt0sg">attention系统总结</a></li>
<li><a target="_blank" rel="noopener" href="https://danvatterott.com/blog/2016/09/20/attention-in-a-convolutional-neural-net/">attention-in-a-convolutional-neural-net</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/77834369">语义分割中的Attention和低秩重建</a></li>
</ul>
<h3 id="GAN"><a href="#GAN" class="headerlink" title="GAN"></a>GAN</h3><h3 id="AutoML"><a href="#AutoML" class="headerlink" title="AutoML"></a>AutoML</h3><h3 id="Graph-NN"><a href="#Graph-NN" class="headerlink" title="Graph NN"></a>Graph NN</h3><ul>
<li>pytorch_geometric: 几年来，图神经网络（GNN）在推荐系统、搜索引擎、计算机视觉等领域中都引起了较大的关注。Github有大量开源GNN实现，其中pytorch_geometric是最优秀的实现之一，曾被Yann LeCun推荐</li>
</ul>
<h3 id="Self-Driving"><a href="#Self-Driving" class="headerlink" title="Self-Driving"></a>Self-Driving</h3><ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/uHOSSkQgjJHuLadk7UhOwg">PonyAI小马智行 感知系统技术细节</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/XEcuXnLD3glxKN2N5dAq2Q">传统方法还是深度学习？优点兼得的感知策略</a></li>
</ul>
<h3 id="New-Ideas"><a href="#New-Ideas" class="headerlink" title="New Ideas"></a>New Ideas</h3><ul>
<li><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/OnkM6lTmATuRkhuuSQnEZQ">国内首发Nature子刊 Machine Intelligence论文：思想精妙，或对DNN有重大改进</a></p>
<blockquote>
<p>在连续学习的标准任务disjoint MNIST与shuffled MNIST任务中，OWM算法的表现超过了同类的其他算法。并且，随着学习的任务数目增加，OWM算法的性能优势会进一步加大。<br>代码 <a target="_blank" rel="noopener" href="https://github.com/beijixiong3510/OWM">OWM</a> 22stars 8-9</p>
</blockquote>
</li>
<li><p>multi-Grained Cascade Forest(gcForest): 周志华教授指出了深度学习的另一方案，介绍了他们研究的技术 gcForest （multi-Grained Cascade Forest），借鉴 DNN 的特征表示学习，以及集成学习，利用决策树森林的方法，去达到深度模型的效果。</p>
</li>
<li><p>HSIC-Bottleneck： 研究者介绍了用于训练深度神经网络的希尔伯特·施密特独立准则（Hilbert-Schmidt independence criterion，HSIC）Bottleneck，用它来代替反向传播简直非常美妙了。表示，HSIC-Bottleneck 的表现在 MNIST&#x2F;FashionMNIST&#x2F;CIFAR10 分类中的表现与具有交叉熵目标函数的反向传播算法相当。</p>
</li>
<li><p>基于知识图谱的因果推理: Judea Pearl的因果革命，后面的突破口应该在基于知识图谱的因果推理上面。</p>
</li>
</ul>
<h3 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h3><ul>
<li>基于深度学习的推荐系统，代码数据集缺失，大多数结果无法复现。其次，效果也不如传统推荐算法。</li>
<li>视觉计数(Visual Counting): From Open Set to Closed Set: Counting Objects by Spatial Divide-and-Conquer<blockquote>
<p>本算法在人群计数，车辆计数和植物计数这3个数据集上进行测试，表现SOTA。   From 华中科技&amp;阿德莱德大学</p>
</blockquote>
</li>
</ul>
<h3 id="geoai"><a href="#geoai" class="headerlink" title="geoai"></a>geoai</h3><ul>
<li><a target="_blank" rel="noopener" href="https://medium.com/geoai/integrating-deep-learning-with-gis-70e7c5aa9dfe">geoai</a></li>
</ul>
<h3 id="ml-for-fiance"><a href="#ml-for-fiance" class="headerlink" title="ml for fiance"></a>ml for fiance</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/DeAOzoiikssW1Pgcc1ug">搞了个机器学习交易系统，5000美元投资变成了20万</a></li>
</ul>
<h3 id="ml-for-football-sports"><a href="#ml-for-football-sports" class="headerlink" title="ml for football&#x2F;sports"></a>ml for football&#x2F;sports</h3><p>football with ml</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/52956024">利用机器学习预测足球比赛</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.itcodemonkey.com/article/4283.html">机器学习预测世界杯：巴西夺冠</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://medium.com/@neoyipeng/what-ive-learnt-predicting-soccer-matches-with-machine-learning-b3f8b445149d">predicting-soccer-matches-with-machine-learning</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://towardsdatascience.com/predicting-premier-league-odds-from-ea-player-bfdb52597392">predicting-premier-league-odds-from-ea-player</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://medium.com/@ibigbets/how-to-be-profitable-on-football-betting-in-2019-9371f9bec46e">how-to-be-profitable-on-football-betting</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://mc.ai/predicting-football-results-using-neural-networks/amp/">predicting-football-results-using-neural-networks&#x2F;amp</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://dashee87.github.io/football/python/predicting-football-results-with-statistical-modelling/">predicting-football-results-with-statistical-modelling</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://jasonfu.github.io/2016/07/18/poisson-predict-football/">poisson-predict-football</a></p>
</li>
</ul>
<p>best</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.kaggle.com/raddar">raddar</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/63795586">Sports+AI Kaggle体育比赛预测总结</a></li>
</ul>
<p>关于赔率时间序列的dataset和其中的一个kernel</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://www.kaggle.com/austro/beat-the-bookie-worldwide-football-dataset">beat-the-bookie-worldwide-football-dataset</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.kaggle.com/austro/reproduction-of-winning-strategy-kernel">reproduction-of-winning-strategy-kernel</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.caicai.ai/webguan/search.html">用深度学习解决体育赛事预测问题</a></p>
</li>
</ul>
<p>github repo</p>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20190821: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/vscode-for-remote-development-using-ssh-on-windows/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/vscode-for-remote-development-using-ssh-on-windows/" class="post-title-link" itemprop="url">tutorial to use vscode for remote development using ssh on windows</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-31 04:19:00" itemprop="dateCreated datePublished" datetime="2019-07-31T04:19:00+08:00">2019-07-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install openssh-server</span><br></pre></td></tr></table></figure>

<h3 id="local"><a href="#local" class="headerlink" title="local"></a>local</h3><ol>
<li>install ssh-client on local machine.</li>
<li>download <code>VSCodeUserSetup-x64-1.36.1.exe</code> from <a target="_blank" rel="noopener" href="https://code.visualstudio.com/insiders/">here</a> and install. </li>
<li>start vscode and install <code>Remote Development</code> extension.</li>
<li>ctrl+shift+p and enter <code>remote-ssh</code> and configure for ssh.</li>
</ol>
<p>edit <code>~/.ssh/config</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Host node08</span><br><span class="line">    HostName 192.168.100.08</span><br><span class="line">    User root</span><br><span class="line">    ForwardX11 <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line">Host node09</span><br><span class="line">    HostName 192.168.100.09</span><br><span class="line">    User root </span><br><span class="line">    ForwardX11 <span class="built_in">yes</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>use <code>ssh-keygen</code> instead of <code>username and password</code><br>copy local <code>~/.ssh/id_rsa.pub</code> to remote <code>~/.ssh/authorized_keys</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen </span><br><span class="line"><span class="built_in">ls</span> .ssh/</span><br><span class="line">id_rsa  id_rsa.pub  known_hosts</span><br><span class="line"></span><br><span class="line">ssh-copy-id node08</span><br><span class="line">ssh-copy-id node09</span><br></pre></td></tr></table></figure>

<p>OK. Now we can ssh without password like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># usage </span></span><br><span class="line">ssh node08</span><br><span class="line">ssh node09</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line"><span class="comment">### ssh without terminal closed</span></span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line"><span class="comment"># on server</span></span><br><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line"><span class="comment"># 每隔30s向客户端发送一次,确保terminal不会断开</span></span><br><span class="line">ClientAliveInterval  30</span><br><span class="line"><span class="built_in">sudo</span> service sshd reload</span><br></pre></td></tr></table></figure>

<h3 id="debug-python-with-vscode"><a href="#debug-python-with-vscode" class="headerlink" title="debug python with vscode"></a>debug python with vscode</h3><pre><code>Ctrl+Shift+P 
Python: Select Interpreter

~/anaconda3/envs/torch/bin/python
</code></pre>
<p>Debug shortcuts</p>
<pre><code>F11 step in
F10 step over
F5 continue
</code></pre>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://codepen.io/ginfuru/post/remote-editing-files-with-ssh">remote-editing-files-with-ssh</a></li>
<li><a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/remote/ssh">vscode ssh</a></li>
<li><a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/python/debugging">debugging</a></li>
<li><a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/python/environments">environments</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20190729: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/deep-learning-for-computer-visoion-with-python-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/deep-learning-for-computer-visoion-with-python-notes/" class="post-title-link" itemprop="url">deep learning for computer vision with python notes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-09 10:25:00" itemprop="dateCreated datePublished" datetime="2019-07-09T10:25:00+08:00">2019-07-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/deep-learning/" itemprop="url" rel="index"><span itemprop="name">deep learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h2><h3 id="7-knn"><a href="#7-knn" class="headerlink" title="7 knn"></a>7 knn</h3><ul>
<li>no paramter, with training data as model</li>
<li>test not fast<blockquote>
<p>no learn anything</p>
</blockquote>
</li>
</ul>
<h3 id="8-parameterized-learning"><a href="#8-parameterized-learning" class="headerlink" title="8 parameterized learning"></a>8 parameterized learning</h3><ul>
<li>with parameters W,b as model</li>
<li>test very fast<blockquote>
<p>learn parameters</p>
</blockquote>
</li>
</ul>
<h3 id="multi-class-svm-loss-hinge-loss"><a href="#multi-class-svm-loss-hinge-loss" class="headerlink" title="multi-class svm loss&#x2F;hinge loss"></a>multi-class svm loss&#x2F;hinge loss</h3><p>svm with hinge loss </p>
<p><img src="https://kezunlin.me/images/posts/635233-20190709103145987-1108873245.png" alt="hinge loss"></p>
<ul>
<li>hinge loss</li>
<li>squared hinge loss</li>
</ul>
<p><img src="https://kezunlin.me/images/posts/635233-20190709110153545-1790129406.png" alt="hinge loss example"></p>
<blockquote>
<p>L1 &#x3D; 0,    correct predict<br>L2 &#x3D; 5.96, incorrect predict<br>L3 &#x3D; 5.20, incorrect predict</p>
</blockquote>
<h3 id="cross-entropy-loss-and-softmax-classifiers"><a href="#cross-entropy-loss-and-softmax-classifiers" class="headerlink" title="cross-entropy loss and softmax classifiers"></a>cross-entropy loss and softmax classifiers</h3><p>Softmax classifiers give you probabilities for each class label while hinge loss gives you the<br>margin.</p>
<p><img src="https://kezunlin.me/images/posts/635233-20190709110311106-1386122331.png" alt="cross-entropy loss example"></p>
<h3 id="9-optimization"><a href="#9-optimization" class="headerlink" title="9 optimization"></a>9 optimization</h3><h4 id="GD-and-SGD"><a href="#GD-and-SGD" class="headerlink" title="GD and SGD"></a>GD and SGD</h4><ul>
<li>basic gradient descent(GD): predict all training data and update weights per epoch </li>
<li>stochastic gradient descent(SGD): predict only batch training data and update weights per batch</li>
</ul>
<p><img src="https://kezunlin.me/images/posts/635233-20190712103138778-12291224.png" alt="GD"><br><img src="https://kezunlin.me/images/posts/635233-20190712103200939-2129687344.png" alt="SGD"></p>
<h4 id="Extensions-to-SGD"><a href="#Extensions-to-SGD" class="headerlink" title="Extensions to SGD"></a>Extensions to SGD</h4><ul>
<li>Momentum based SGD</li>
<li>Nesterov acceration SGD</li>
</ul>
<p><img src="https://kezunlin.me/images/posts/635233-20190712112130685-1593049237.png" alt="Momentum based SGD"><br><img src="https://kezunlin.me/images/posts/635233-20190712112150135-1831335209.png" alt="Nesterov acceration SGD"></p>
<blockquote>
<p>tips: use Momentum based SGD</p>
</blockquote>
<h4 id="regularization"><a href="#regularization" class="headerlink" title="regularization"></a>regularization</h4><p>add to original cost</p>
<ul>
<li>L1 regularization</li>
<li>L2 regularization(weight decay)</li>
<li>Elastic Net regularization</li>
</ul>
<p><img src="https://kezunlin.me/images/posts/635233-20190712135244331-1511390223.png" alt="regularization"></p>
<p>during training process</p>
<ul>
<li>dropout</li>
<li>data argumentation</li>
<li>early stopping(no-imporovements-in-N)</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="pyimagesearch.com">deep learning for computer vision with python</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20190709: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/pytorch-tutorial-on-ubuntu-16-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/pytorch-tutorial-on-ubuntu-16-04/" class="post-title-link" itemprop="url">tutorial to compile and use pytorch on ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-06-26 16:13:00" itemprop="dateCreated datePublished" datetime="2019-06-26T16:13:00+08:00">2019-06-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/deep-learning/" itemprop="url" rel="index"><span itemprop="name">deep learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="PyTorch-for-Python"><a href="#PyTorch-for-Python" class="headerlink" title="PyTorch for Python"></a>PyTorch for Python</h2><h3 id="install-pytorch-from-anaconda"><a href="#install-pytorch-from-anaconda" class="headerlink" title="install pytorch from anaconda"></a><del>install pytorch from anaconda</del></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">conda info --envs</span><br><span class="line">conda activate py35</span><br><span class="line"></span><br><span class="line"><span class="comment"># newest version</span></span><br><span class="line"><span class="comment"># 1.1.0 pytorch/0.3.0 torchvision</span></span><br><span class="line">conda install pytorch torchvision cudatoolkit=9.0 -c pytorch</span><br><span class="line"></span><br><span class="line"><span class="comment"># old version [NOT]</span></span><br><span class="line"><span class="comment"># 0.4.1 pytorch/0.2.1 torchvision</span></span><br><span class="line">conda install pytorch=0.4.1 cuda90 -c pytorch</span><br></pre></td></tr></table></figure>

<p>output </p>
<pre><code>The following NEW packages will be INSTALLED:

  pytorch            pytorch/linux-64::pytorch-1.1.0-py3.5_cuda9.0.176_cudnn7.5.1_0
  torchvision        pytorch/linux-64::torchvision-0.3.0-py35_cu9.0.176_1
</code></pre>
<blockquote>
<p>download from channel <code>pytorch</code> will cost much time!<br>下载<code>pytorch/linux-64::pytorch-1.1.0-py3.5_cuda9.0.176_cudnn7.5.1_0</code>速度非常慢！</p>
</blockquote>
<h3 id="install-pytorch-from-tsinghua"><a href="#install-pytorch-from-tsinghua" class="headerlink" title="install pytorch from tsinghua"></a>install pytorch from tsinghua</h3><h4 id="add-tsinghua-pytorch-channels"><a href="#add-tsinghua-pytorch-channels" class="headerlink" title="add tsinghua pytorch channels"></a>add tsinghua pytorch channels</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/</span><br><span class="line"><span class="comment"># for legacy win-64</span></span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/peterjc123/</span><br><span class="line">conda config --<span class="built_in">set</span> show_channel_urls <span class="built_in">yes</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用anaconda官方pytorch源非常慢，用清华源代替。<br>see <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/">tsinghua anaconda</a></p>
</blockquote>
<p><code>cat ～/.condarc</code></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">channels:</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/</span><br><span class="line">  - defaults</span><br></pre></td></tr></table></figure>

<h4 id="install-pytorch-from-tsinghua-1"><a href="#install-pytorch-from-tsinghua-1" class="headerlink" title="install pytorch from tsinghua"></a>install pytorch from tsinghua</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">conda create --name torch python==3.7</span><br><span class="line">conda activate torch</span><br><span class="line"></span><br><span class="line">conda install -y pytorch torchvision</span><br><span class="line">conda install -y scikit-learn scikit-image pandas matplotlib pillow opencv</span><br></pre></td></tr></table></figure>

<p>The following NEW packages will be INSTALLED:</p>
<pre><code>  pytorch            anaconda/cloud/pytorch/linux-64::pytorch-1.1.0-py3.5_cuda9.0.176_cudnn7.5.1_0
  torchvision        anaconda/cloud/pytorch/linux-64::torchvision-0.3.0-py35_cu9.0.176_1
</code></pre>
<h3 id="test-pytorch"><a href="#test-pytorch" class="headerlink" title="test pytorch"></a>test pytorch</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import torch</span><br><span class="line"><span class="built_in">print</span>(torch.__version__)</span><br><span class="line"><span class="string">&#x27;1.1.0&#x27;</span></span><br><span class="line">```   </span><br><span class="line">or </span><br><span class="line">```bash</span><br><span class="line">python -c <span class="string">&#x27;import torch; print(torch.cuda.is_available())&#x27;</span></span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<h3 id="pre-trained-models"><a href="#pre-trained-models" class="headerlink" title="pre-trained models"></a>pre-trained models</h3><p>pre-trained model saved to <code>/home/kezunlin/.cache/torch/checkpoints/</code></p>
<p>Downloading: “<a target="_blank" rel="noopener" href="https://download.pytorch.org/models/shufflenetv2_x0.5-f707e7126e.pth">https://download.pytorch.org/models/shufflenetv2_x0.5-f707e7126e.pth</a>“ to &#x2F;home&#x2F;kezunlin&#x2F;.cache&#x2F;torch&#x2F;checkpoints&#x2F;shufflenetv2_x0.5-f707e7126e.pth</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>



<h2 id="PyTorch-for-C"><a href="#PyTorch-for-C" class="headerlink" title="PyTorch for C++"></a>PyTorch for C++</h2><h3 id="download-LibTorch"><a href="#download-LibTorch" class="headerlink" title="download LibTorch"></a>download LibTorch</h3><p>download from <a target="_blank" rel="noopener" href="https://download.pytorch.org/libtorch/cu90/libtorch-shared-with-deps-latest.zip">LibTorch</a></p>
<h3 id="compile-from-source"><a href="#compile-from-source" class="headerlink" title="compile from source"></a>compile from source</h3><h4 id="compile-pytorch"><a href="#compile-pytorch" class="headerlink" title="compile pytorch"></a>compile pytorch</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># method 1</span></span><br><span class="line">git <span class="built_in">clone</span> --recursive https://github.com/pytorch/pytorch</span><br><span class="line"><span class="built_in">cd</span> pytorch</span><br><span class="line"></span><br><span class="line"><span class="comment"># method 2, if you are updating an existing checkout</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/pytorch/pytorch</span><br><span class="line"><span class="built_in">cd</span> pytorch </span><br><span class="line">git submodule <span class="built_in">sync</span></span><br><span class="line">git submodule update --init --recursive</span><br><span class="line">```    </span><br><span class="line">check tags </span><br><span class="line">```bash</span><br><span class="line">git tag -l </span><br><span class="line"></span><br><span class="line">v0.4.0</span><br><span class="line">v0.4.1</span><br><span class="line">v1.0.0</span><br><span class="line">v1.0.1</span><br><span class="line">v1.0rc0</span><br><span class="line">v1.0rc1</span><br><span class="line">v1.1.0</span><br></pre></td></tr></table></figure>

<p>now compile </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout v1.1.0</span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build &amp;&amp; cmake-gui ..</span><br></pre></td></tr></table></figure>

<p>with configs</p>
<pre><code>BUILD_PYTHON OFF
</code></pre>
<blockquote>
<p>be sure to use <code>stable version 1.1.0</code> from <a target="_blank" rel="noopener" href="https://github.com/pytorch/pytorch/tree/v1.1.0">here</a> instead of latest version 20190724 (<code>unstable version 1.2.0</code>)<br>because error will occurs when load models.</p>
</blockquote>
<ul>
<li><p>for 1.1.0:  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::shared_ptr&lt;torch::jit::script::Module&gt; <span class="keyword">module</span> = torch::jit::<span class="built_in">load</span>(<span class="string">&quot;./model.pt&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>for latest 1.2.0</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">torch::jit::script::Module <span class="keyword">module</span> = torch::jit::<span class="built_in">load</span>(<span class="string">&quot;./model.pt&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>configure output </p>
<p>  ******** Summary ********<br>  General:<br>CMake version         : 3.5.1<br>CMake command         : &#x2F;usr&#x2F;bin&#x2F;cmake<br>System                : Linux<br>C++ compiler          : &#x2F;usr&#x2F;bin&#x2F;c++<br>C++ compiler id       : GNU<br>C++ compiler version  : 5.4.0<br>BLAS                  : MKL<br>CXX flags             :  -fvisibility-inlines-hidden -fopenmp -O2 -fPIC -Wno-narrowing -Wall -Wextra -Wno-missing-field-initializers -Wno-type-limits -Wno-array-bounds -Wno-unknown-pragmas -Wno-sign-compare -Wno-unused-parameter -Wno-unused-variable -Wno-unused-function -Wno-unused-result -Wno-strict-overflow -Wno-strict-aliasing -Wno-error&#x3D;deprecated-declarations -Wno-error&#x3D;pedantic -Wno-error&#x3D;redundant-decls -Wno-error&#x3D;old-style-cast -fdiagnostics-color&#x3D;always -Wno-unused-but-set-variable -Wno-maybe-uninitialized -fno-math-errno -fno-trapping-math<br>Build type            : Release<br>Compile definitions   : ONNX_ML&#x3D;1;ONNX_NAMESPACE&#x3D;onnx_torch;USE_GCC_ATOMICS&#x3D;1;HAVE_MMAP&#x3D;1;_FILE_OFFSET_BITS&#x3D;64;HAVE_SHM_OPEN&#x3D;1;HAVE_SHM_UNLINK&#x3D;1;HAVE_MALLOC_USABLE_SIZE&#x3D;1<br>CMAKE_PREFIX_PATH     :<br>CMAKE_INSTALL_PREFIX  : &#x2F;usr&#x2F;local<br><br>TORCH_VERSION         : 1.1.0<br>CAFFE2_VERSION        : 1.1.0<br>BUILD_CAFFE2_MOBILE   : ON<br>BUILD_ATEN_ONLY       : OFF<br>BUILD_BINARY          : OFF<br>BUILD_CUSTOM_PROTOBUF : ON<br>  Link local protobuf : ON<br>BUILD_DOCS            : OFF<br>BUILD_PYTHON          : OFF<br>BUILD_CAFFE2_OPS      : ON<br>BUILD_SHARED_LIBS     : ON<br>BUILD_TEST            : OFF<br>INTERN_BUILD_MOBILE   :<br>USE_ASAN              : OFF<br>USE_CUDA              : ON<br>  CUDA static link    : OFF<br>  USE_CUDNN           : ON<br>  CUDA version        : 9.2<br>  cuDNN version       : 7.1.4<br>  CUDA root directory : &#x2F;usr&#x2F;local&#x2F;cuda<br>  CUDA library        : &#x2F;usr&#x2F;local&#x2F;cuda&#x2F;lib64&#x2F;stubs&#x2F;libcuda.so<br>  cudart library      : &#x2F;usr&#x2F;local&#x2F;cuda&#x2F;lib64&#x2F;libcudart.so<br>  cublas library      : &#x2F;usr&#x2F;local&#x2F;cuda&#x2F;lib64&#x2F;libcublas.so<br>  cufft library       : &#x2F;usr&#x2F;local&#x2F;cuda&#x2F;lib64&#x2F;libcufft.so<br>  curand library      : &#x2F;usr&#x2F;local&#x2F;cuda&#x2F;lib64&#x2F;libcurand.so<br>  cuDNN library       : &#x2F;usr&#x2F;local&#x2F;cuda&#x2F;lib64&#x2F;libcudnn.so<br>  nvrtc               : &#x2F;usr&#x2F;local&#x2F;cuda&#x2F;lib64&#x2F;libnvrtc.so<br>  CUDA include path   : &#x2F;usr&#x2F;local&#x2F;cuda&#x2F;include<br>  NVCC executable     : &#x2F;usr&#x2F;local&#x2F;cuda&#x2F;bin&#x2F;nvcc<br>  CUDA host compiler  : &#x2F;usr&#x2F;bin&#x2F;cc<br>  USE_TENSORRT        : OFF<br>USE_ROCM              : OFF<br>USE_EIGEN_FOR_BLAS    : ON<br>USE_FBGEMM            : OFF<br>USE_FFMPEG            : OFF<br>USE_GFLAGS            : OFF<br>USE_GLOG              : OFF<br>USE_LEVELDB           : OFF<br>USE_LITE_PROTO        : OFF<br>USE_LMDB              : OFF<br>USE_METAL             : OFF<br>USE_MKL               : OFF<br>USE_MKLDNN            : OFF<br>USE_NCCL              : ON<br>  USE_SYSTEM_NCCL     : OFF<br>USE_NNPACK            : ON<br>USE_NUMPY             : ON<br>USE_OBSERVERS         : ON<br>USE_OPENCL            : OFF<br>USE_OPENCV            : OFF<br>USE_OPENMP            : ON<br>USE_TBB               : OFF<br>USE_PROF              : OFF<br>USE_QNNPACK           : ON<br>USE_REDIS             : OFF<br>USE_ROCKSDB           : OFF<br>USE_ZMQ               : OFF<br>USE_DISTRIBUTED       : ON<br>  USE_MPI             : ON<br>  USE_GLOO            : ON<br>  USE_GLOO_IBVERBS    : OFF<br>NAMEDTENSOR_ENABLED   : OFF<br>Public Dependencies  : Threads::Threads<br>Private Dependencies : qnnpack;nnpack;cpuinfo;&#x2F;usr&#x2F;lib&#x2F;x86_64-linux-gnu&#x2F;libnuma.so;fp16;&#x2F;usr&#x2F;lib&#x2F;openmpi&#x2F;lib&#x2F;libmpi_cxx.so;&#x2F;usr&#x2F;lib&#x2F;openmpi&#x2F;lib&#x2F;libmpi.so;gloo;aten_op_header_gen;foxi_loader;rt;gcc_s;gcc;dl<br>  Configuring done</p>
</li>
</ul>
<h4 id="install-pytorch"><a href="#install-pytorch" class="headerlink" title="install pytorch"></a>install pytorch</h4><p>now compile and install </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make -j8</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br></pre></td></tr></table></figure>

<p>output </p>
<pre><code>Install the project...
-- Install configuration: &quot;Release&quot;
-- Old export file &quot;/usr/local/share/cmake/Caffe2/Caffe2Targets.cmake&quot; will be replaced.  Removing files [/usr/local/share/cmake/Caffe2/Caffe2Targets-release.cmake].
-- Set runtime path of &quot;/usr/local/bin/protoc&quot; to &quot;$ORIGIN&quot;
-- Old export file &quot;/usr/local/share/cmake/Gloo/GlooTargets.cmake&quot; will be replaced.  Removing files [/usr/local/share/cmake/Gloo/GlooTargets-release.cmake].
-- Set runtime path of &quot;/usr/local/lib/libonnxifi_dummy.so&quot; to &quot;$ORIGIN&quot;
-- Set runtime path of &quot;/usr/local/lib/libonnxifi.so&quot; to &quot;$ORIGIN&quot;
-- Set runtime path of &quot;/usr/local/lib/libfoxi_dummy.so&quot; to &quot;$ORIGIN&quot;
-- Set runtime path of &quot;/usr/local/lib/libfoxi.so&quot; to &quot;$ORIGIN&quot;
-- Set runtime path of &quot;/usr/local/lib/libc10.so&quot; to &quot;$ORIGIN&quot;
-- Set runtime path of &quot;/usr/local/lib/libc10_cuda.so&quot; to &quot;$ORIGIN:/usr/local/cuda/lib64&quot;
-- Set runtime path of &quot;/usr/local/lib/libthnvrtc.so&quot; to &quot;$ORIGIN:/usr/local/cuda/lib64/stubs:/usr/local/cuda/lib64&quot;
-- Set runtime path of &quot;/usr/local/lib/libtorch.so&quot; to &quot;$ORIGIN:/usr/local/cuda/lib64:/usr/lib/openmpi/lib&quot;
-- Set runtime path of &quot;/usr/local/lib/libcaffe2_detectron_ops_gpu.so&quot; to &quot;$ORIGIN:/usr/local/cuda/lib64&quot;
-- Set runtime path of &quot;/usr/local/lib/libcaffe2_observers.so&quot; to &quot;$ORIGIN:/usr/local/cuda/lib64&quot;
</code></pre>
<blockquote>
<p>pytorch 1.1.0<br><strong>compile and install will cost more than 2 hours</strong><br>lib install to <code>/usr/local/lib/libtorch.so</code><br>cmake install to <code>/usr/local/share/cmake/Torch</code></p>
</blockquote>
<h3 id="C-example"><a href="#C-example" class="headerlink" title="C++ example"></a>C++ example</h3><p>load pytorch model in c++<br>see <a target="_blank" rel="noopener" href="https://pytorch.org/tutorials/advanced/cpp_export.html">load pytorch model in c++</a></p>
<h4 id="cpp"><a href="#cpp" class="headerlink" title="cpp"></a>cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;torch/script.h&gt;</span> <span class="comment">// One-stop header.</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">const</span> <span class="type">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;</span><br><span class="line">    std::cerr &lt;&lt; <span class="string">&quot;usage: example-app &lt;path-to-exported-script-module&gt;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Deserialize the ScriptModule from a file using torch::jit::load().</span></span><br><span class="line">  std::shared_ptr&lt;torch::jit::script::Module&gt; <span class="keyword">module</span> = torch::jit::<span class="built_in">load</span>(argv[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">assert</span>(<span class="keyword">module</span> != <span class="literal">nullptr</span>);</span><br><span class="line">  std::cout &lt;&lt; <span class="string">&quot;ok\n&quot;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Create a vector of inputs.</span></span><br><span class="line">std::vector&lt;torch::jit::IValue&gt; inputs;</span><br><span class="line">inputs.<span class="built_in">push_back</span>(torch::<span class="built_in">ones</span>(&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">224</span>, <span class="number">224</span>&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Execute the model and turn its output into a tensor.</span></span><br><span class="line">at::Tensor output = <span class="keyword">module</span>-&gt;forward(inputs).<span class="built_in">toTensor</span>();</span><br><span class="line"></span><br><span class="line">std::cout &lt;&lt; output.<span class="built_in">slice</span>(<span class="comment">/*dim=*/</span><span class="number">1</span>, <span class="comment">/*start=*/</span><span class="number">0</span>, <span class="comment">/*end=*/</span><span class="number">5</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span> FATAL_ERROR)</span><br><span class="line"><span class="keyword">project</span>(custom_ops)</span><br><span class="line"></span><br><span class="line"><span class="comment"># /usr/local/share/cmake/Torch</span></span><br><span class="line"><span class="keyword">find_package</span>(Torch REQUIRED)</span><br><span class="line"><span class="keyword">MESSAGE</span>( [Main] <span class="string">&quot; TORCH_INCLUDE_DIRS = $&#123;TORCH_INCLUDE_DIRS&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">MESSAGE</span>( [Main] <span class="string">&quot; TORCH_LIBRARIES = $&#123;TORCH_LIBRARIES&#125;&quot;</span>)  </span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;TORCH_INCLUDE_DIRS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(example-app example-app.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(example-app <span class="string">&quot;$&#123;TORCH_LIBRARIES&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">set_property</span>(<span class="keyword">TARGET</span> example-app PROPERTY CXX_STANDARD <span class="number">11</span>)</span><br></pre></td></tr></table></figure>

<p>output </p>
<pre><code>Found torch: /usr/local/lib/libtorch.so  
[Main] TORCH_INCLUDE_DIRS = /usr/local/include;/usr/local/include/torch/csrc/api/include
[Main] TORCH_LIBRARIES = torch;torch_library;/usr/local/lib/libc10.so;/usr/local/cuda/lib64/stubs/libcuda.so;/usr/local/cuda/lib64/libnvrtc.so;/usr/local/cuda/lib64/libnvToolsExt.so;/usr/local/cuda/lib64/libcudart.so;/usr/local/lib/libc10_cuda.so
[TOLOWER] ALGORITHM_TARGET = algorithm
</code></pre>
<h4 id="make"><a href="#make" class="headerlink" title="make"></a>make</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build </span><br><span class="line"><span class="built_in">cd</span> build &amp;&amp; cmake-gui ..</span><br><span class="line">make -j8</span><br></pre></td></tr></table></figure>

<blockquote>
<p>set <code>Torch_DIR</code> to <code>/home/kezunlin/program/libtorch/share/cmake/Torch</code><br>auto-set <code>Torch_DIR</code> to <code>/usr/local/share/cmake/Torch</code></p>
</blockquote>
<h4 id="run"><a href="#run" class="headerlink" title="run"></a>run</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./example-app model.pt</span><br><span class="line">-0.2698 -0.0381  0.4023 -0.3010 -0.0448</span><br></pre></td></tr></table></figure>

<h3 id="errors-and-solutions"><a href="#errors-and-solutions" class="headerlink" title="errors and solutions"></a>errors and solutions</h3><h4 id="compile-errors-with-libtorch"><a href="#compile-errors-with-libtorch" class="headerlink" title="compile errors with libtorch"></a>compile errors with libtorch</h4><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pytorch/pytorch/issues/15138">Build simple c++ example-cpp using Libtorch fails on arm with undefined reference to c10::Error::Error</a></li>
</ul>
<blockquote>
<p>@soumith<br>You might be building libtorch with a compiler that is incompatible with the compiler building your final app.<br>For example, you built libtorch with gcc 4.9.2 and your final app with gcc 5.1, and the C++ ABI between both of them is not the same, so you are seeing linker errors like these</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://discuss.pytorch.org/t/issues-linking-with-libtorch-c-11-abi/29510">issues-linking-with-libtorch-c-11-abi</a></li>
</ul>
<blockquote>
<p>@christianperone</p>
</blockquote>
<pre><code>if (&quot;$&#123;CMAKE_CXX_COMPILER_ID&#125;&quot; STREQUAL &quot;GNU&quot;)
  set(TORCH_CXX_FLAGS &quot;-D_GLIBCXX_USE_CXX11_ABI=0&quot;)
endif()
</code></pre>
<blockquote>
<p>Which forces GCC to use the old C++11 ABI.</p>
</blockquote>
<blockquote>
<p>@ smth<br>we have that flag set because we build with gcc 4.9.x, which only has the old ABI.<br>In GCC 5.1, the ABI for std::string was changed, and binaries compiling with gcc &gt;&#x3D; 5.1 are not ABI-compatible with binaries build with gcc &lt; 5.1 (like pytorch) unless you set that flag.</p>
</blockquote>
<p>resons and solutions</p>
<ul>
<li>Reasons: ** LibTorch compiled with GCC-4.9.X (only has the old ABI), and binaries compiling with gcc &gt;&#x3D; 5.1 are not ABI-compatible**</li>
<li>Solution: compile pytorch from source instead of using <code>LibTroch</code> downloaded from the website.</li>
</ul>
<h4 id="runtime-errors-with-pytorch"><a href="#runtime-errors-with-pytorch" class="headerlink" title="runtime errors with pytorch"></a>runtime errors with pytorch</h4><p>errors</p>
<pre><code>/usr/local/lib/libopencv_imgcodecs.so.3.1.0: undefined reference to `TIFFReadRGBAStrip@LIBTIFF_4.0&#39;
</code></pre>
<p>which means opencv link against <code>libtiff 4.0.6</code></p>
<p>ldd check </p>
<pre><code>ldd /usr/local/lib/libopencv_imgcodecs.so.3.1.0
    linux-vdso.so.1 =&gt;  (0x00007ffc92ffc000)
    libopencv_imgproc.so.3.1 =&gt; /usr/local/lib/libopencv_imgproc.so.3.1 (0x00007f32afbca000)
    libjpeg.so.8 =&gt; /usr/local/lib/libjpeg.so.8 (0x00007f32af948000)
    libpng12.so.0 =&gt; /lib/x86_64-linux-gnu/libpng12.so.0 (0x00007f32af723000)
    libtiff.so.5 =&gt; /usr/lib/x86_64-linux-gnu/libtiff.so.5 (0x00007f32af4ae000)
    
</code></pre>
<blockquote>
<p>when compile <code>opencv-3.1.0</code>, cmake find <code>/usr/lib/x86_64-linux-gnu/libtiff.so.5</code></p>
</blockquote>
<p>locate libtiff</p>
<pre><code>locate libtiff.so

/home/kezunlin/anaconda3/envs/py35/lib/libtiff.so
/home/kezunlin/anaconda3/envs/py35/lib/libtiff.so.5
/home/kezunlin/anaconda3/envs/py35/lib/libtiff.so.5.4.0
/home/kezunlin/anaconda3/lib/libtiff.so
/home/kezunlin/anaconda3/lib/libtiff.so.5
/home/kezunlin/anaconda3/lib/libtiff.so.5.4.0
/home/kezunlin/anaconda3/pkgs/libtiff-4.0.10-h2733197_2/lib/libtiff.so
/home/kezunlin/anaconda3/pkgs/libtiff-4.0.10-h2733197_2/lib/libtiff.so.5
/home/kezunlin/anaconda3/pkgs/libtiff-4.0.10-h2733197_2/lib/libtiff.so.5.4.0
/opt/MATLAB/R2016b/bin/glnxa64/libtiff.so.5
/opt/MATLAB/R2016b/bin/glnxa64/libtiff.so.5.0.5
/usr/lib/x86_64-linux-gnu/libtiff.so
/usr/lib/x86_64-linux-gnu/libtiff.so.5
/usr/lib/x86_64-linux-gnu/libtiff.so.5.2.4
</code></pre>
<blockquote>
<p>It seems that my OpenCV was compiled against libtiff 4, but I have libtiff 5, how to solve this problem?</p>
</blockquote>
<p>re-compile opencv-3.1.0 again, new errors occur<br>see <a target="_blank" rel="noopener" href="https://github.com/opencv/opencv_contrib/issues/1478">here</a></p>
<pre><code>CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
Please set them or make sure they are set and tested correctly in the CMake files:
CUDA_nppi_LIBRARY (ADVANCED)
    linked by target &quot;opencv_cudev&quot; in directory /home/kezunlin/program/opencv-3.1.0/modules/cudev
    linked by target &quot;opencv_cudev&quot; in directory /home/kezunlin/program/opencv-3.1.0/modules/cudev
    linked by target &quot;opencv_test_cudev&quot; in directory /home/kezunlin/program/opencv-3.1.0/modules/cudev/test
</code></pre>
<p>solutions:</p>
<pre><code>WITH_CUDA OFF
</code></pre>
<p>  WITH_VTK OFF<br>  WITH_TIFF OFF<br>  BUILD_PERF_TESTS OFF </p>
<blockquote>
<p>for python2, use default <code>/usr/bin/python2.7</code><br>for python3, NOT USE <code>anaconda</code> version<br>编译的过程中，尽量避免使用<code>anaconda</code>目录下的lib</p>
</blockquote>
<p>install libwebp</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get -y install libwebp-dev</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://pytorch.org/">pytorch</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/pytorch/pytorch">pytorch github</a></li>
<li><a target="_blank" rel="noopener" href="https://pytorch.org/tutorials/beginner/deep_learning_60min_blitz.html">deep_learning_60min_blitz</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/yunjey/pytorch-tutorial">pytorch-tutorial</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/MorvanZhou/PyTorch-Tutorial/tree/master/tutorial-contents-notebooks">pytorch notebooks</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/L1aoXingyu/pytorch-beginner">pytorch-beginner</a></li>
<li><a target="_blank" rel="noopener" href="https://pytorch.org/cppdocs">pytorch cppdocs</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20190626: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/speed-up-opencv-image-processing-with-OpenCL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/speed-up-opencv-image-processing-with-OpenCL/" class="post-title-link" itemprop="url">speed up opencv image processing with OpenCL</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-06-25 16:03:00" itemprop="dateCreated datePublished" datetime="2019-06-25T16:03:00+08:00">2019-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><blockquote>
<p>OpenCL is a framework for writing programs that execute on these heterogenous platforms. The developers of an OpenCL library utilize all OpenCL compatible devices (CPUs, GPUs, DSPs, FPGAs etc) they find on a computer &#x2F; device and assign the right tasks to the right processor.<br>Keep in mind that as a user of OpenCV library you are not developing any OpenCL library. In fact you are not even a user of the OpenCL library because all the details are hidden behind the transparent API&#x2F;TAPI.</p>
</blockquote>
<h3 id="config"><a href="#config" class="headerlink" title="config"></a>config</h3><p>cmake config by default for compiling OpenCV:</p>
<pre><code>WITH_OPENCL ON
</code></pre>
<h3 id="example"><a href="#example" class="headerlink" title="example"></a>example</h3><h4 id="Mat"><a href="#Mat" class="headerlink" title="Mat"></a>Mat</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;opencv2/opencv.hpp&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Mat img, gray;</span><br><span class="line">    img = <span class="built_in">imread</span>(<span class="string">&quot;image.jpg&quot;</span>, IMREAD_COLOR);</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">cvtColor</span>(img, gray, COLOR_BGR2GRAY);</span><br><span class="line">    <span class="built_in">GaussianBlur</span>(gray, gray,<span class="built_in">Size</span>(<span class="number">7</span>, <span class="number">7</span>), <span class="number">1.5</span>);</span><br><span class="line">    <span class="built_in">Canny</span>(gray, gray, <span class="number">0</span>, <span class="number">50</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">imshow</span>(<span class="string">&quot;edges&quot;</span>, gray);</span><br><span class="line">    <span class="built_in">waitKey</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="UMat"><a href="#UMat" class="headerlink" title="UMat"></a>UMat</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;opencv2/opencv.hpp&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    UMat img, gray;</span><br><span class="line">    <span class="built_in">imread</span>(<span class="string">&quot;image.jpg&quot;</span>, IMREAD_COLOR).<span class="built_in">copyTo</span>(img);</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">cvtColor</span>(img, gray, COLOR_BGR2GRAY);</span><br><span class="line">    <span class="built_in">GaussianBlur</span>(gray, gray,<span class="built_in">Size</span>(<span class="number">7</span>, <span class="number">7</span>), <span class="number">1.5</span>);</span><br><span class="line">    <span class="built_in">Canny</span>(gray, gray, <span class="number">0</span>, <span class="number">50</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">imshow</span>(<span class="string">&quot;edges&quot;</span>, gray);</span><br><span class="line">    <span class="built_in">waitKey</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>UMat with transparent API&#x2F;TAPI</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.learnopencv.com/opencv-transparent-api/">opencv-transparent-api</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20190626: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/anaconda-tutorial-on-ubuntu-16-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/anaconda-tutorial-on-ubuntu-16-04/" class="post-title-link" itemprop="url">anaconda tutorial on ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-05-24 11:16:00" itemprop="dateCreated datePublished" datetime="2019-05-24T11:16:00+08:00">2019-05-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><ul>
<li>ubuntu 16.04</li>
<li>conda 4.6.14</li>
<li>python 3.7.3 (default)</li>
<li>python 3.5.6 (env)</li>
</ul>
<h3 id="Install-Conda"><a href="#Install-Conda" class="headerlink" title="Install Conda"></a>Install Conda</h3><p>download <code>Anaconda3-2019.03-Linux-x86_64.sh</code> from <a target="_blank" rel="noopener" href="https://www.anaconda.com/distribution/#linux">here</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">bash ./Anaconda3-2019.03-Linux-x86_64.sh</span><br><span class="line"></span><br><span class="line">[/home/kezunlin/anaconda3] &gt;&gt;&gt; </span><br><span class="line">PREFIX=/home/kezunlin/anaconda3</span><br><span class="line">installing: python-3.7.3-h0371630_0 ...</span><br><span class="line">Python 3.7.3</span><br><span class="line">...</span><br><span class="line">installing: scikit-image-0.14.2-py37he6710b0_0 ...</span><br><span class="line">installing: scikit-learn-0.20.3-py37hd81dba3_0 ...</span><br><span class="line">installing: astropy-3.1.2-py37h7b6447c_0 ...</span><br><span class="line">installing: statsmodels-0.9.0-py37h035aef0_0 ...</span><br><span class="line">installing: seaborn-0.9.0-py37_0 ...</span><br><span class="line">installing: anaconda-2019.03-py37_0 ...</span><br><span class="line">installation finished.</span><br><span class="line">Do you wish the installer to initialize Anaconda3</span><br><span class="line">by running conda init? [<span class="built_in">yes</span>|no]</span><br><span class="line"></span><br><span class="line">If you<span class="string">&#x27;d prefer that conda&#x27;</span>s base environment not be activated on startup, </span><br><span class="line">    <span class="built_in">set</span> the auto_activate_base parameter to <span class="literal">false</span>: </span><br><span class="line"></span><br><span class="line">conda config --<span class="built_in">set</span> auto_activate_base <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">Thank you <span class="keyword">for</span> installing Anaconda3!</span><br></pre></td></tr></table></figure>

<blockquote>
<p>conda config –set auto_activate_base false</p>
</blockquote>
<p>check version</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">conda --version</span><br><span class="line">conda 4.6.11</span><br><span class="line"></span><br><span class="line">conda update conda</span><br><span class="line"></span><br><span class="line">conda --version</span><br><span class="line">conda 4.6.14</span><br></pre></td></tr></table></figure>

<h3 id="Managing-Environments"><a href="#Managing-Environments" class="headerlink" title="Managing Environments"></a>Managing Environments</h3><h4 id="create-new-env"><a href="#create-new-env" class="headerlink" title="create new env"></a>create new env</h4><p>When you begin using conda, you already have a default environment named <code>base</code>. You don’t want to put programs into your base environment, though. Create separate environments to keep your programs isolated from each other.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(base) kezunlin@ke:~$ conda --version</span><br><span class="line">conda 4.6.14</span><br><span class="line"></span><br><span class="line">(base) kezunlin@ke:~$ conda create --name snowflakes biopython</span><br><span class="line">(base) kezunlin@ke:~$ conda activate snowflakes</span><br><span class="line">(snowflakes) kezunlin@ke:~$ </span><br><span class="line">(snowflakes) kezunlin@ke:~$ conda deactivate</span><br><span class="line">(base) kezunlin@ke:~$ </span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>conda activate</code> only works on conda 4.6 and later versions.</p>
</blockquote>
<h4 id="list-envs"><a href="#list-envs" class="headerlink" title="list envs"></a>list envs</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">conda info --envs</span><br><span class="line"><span class="comment"># conda environments:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">base                  *  /home/kezunlin/anaconda3</span><br><span class="line">snowflakes               /home/kezunlin/anaconda3/envs/snowflakes</span><br></pre></td></tr></table></figure>

<p><code>～/.conda/environments.txt</code></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/home/kezunlin/anaconda3</span><br><span class="line">/home/kezunlin/anaconda3/envs/snowflakes</span><br><span class="line">/home/kezunlin/anaconda3/envs/py35</span><br></pre></td></tr></table></figure>

<h3 id="Managing-Python"><a href="#Managing-Python" class="headerlink" title="Managing Python"></a>Managing Python</h3><p>When you create a new environment, conda installs the same Python version you used when you downloaded and installed Anaconda. If you want to use a different version of Python, for example <code>Python 3.5</code>, simply create a new environment and specify the version of Python that you want.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">conda create --name snakes python=3.5</span><br><span class="line">conda activate py35</span><br><span class="line"></span><br><span class="line">conda info --envs</span><br><span class="line"><span class="comment"># conda environments:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">base                     /home/kezunlin/anaconda3</span><br><span class="line">py35                  *  /home/kezunlin/anaconda3/envs/py35</span><br><span class="line">snowflakes               /home/kezunlin/anaconda3/envs/snowflakes</span><br><span class="line"></span><br><span class="line">(base) kezunlin@ke:~$ python --version</span><br><span class="line">Python 3.7.3</span><br><span class="line">(base) kezunlin@ke:~$ conda activate py35</span><br><span class="line">(py35) kezunlin@ke:~$ python --version</span><br><span class="line">Python 3.5.6 :: Anaconda, Inc.</span><br></pre></td></tr></table></figure>

<h3 id="Managing-packages"><a href="#Managing-packages" class="headerlink" title="Managing packages"></a>Managing packages</h3><h4 id="list-packages"><a href="#list-packages" class="headerlink" title="list packages"></a>list packages</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(base) kezunlin@ke:~$ conda activate py35</span><br><span class="line">(py35) kezunlin@ke:~$ </span><br><span class="line">(py35) kezunlin@ke:~$ conda list</span><br><span class="line"><span class="comment"># packages in environment at /home/kezunlin/anaconda3/envs/py35:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Name                    Version                   Build  Channel</span></span><br><span class="line">ca-certificates           2019.1.23                     0  </span><br><span class="line">certifi                   2018.8.24                py35_1  </span><br><span class="line">libedit                   3.1.20181209         hc058e9b_0  </span><br></pre></td></tr></table></figure>

<h4 id="search"><a href="#search" class="headerlink" title="search"></a>search</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">conda search beautifulsoup4</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">beautifulsoup4                 4.6.3          py27_0  pkgs/main           </span><br><span class="line">beautifulsoup4                 4.6.3          py35_0  pkgs/main           </span><br><span class="line">beautifulsoup4                 4.6.3          py36_0  pkgs/main           </span><br><span class="line">beautifulsoup4                 4.6.3          py37_0  pkgs/main           </span><br><span class="line">beautifulsoup4                 4.7.1          py27_1  pkgs/main           </span><br><span class="line">beautifulsoup4                 4.7.1          py36_1  pkgs/main           </span><br><span class="line">beautifulsoup4                 4.7.1          py37_1  pkgs/main      </span><br></pre></td></tr></table></figure>

<h4 id="install"><a href="#install" class="headerlink" title="install"></a>install</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install beautifulsoup4</span><br></pre></td></tr></table></figure>

<h3 id="conda-config"><a href="#conda-config" class="headerlink" title="conda config"></a>conda config</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda config --<span class="built_in">set</span> show_channel_urls <span class="built_in">yes</span></span><br><span class="line">conda config --show</span><br></pre></td></tr></table></figure>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>



<h2 id="Tools"><a href="#Tools" class="headerlink" title="Tools"></a>Tools</h2><h3 id="Jupyter-notebook"><a href="#Jupyter-notebook" class="headerlink" title="Jupyter notebook"></a>Jupyter notebook</h3><h4 id="install-jupyter"><a href="#install-jupyter" class="headerlink" title="install jupyter"></a>install jupyter</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda create -n py35 python=3.5</span><br><span class="line">conda activate py35</span><br><span class="line">conda install jupyter</span><br></pre></td></tr></table></figure>

<h4 id="install-kernel"><a href="#install-kernel" class="headerlink" title="install kernel"></a>install kernel</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -m ipykernel install --user --name=py35</span><br><span class="line">Installed kernelspec py35 <span class="keyword">in</span> /home/kezunlin/.local/share/jupyter/kernels/py35</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>jupyter</code> depends on <code>notebook</code> and <code>ipykernel</code><br>also see <a target="_blank" rel="noopener" href="http://kezunline.me/post/f7eab850/">tensorflow jupyter notebook kenel</a></p>
</blockquote>
<h4 id="run-jupyter"><a href="#run-jupyter" class="headerlink" title="run jupyter"></a>run jupyter</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook</span><br></pre></td></tr></table></figure>

<p>now we can see <code>py35</code> kernel appears.</p>
<p><img src="https://kezunlin.me/images/posts/635233-20190524151917076-1965937414.png" alt="py35 kernel"></p>
<h3 id="tensorflow-gpu-keras"><a href="#tensorflow-gpu-keras" class="headerlink" title="tensorflow-gpu&#x2F;keras"></a>tensorflow-gpu&#x2F;keras</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda activate py35</span><br><span class="line">conda install tensorflow-gpu keras</span><br></pre></td></tr></table></figure>

<p>test </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;import tensorflow as tf</span><br><span class="line">&gt;&gt;&gt;import keras as K</span><br><span class="line">Using TensorFlow backend.</span><br></pre></td></tr></table></figure>

<p>.keras&#x2F;keras.json </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;epsilon&quot;</span><span class="punctuation">:</span> <span class="number">1e-07</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;floatx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;float32&quot;</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;image_data_format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;channels_last&quot;</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;backend&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tensorflow&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="pytorch"><a href="#pytorch" class="headerlink" title="pytorch"></a>pytorch</h3><p>see <a href="https://kezunlin.me/post/54e7a3d8/#more">pytorch tutorial on ubuntu 16.04</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://conda.io/projects/conda/en/latest/user-guide/getting-started.html">getting-started with conda</a></li>
<li><a target="_blank" rel="noopener" href="https://conda.io/projects/conda/en/latest/commands.html">conda command ref</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20190524: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">kezunlin</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">181</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">213</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kezunlin</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
