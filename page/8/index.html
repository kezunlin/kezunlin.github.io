<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"kezunlin.me","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Kezunlin&#39;s Blog">
<meta property="og:url" content="https://kezunlin.me/page/8/index.html">
<meta property="og:site_name" content="Kezunlin&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="kezunlin">
<meta property="article:tag" content="linux, c++, python, AI, LLM">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://kezunlin.me/page/8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Kezunlin's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Kezunlin's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Kezunlin's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Live and Learn</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/zsh-for-linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/zsh-for-linux/" class="post-title-link" itemprop="url">how to install and use zsh command on linux</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-01-09 10:44:00" itemprop="dateCreated datePublished" datetime="2019-01-09T10:44:00+08:00">2019-01-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get -y install zsh</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> /etc/shells</span><br><span class="line"><span class="comment"># /etc/shells: valid login shells</span></span><br><span class="line">/bin/sh</span><br><span class="line">/bin/dash</span><br><span class="line">/bin/bash</span><br><span class="line">/bin/rbash</span><br><span class="line">/usr/bin/tmux</span><br><span class="line">/bin/zsh</span><br><span class="line">/usr/bin/zsh</span><br><span class="line"></span><br><span class="line">chsh -s /usr/bin/zsh</span><br></pre></td></tr></table></figure>

<p>reboot system</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$SHELL</span> </span><br><span class="line">/usr/bin/zsh</span><br></pre></td></tr></table></figure>

<h3 id="install-2-better"><a href="#install-2-better" class="headerlink" title="install 2(better)"></a>install 2(better)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)</span>&quot;</span></span><br><span class="line">```    </span><br><span class="line">    </span><br><span class="line"><span class="comment">### config </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#### themes </span></span><br><span class="line">```bash</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/fcamblor/oh-my-zsh-agnoster-fcamblor.git </span><br><span class="line"><span class="built_in">cd</span> oh-my-zsh-agnoster-fcamblor</span><br><span class="line">./install </span><br></pre></td></tr></table></figure>

<h4 id="zshrc"><a href="#zshrc" class="headerlink" title=".zshrc"></a>.zshrc</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim .zshrc</span><br><span class="line"></span><br><span class="line">ZSH_THEME=<span class="string">&quot;agnoster&quot;</span> <span class="comment"># ys avit agnoster</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>use <code>avit</code>.</p>
</blockquote>
<h4 id="zshrc-vs-bashrc"><a href="#zshrc-vs-bashrc" class="headerlink" title=".zshrc vs .bashrc"></a>.zshrc vs .bashrc</h4><blockquote>
<p>zsh uses env profile <code>~/.zshrc</code>, not <code>~/.bashrc</code>.</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://ohmyz.sh/">omyzsh</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d194d29e488c?open_source=weibo_search">zsh</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20190109: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/use-pcap-on-ubuntu-16-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/use-pcap-on-ubuntu-16-04/" class="post-title-link" itemprop="url">use pcap on ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-29 16:59:00" itemprop="dateCreated datePublished" datetime="2018-12-29T16:59:00+08:00">2018-12-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><ul>
<li>pcap: 1.7.4</li>
</ul>
<h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get -y install libpcap-dev</span><br><span class="line"></span><br><span class="line">locate pcap.so</span><br><span class="line">/usr/lib/x86_64-linux-gnu/libpcap.so</span><br><span class="line">/usr/lib/x86_64-linux-gnu/libpcap.so.0.8</span><br><span class="line">/usr/lib/x86_64-linux-gnu/libpcap.so.1.7.4</span><br><span class="line"></span><br><span class="line">locate pcap.h</span><br><span class="line">/usr/include/pcap.h</span><br><span class="line">/usr/include/pcap/pcap.h</span><br></pre></td></tr></table></figure>

<h3 id="pcap-config-cmake"><a href="#pcap-config-cmake" class="headerlink" title="pcap-config.cmake"></a>pcap-config.cmake</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - Try to find libpcap include dirs and libraries</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Usage of this module as follows:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     find_package(PCAP)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Variables used by this module, they can change the default behaviour and need</span></span><br><span class="line"><span class="comment"># to be set before calling find_package:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  PCAP_ROOT_DIR             Set this variable to the root installation of</span></span><br><span class="line"><span class="comment">#                            libpcap if the module has problems finding the</span></span><br><span class="line"><span class="comment">#                            proper installation path.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Variables defined by this module:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  PCAP_FOUND                System has libpcap, include and library dirs found</span></span><br><span class="line"><span class="comment">#  PCAP_INCLUDE_DIR          The libpcap include directories.</span></span><br><span class="line"><span class="comment">#  PCAP_LIBRARY              The libpcap library (possibly includes a thread</span></span><br><span class="line"><span class="comment">#                            library e.g. required by pf_ring&#x27;s libpcap)</span></span><br><span class="line"><span class="comment">#  HAVE_PF_RING              If a found version of libpcap supports PF_RING</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">find_path</span>(PCAP_ROOT_DIR</span><br><span class="line">    NAMES <span class="keyword">include</span>/pcap.h</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_path</span>(PCAP_INCLUDE_DIR</span><br><span class="line">    NAMES pcap.h</span><br><span class="line">    HINTS <span class="variable">$&#123;PCAP_ROOT_DIR&#125;</span>/<span class="keyword">include</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_library</span>(PCAP_LIBRARY</span><br><span class="line">    NAMES pcap</span><br><span class="line">    HINTS <span class="variable">$&#123;PCAP_ROOT_DIR&#125;</span>/lib</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span>(FindPackageHandleStandardArgs)</span><br><span class="line">find_package_handle_standard_args(PCAP DEFAULT_MSG</span><br><span class="line">    PCAP_LIBRARY</span><br><span class="line">    PCAP_INCLUDE_DIR</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span>(CheckCSourceCompiles)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_REQUIRED_LIBRARIES <span class="variable">$&#123;PCAP_LIBRARY&#125;</span>)</span><br><span class="line">check_c_source_compiles(<span class="string">&quot;int main() &#123; return 0; &#125;&quot;</span> PCAP_LINKS_SOLO)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_REQUIRED_LIBRARIES)</span><br><span class="line"></span><br><span class="line"><span class="comment"># check if linking against libpcap also needs to link against a thread library</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">NOT</span> PCAP_LINKS_SOLO)</span><br><span class="line">    <span class="keyword">find_package</span>(Threads)</span><br><span class="line">    <span class="keyword">if</span> (THREADS_FOUND)</span><br><span class="line">        <span class="keyword">set</span>(CMAKE_REQUIRED_LIBRARIES <span class="variable">$&#123;PCAP_LIBRARY&#125;</span> <span class="variable">$&#123;CMAKE_THREAD_LIBS_INIT&#125;</span>)</span><br><span class="line">        check_c_source_compiles(<span class="string">&quot;int main() &#123; return 0; &#125;&quot;</span> PCAP_NEEDS_THREADS)</span><br><span class="line">        <span class="keyword">set</span>(CMAKE_REQUIRED_LIBRARIES)</span><br><span class="line">    <span class="keyword">endif</span> ()</span><br><span class="line">    <span class="keyword">if</span> (THREADS_FOUND <span class="keyword">AND</span> PCAP_NEEDS_THREADS)</span><br><span class="line">        <span class="keyword">set</span>(_tmp <span class="variable">$&#123;PCAP_LIBRARY&#125;</span> <span class="variable">$&#123;CMAKE_THREAD_LIBS_INIT&#125;</span>)</span><br><span class="line">        <span class="keyword">list</span>(REMOVE_DUPLICATES _tmp)</span><br><span class="line">        <span class="keyword">set</span>(PCAP_LIBRARY <span class="variable">$&#123;_tmp&#125;</span></span><br><span class="line">            CACHE <span class="keyword">STRING</span> <span class="string">&quot;Libraries needed to link against libpcap&quot;</span> FORCE)</span><br><span class="line">    <span class="keyword">else</span> ()</span><br><span class="line">        <span class="keyword">message</span>(FATAL_ERROR <span class="string">&quot;Couldn&#x27;t determine how to link against libpcap&quot;</span>)</span><br><span class="line">    <span class="keyword">endif</span> ()</span><br><span class="line"><span class="keyword">endif</span> ()</span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span>(CheckFunctionExists)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_REQUIRED_LIBRARIES <span class="variable">$&#123;PCAP_LIBRARY&#125;</span>)</span><br><span class="line">check_function_exists(pcap_get_pfring_id HAVE_PF_RING)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_REQUIRED_LIBRARIES)</span><br><span class="line"></span><br><span class="line"><span class="keyword">mark_as_advanced</span>(</span><br><span class="line">    PCAP_ROOT_DIR</span><br><span class="line">    PCAP_INCLUDE_DIR</span><br><span class="line">    PCAP_LIBRARY</span><br><span class="line">)</span><br></pre></td></tr></table></figure>


<h3 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(PCAP REQUIRED) </span><br><span class="line"><span class="keyword">MESSAGE</span>( [Main] <span class="string">&quot; PCAP_INCLUDE_DIR = $&#123;PCAP_INCLUDE_DIR&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">MESSAGE</span>( [Main] <span class="string">&quot; PCAP_LIBRARY = $&#123;PCAP_LIBRARY&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#[Main] PCAP_INCLUDE_DIR = /usr/include</span></span><br><span class="line"><span class="comment">#[Main] PCAP_LIBRARY = /usr/lib/x86_64-linux-gnu/libpcap.so</span></span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/bro/cmake/blob/master/FindPCAP.cmake">FindPCAP.cmake</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20181229: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/extern-c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/extern-c/" class="post-title-link" itemprop="url">extern c </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-26 09:08:00" itemprop="dateCreated datePublished" datetime="2018-12-26T09:08:00+08:00">2018-12-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="extern-c"><a href="#extern-c" class="headerlink" title="extern c"></a>extern c</h3><p>相比C语言，C++支持函数重载、类、模版等各种特性，如果C++的符号修饰仍按照C那样直接使用对应名称，虽然可读性很好，却不可避免的会出现各种错乱，于是C++符号修饰别名(mangled name)被设计出来， 用来解决上述问题，然而修饰规则取决于编译器实现，没有统一标准，比如gcc、msvc就各有一套，但好在都提供了相应接口进行解析(demangle)，这里有个网站<a target="_blank" rel="noopener" href="http://demangler.com/">demangler</a>可以在线解析</p>
<blockquote>
<p>c++ function: managled names<br>c function: unmangled names<br><code>extern c</code>告诉c++编译器将<code>f_int,f_float</code>视为c函数，使用 unmangled names(修饰名称)</p>
</blockquote>
<h3 id="managled-unmangled-names"><a href="#managled-unmangled-names" class="headerlink" title="managled&#x2F;unmangled names"></a>managled&#x2F;unmangled names</h3><p>a.cpp</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">g</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">ef</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">eg</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Prevent g and eg from being optimized away. */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">h</span><span class="params">()</span> </span>&#123; <span class="built_in">g</span>(); <span class="built_in">eg</span>(); &#125;</span><br></pre></td></tr></table></figure>

<p>Compile with GCC 4.8 Linux ELF output:</p>
<pre><code>g++ -c a.cpp
</code></pre>
<p>Decompile the symbol table:</p>
<pre><code>readelf -s a.o
</code></pre>
<p>output </p>
<pre><code>Num:    Value          Size Type    Bind   Vis      Ndx Name
  8: 0000000000000000     6 FUNC    GLOBAL DEFAULT    1 _Z1fv
  9: 0000000000000006     6 FUNC    GLOBAL DEFAULT    1 ef
 10: 000000000000000c    16 FUNC    GLOBAL DEFAULT    1 _Z1hv
 11: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND _Z1gv
 12: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND eg
</code></pre>
<blockquote>
<p>managled names: <code>_Z1fv,_Z1hv,_Z1gv</code> for <code>f,g,h</code><br>unmangled names: <code>ef,eg</code></p>
</blockquote>
<p>unmanagle them </p>
<pre><code>c++filt _Z1fv
f()

c++filt _Z1hv
h()

c++filt _Z1gv
g()
</code></pre>
<h3 id="extern-C中错误用法"><a href="#extern-C中错误用法" class="headerlink" title="extern C中错误用法"></a>extern C中错误用法</h3><p>It becomes obvious that any C++ feature that requires name mangling will not work inside extern C:</p>
<p>error.cpp</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> &#123;</span><br><span class="line">    <span class="comment">// Overloading.</span></span><br><span class="line">    <span class="comment">// error: declaration of C function ‘void f(int)’ conflicts with</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">int</span> i)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Templates.</span></span><br><span class="line">    <span class="comment">// error: template with C linkage</span></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">C</span>&gt; <span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(C i)</span> </span>&#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>compile and generate errors</p>
<pre><code>g++ -c error.cpp 
error.cpp:5:17: error: conflicting declaration of C function ‘void f(int)’
     void f(int i);
                 ^
error.cpp:4:10: note: previous declaration ‘void f()’
     void f();
          ^
error.cpp:9:5: error: template with C linkage
     template &lt;class C&gt; void f(C i) &#123; &#125;
     ^
</code></pre>
<p>So you will need <code>extern &quot;C&quot;</code> both when calling:</p>
<ul>
<li>C from C++: tell <code>g++</code> to expect unmangled symbols produced by <code>gcc</code></li>
<li>C++ from C: tell <code>gcc</code> to use unmangled symbols produced by <code>g++</code></li>
</ul>
<h3 id="cpp中使用c方法"><a href="#cpp中使用c方法" class="headerlink" title="cpp中使用c方法"></a>cpp中使用c方法</h3><h4 id="code"><a href="#code" class="headerlink" title="code"></a>code</h4><p>main.cpp</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;c.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">assert</span>(<span class="built_in">f</span>() == <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>c.h</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> C_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> C_H</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* This ifdef allows the header to be used from both C and C++. */</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> &#123;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">f</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<p>c.c</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;c.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">void</span>)</span> &#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="OK"><a href="#OK" class="headerlink" title="OK"></a>OK</h4><p>compile main.cpp</p>
<pre><code>g++ -c -o main.o -std=c++98 main.cpp

readelf -s main.o
10: 0000000000000000    46 FUNC    GLOBAL DEFAULT    1 main
11: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND f
12: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND __assert_fail
</code></pre>
<blockquote>
<p>使用c++编译器，extern c告诉c++编译器<code>f</code>是一个c函数，使用unmanagled name <code>f</code></p>
</blockquote>
<p>compile c.c</p>
<pre><code>gcc -c -o c.o -std=c89 c.c

readelf -s c.o 
8: 0000000000000000    11 FUNC    GLOBAL DEFAULT    1 f
</code></pre>
<blockquote>
<p>使用c编译器，对于c函数生成unmanagled name <code>f</code></p>
</blockquote>
<p>link main.o and c.o</p>
<pre><code>g++ -o main.out main.o c.o
./main.out
</code></pre>
<blockquote>
<p>OK.</p>
</blockquote>
<h4 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h4><p>Without <code>extern &quot;C&quot;</code> the link fails with:</p>
<pre><code>main.cpp:6: undefined reference to `f()&#39;
</code></pre>
<p>compile main.cpp</p>
<pre><code>g++ -c -o main.o -std=c++98 main.cpp

readelf -s main.o
10: 0000000000000000    46 FUNC    GLOBAL DEFAULT    1 main
11: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND _Z1fv
12: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND __assert_fail
</code></pre>
<blockquote>
<p>因为没有extern c，所以g++编译器将f看做是c++函数，使用managled name <code>_Z1fv</code></p>
</blockquote>
<p>compile c.c</p>
<pre><code>gcc -c -o c.o -std=c89 c.c

readelf -s c.o 
8: 0000000000000000    11 FUNC    GLOBAL DEFAULT    1 f
</code></pre>
<blockquote>
<p>使用c编译器，对于c函数生成unmanagled name <code>f</code></p>
</blockquote>
<p>link main.o and c.o</p>
<pre><code>g++ -o main.out main.o c.o

main.o: In function `main&#39;:
main.cpp:(.text+0x5): undefined reference to `f()&#39;
collect2: error: ld returned 1 exit status
</code></pre>
<blockquote>
<p>link失败，因为c++编译器需要managled name <code>_Z1fv</code>，然而c编译器生成了unmanagled name <code>f</code></p>
</blockquote>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>




<h3 id="c中使用cpp方法"><a href="#c中使用cpp方法" class="headerlink" title="c中使用cpp方法"></a>c中使用cpp方法</h3><h4 id="code-1"><a href="#code-1" class="headerlink" title="code"></a>code</h4><p>main.c </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;assert.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cpp.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    assert(f_int(<span class="number">1</span>) == <span class="number">2</span>);</span><br><span class="line">    assert(f_float(<span class="number">1.0</span>) == <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>cpp.h</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CPP_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CPP_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="comment">// C cannot see these overloaded prototypes, or else it would get confused.</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">int</span> i)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">float</span> i)</span></span>;</span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> &#123;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f_int</span><span class="params">(<span class="type">int</span> i)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f_float</span><span class="params">(<span class="type">float</span> i)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>cpp.cpp</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cpp.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">float</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i + <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f_int</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">f</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f_float</span><span class="params">(<span class="type">float</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">f</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="OK-1"><a href="#OK-1" class="headerlink" title="OK"></a>OK</h4><p>compile main.c</p>
<pre><code>gcc -c -o main.o -std=c89 -Wextra main.c

readelf -s main.o
10: 0000000000000000    94 FUNC    GLOBAL DEFAULT    1 main
11: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND f_int
12: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND __assert_fail
13: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND f_float
</code></pre>
<blockquote>
<p>使用c编译器，将<code>f_int,f_float</code>视作c函数，使用unmanagled name <code>f_int,f_float</code></p>
</blockquote>
<p>compile cpp.cpp</p>
<pre><code>g++ -c -o cpp.o -std=c++98 cpp.cpp

readelf -s cpp.o
 9: 0000000000000000    15 FUNC    GLOBAL DEFAULT    1 _Z1fi
10: 000000000000000f    32 FUNC    GLOBAL DEFAULT    1 _Z1ff
11: 000000000000002f    23 FUNC    GLOBAL DEFAULT    1 f_int
12: 0000000000000046    31 FUNC    GLOBAL DEFAULT    1 f_float
</code></pre>
<blockquote>
<p>使用c++编译器，<code>extern c</code>告诉c++编译器将<code>f_int,f_float</code>视作c函数，使用unmanagled name <code>f_int,f_float</code></p>
</blockquote>
<p>link main.o and cpp.o</p>
<pre><code>g++ -o main.out main.o cpp.o
./main.out
</code></pre>
<blockquote>
<p>OK.</p>
</blockquote>
<h4 id="Error-1"><a href="#Error-1" class="headerlink" title="Error"></a>Error</h4><p>Without extern “C” it fails with:</p>
<pre><code>main.c:6: undefined reference to `f_int&#39;
main.c:7: undefined reference to `f_float&#39;
</code></pre>
<p>compile main.c</p>
<pre><code>gcc -c -o main.o -std=c89 -Wextra main.c

readelf -s main.o
10: 0000000000000000    94 FUNC    GLOBAL DEFAULT    1 main
11: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND f_int
12: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND __assert_fail
13: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT  UND f_float
</code></pre>
<blockquote>
<p>使用c编译器，将<code>f_int,f_float</code>视作c函数，使用unmanagled name <code>f_int,f_float</code></p>
</blockquote>
<p>compile cpp.cpp</p>
<pre><code>g++ -c -o cpp.o -std=c++98 cpp.cpp

readelf -s cpp.o
 9: 0000000000000000    15 FUNC    GLOBAL DEFAULT    1 _Z1fi
10: 000000000000000f    32 FUNC    GLOBAL DEFAULT    1 _Z1ff
11: 000000000000002f    23 FUNC    GLOBAL DEFAULT    1 _Z5f_inti
12: 0000000000000046    31 FUNC    GLOBAL DEFAULT    1 _Z5f_floatf
</code></pre>
<blockquote>
<p>使用c++编译器，因为没有<code>extern c</code>，c++编译器将<code>f_int,f_float</code>视作c++函数，使用managled name <code>_Z5f_inti,_Z5f_floatf</code></p>
</blockquote>
<p>link main.o and cpp.o</p>
<pre><code>g++ -o main.out main.o cpp.o
</code></pre>
<blockquote>
<p>link失败，因为c编译器需要unmanagled name <code>f_int,f_float</code>，然而c++编译器生成了managled name <code>_Z5f_inti,_Z5f_floatf</code></p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1041866/what-is-the-effect-of-extern-c-in-c">extern c</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/cirosantilli/cpp-cheat/tree/bf5f48628d0b01ba6a3fcea6f1162b28539654c9/cpp-from-c">cpp-from-c</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/cirosantilli/cpp-cheat/tree/bf5f48628d0b01ba6a3fcea6f1162b28539654c9/c-from-cpp">c-from-cpp</a></li>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/HappyXie/archive/2011/01/07/1929369.html">#ifdef cplusplus extern C { #endif的定义</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/nx520zj/p/5920782.html">extern “C”</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/rrrfff/article/details/7228704">managled name</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20181226: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/compile-protobuf-cpp-on-ubuntu-16-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/compile-protobuf-cpp-on-ubuntu-16-04/" class="post-title-link" itemprop="url">compile protobuf-cpp on ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-19 09:05:00" itemprop="dateCreated datePublished" datetime="2018-12-19T09:05:00+08:00">2018-12-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h2><ul>
<li><strong><a href="https://kezunlin.me/post/d60ff6fe/">Part 1: compile protobuf-cpp on ubuntu 16.04</a></strong></li>
<li><a href="https://kezunlin.me/post/876d75f2/">Part 2: compile protobuf-cpp on windows 10</a></li>
<li><a href="https://kezunlin.me/post/ba8b6dea/">Part 3: protobuf usage</a></li>
</ul>
<h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><ul>
<li>protobuf 2.6.1</li>
<li>protobuf 3.6.1 latest</li>
</ul>
<h3 id="old-version"><a href="#old-version" class="headerlink" title="old version"></a>old version</h3><h4 id="install"><a href="#install" class="headerlink" title="install"></a>install</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libprotobuf-dev</span><br><span class="line"></span><br><span class="line"><span class="built_in">which</span> protoc</span><br><span class="line">/usr/bin/protoc </span><br><span class="line"></span><br><span class="line">protoc --version</span><br><span class="line">2.6.1</span><br></pre></td></tr></table></figure>

<h4 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#remove exist `protobuf 2.6.1`</span></span><br><span class="line">	</span><br><span class="line"><span class="built_in">sudo</span> apt-get remove libprotobuf-dev</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line"><span class="comment">### compile</span></span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">wget https://github.com/protocolbuffers/protobuf/releases/download/v3.6.1/protobuf-cpp-3.6.1.tar.gz</span><br><span class="line"></span><br><span class="line">tar -xvf protobuf-cpp-3.6.1.tar.gz</span><br><span class="line"><span class="built_in">cd</span> protobuf-3.6.1 </span><br><span class="line">./configure --disable-shared CXXFLAGS=<span class="string">&quot;-fPIC&quot;</span></span><br><span class="line">make -j8 </span><br></pre></td></tr></table></figure>

<blockquote>
<p>tips: we compile static library with <code>--disable-shared CXXFLAGS=&quot;-fPIC&quot;</code>. 编译动态库dll&#x2F;so的时候，如果依赖static library(比如profobuf)，那么static library编译的时候需要加上<code>-fPIC</code>,否则动态库编译出错。<br>对于CMake,使用<code>cmake CMAKE_CXX_FLGAS=&quot;-fPIC&quot; ..</code></p>
</blockquote>
<p>otherwise, error occurs </p>
<pre><code>Linking CXX shared library ../../../../bin/libcommon.so
/usr/bin/ld: /usr/local/lib/libprotobuf.a(common.o): relocation R_X86_64_32S against `.rodata&#39; can not be used when makinga shared object; recompile with -fPIC
/usr/local/lib/libprotobuf.a: error adding symbols: Bad value
</code></pre>
<h3 id="install-1"><a href="#install-1" class="headerlink" title="install"></a>install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> make install</span><br><span class="line"><span class="built_in">sudo</span> ldconfig</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> make uninstall</span><br></pre></td></tr></table></figure>

<p>install path:</p>
<ul>
<li>header: <code>/usr/local/include/google/protobuf</code></li>
<li>lib: <code>/usr/local/lib</code></li>
<li>executable: <code>/usr/local/bin</code></li>
</ul>
<p>static libs</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ll /usr/local/lib/libproto</span><br><span class="line">libprotobuf.a        libprotobuf-lite.a   libprotoc.a          </span><br><span class="line">libprotobuf.la       libprotobuf-lite.la  libprotoc.la  </span><br></pre></td></tr></table></figure>

<blockquote>
<p>By default, <code>make install&#39; will install all the files in </code>&#x2F;usr&#x2F;local&#x2F;bin’, <code>/usr/local/lib&#39; etc.  You can specify an installation prefix other than </code>&#x2F;usr&#x2F;local’ using <code>--prefix&#39;, for instance </code>–prefix&#x3D;$HOME’.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./configure -h</span><br><span class="line"></span><br><span class="line">--enable-shared[=PKGS]  build shared libraries [default=<span class="built_in">yes</span>]</span><br><span class="line">--enable-static[=PKGS]  build static libraries [default=<span class="built_in">yes</span>]</span><br></pre></td></tr></table></figure>

<h3 id="Static-Linking-vs-DLL"><a href="#Static-Linking-vs-DLL" class="headerlink" title="Static Linking vs DLL"></a>Static Linking vs DLL</h3><blockquote>
<p><code>Static linking</code> is now the default for the Protocol Buffer libraries. Due to issues with Win32’s use of a separate heap for each DLL, as well as binary compatibility issues between different versions of MSVC’s STL library, it is recommended that you use static linkage only.<br>However, it is possible to build libprotobuf and libprotoc as DLLs if you really want. To do this, do the following:</p>
</blockquote>
<ul>
<li>Add an additional flag <code>-Dprotobuf_BUILD_SHARED_LIBS=ON</code> when invoking cmake</li>
<li>Follow the same steps as described in the above section.</li>
<li>When compiling your project, make sure to <code>#define PROTOBUF_USE_DLLS</code>.</li>
</ul>
<h3 id="test"><a href="#test" class="headerlink" title="test"></a>test</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> protoc</span><br><span class="line">/usr/local/bin/protoc</span><br><span class="line"></span><br><span class="line">protoc --version</span><br><span class="line">libprotoc 3.6.1</span><br></pre></td></tr></table></figure>

<blockquote>
<p>tips install openmpi</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install -y  libiomp-dev libopenmpi-dev </span><br></pre></td></tr></table></figure>

<h3 id="multiple-protoc"><a href="#multiple-protoc" class="headerlink" title="multiple protoc"></a>multiple protoc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">whereis protoc </span><br><span class="line">protoc: /usr/bin/protoc  <span class="comment"># 2.6.0</span></span><br><span class="line">/usr/local/bin/protoc    <span class="comment"># 3.6.1</span></span><br><span class="line">/usr/share/man/man1/protoc.1.gz</span><br></pre></td></tr></table></figure>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>




<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><h3 id="usage"><a href="#usage" class="headerlink" title="usage"></a>usage</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">protoc --cpp_out=. ./point_cloud.proto </span><br><span class="line">protoc --java_out=./java/ ./proto/helloworld.proto</span><br><span class="line">protoc --go_out=./go/ ./proto/helloworld.proto</span><br></pre></td></tr></table></figure>

<h3 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(Protobuf REQUIRED)</span><br><span class="line"><span class="comment">#add_definitions( -DPROTOBUF_USE_DLLS )  # KEY STEPS</span></span><br><span class="line"><span class="keyword">MESSAGE</span>( [Main] <span class="string">&quot; PROTOBUF_INCLUDE_DIRS = $&#123;PROTOBUF_INCLUDE_DIRS&#125;&quot;</span>)   </span><br><span class="line"><span class="keyword">MESSAGE</span>( [Main] <span class="string">&quot; PROTOBUF_LIBRARIES = $&#123;PROTOBUF_LIBRARIES&#125;&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="error"><a href="#error" class="headerlink" title="error"></a>error</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./node_perception </span><br><span class="line"></span><br><span class="line">[libprotobuf ERROR google/protobuf/descriptor_database.cc:58] File already exists <span class="keyword">in</span> database: adapter_config.proto</span><br><span class="line">[libprotobuf FATAL google/protobuf/descriptor.cc:1315] CHECK failed: generated_database_-&gt;Add(encoded_file_descriptor, size): </span><br><span class="line">terminate called after throwing an instance of <span class="string">&#x27;google::protobuf::FatalException&#x27;</span></span><br><span class="line">    what():  CHECK failed: generated_database_-&gt;Add(encoded_file_descriptor, size): </span><br><span class="line">Aborted (core dumped)</span><br></pre></td></tr></table></figure>

<p>reasons</p>
<pre><code>The problem happens when you have multiple compiled copies of the same .pb.cc file sharing a single copy of libprotobuf.so. 

`common`模块编译了`adapter_config.pb.cc`,`node_perception`依赖于`common`，同时也要编译`adapter_config.pb.cc`。运行`node_perception`就会报错。
</code></pre>
<p>solutions</p>
<pre><code>同一份`adapter_config.pb.cc`只编译到`node_perception`等executable,不要编译到所依赖的`common`模块。
</code></pre>
<blockquote>
<p>common和node_perception使用static或者dynamic的protobuf，都会遇到同样的问题。</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/protocolbuffers/protobuf/blob/master/cmake/README.md">protobuf on windows</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/37051635/several-shared-object-using-same-proto-leading-the-the-error-file-already-exist">several-shared-object-using-same-proto</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20181219: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/ros-publisher-and-subscriber-tutorial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/ros-publisher-and-subscriber-tutorial/" class="post-title-link" itemprop="url">ros publisher and subscriber tutorial</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-14 15:35:00" itemprop="dateCreated datePublished" datetime="2018-12-14T15:35:00+08:00">2018-12-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="create-workspace"><a href="#create-workspace" class="headerlink" title="create workspace"></a>create workspace</h3><p>Let’s create and build a catkin workspace:</p>
<pre><code>mkdir -p ~/catkin_ws/src
cd ~/catkin_ws/
catkin_make
source devel/setup.bash 
env | grep ROS
</code></pre>
<h3 id="create-package"><a href="#create-package" class="headerlink" title="create package"></a>create package</h3><pre><code>cd ~/catkin_ws/src
catkin_create_pkg beginner_tutorials roscpp rospy std_msgs

tree .
.
├── beginner_tutorials
│   ├── CMakeLists.txt
│   ├── include
│   │   └── beginner_tutorials
│   ├── package.xml
│   └── src
└── CMakeLists.txt -&gt; /opt/ros/kinetic/share/catkin/cmake/toplevel.cmake

4 directories, 3 files
</code></pre>
<h3 id="create-msg"><a href="#create-msg" class="headerlink" title="create msg"></a>create msg</h3><pre><code>roscd beginner_tutorials
mkdir msg
echo &quot;int64 num&quot; &gt; msg/Num.msg
</code></pre>
<p>vim package.xml</p>
<pre><code>&lt;build_depend&gt;message_generation&lt;/build_depend&gt;
&lt;exec_depend&gt;message_runtime&lt;/exec_depend&gt;
</code></pre>
<p>vim CMakeLists.txt</p>
<pre><code>find_package(catkin REQUIRED COMPONENTS
   roscpp
   rospy
   std_msgs
   message_generation
)

catkin_package(
  ...
  CATKIN_DEPENDS message_runtime ...
  ...)


add_message_files(
  FILES
  Num.msg
)
</code></pre>
<h3 id="create-srv"><a href="#create-srv" class="headerlink" title="create srv"></a>create srv</h3><pre><code>roscd beginner_tutorials
mkdir srv
roscp rospy_tutorials AddTwoInts.srv srv/AddTwoInts.srv
</code></pre>
<blockquote>
<p>roscp [package_name] [file_to_copy_path] [copy_path]<br>roscp rospy_tutorials AddTwoInts.srv srv&#x2F;AddTwoInts.srv</p>
</blockquote>
<p>vim CMakeLists.txt</p>
<pre><code>add_service_files(
  FILES
  AddTwoInts.srv
)
</code></pre>
<h3 id="show-msg"><a href="#show-msg" class="headerlink" title="show msg"></a>show msg</h3><pre><code>rosmsg show beginner_tutorials/Num
int64 num

rosmsg show Num
[beginner_tutorials/Num]:
int64 num
</code></pre>
<h3 id="show-srv"><a href="#show-srv" class="headerlink" title="show srv"></a>show srv</h3><blockquote>
<p>rossrv show <service type></p>
</blockquote>
<pre><code>rossrv show beginner_tutorials/AddTwoInts 

int64 a
int64 b
---
int64 sum


rossrv show AddTwoInts

[beginner_tutorials/AddTwoInts]:
int64 a
int64 b
---
int64 sum

[rospy_tutorials/AddTwoInts]:
int64 a
int64 b
---
int64 sum
</code></pre>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>




<h2 id="Code-Example"><a href="#Code-Example" class="headerlink" title="Code Example"></a>Code Example</h2><h3 id="talker-cpp"><a href="#talker-cpp" class="headerlink" title="talker.cpp"></a>talker.cpp</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/String.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * This tutorial demonstrates simple sending of messages over the ROS system.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The ros::init() function needs to see argc and argv so that it can perform</span></span><br><span class="line"><span class="comment">   * any ROS arguments and name remapping that were provided at the command line.</span></span><br><span class="line"><span class="comment">   * For programmatic remappings you can use a different version of init() which takes</span></span><br><span class="line"><span class="comment">   * remappings directly, but for most command-line programs, passing argc and argv is</span></span><br><span class="line"><span class="comment">   * the easiest way to do it.  The third argument to init() is the name of the node.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * You must call one of the versions of ros::init() before using any other</span></span><br><span class="line"><span class="comment">   * part of the ROS system.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;talker&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NodeHandle is the main access point to communications with the ROS system.</span></span><br><span class="line"><span class="comment">   * The first NodeHandle constructed will fully initialize this node, and the last</span></span><br><span class="line"><span class="comment">   * NodeHandle destructed will close down the node.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The advertise() function is how you tell ROS that you want to</span></span><br><span class="line"><span class="comment">   * publish on a given topic name. This invokes a call to the ROS</span></span><br><span class="line"><span class="comment">   * master node, which keeps a registry of who is publishing and who</span></span><br><span class="line"><span class="comment">   * is subscribing. After this advertise() call is made, the master</span></span><br><span class="line"><span class="comment">   * node will notify anyone who is trying to subscribe to this topic name,</span></span><br><span class="line"><span class="comment">   * and they will in turn negotiate a peer-to-peer connection with this</span></span><br><span class="line"><span class="comment">   * node.  advertise() returns a Publisher object which allows you to</span></span><br><span class="line"><span class="comment">   * publish messages on that topic through a call to publish().  Once</span></span><br><span class="line"><span class="comment">   * all copies of the returned Publisher object are destroyed, the topic</span></span><br><span class="line"><span class="comment">   * will be automatically unadvertised.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * The second parameter to advertise() is the size of the message queue</span></span><br><span class="line"><span class="comment">   * used for publishing messages.  If messages are published more quickly</span></span><br><span class="line"><span class="comment">   * than we can send them, the number here specifies how many messages to</span></span><br><span class="line"><span class="comment">   * buffer up before throwing some away.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ros::Publisher chatter_pub = n.<span class="built_in">advertise</span>&lt;std_msgs::String&gt;(<span class="string">&quot;chatter&quot;</span>, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function">ros::Rate <span class="title">loop_rate</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * A count of how many messages we have sent. This is used to create</span></span><br><span class="line"><span class="comment">   * a unique string for each message.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (ros::<span class="built_in">ok</span>())</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * This is a message object. You stuff it with data, and then publish it.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    std_msgs::String msg;</span><br><span class="line"></span><br><span class="line">    std::stringstream ss;</span><br><span class="line">    ss &lt;&lt; <span class="string">&quot;hello world &quot;</span> &lt;&lt; count;</span><br><span class="line">    msg.data = ss.<span class="built_in">str</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;%s&quot;</span>, msg.data.<span class="built_in">c_str</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The publish() function is how you send messages. The parameter</span></span><br><span class="line"><span class="comment">     * is the message object. The type of this object must agree with the type</span></span><br><span class="line"><span class="comment">     * given as a template parameter to the advertise&lt;&gt;() call, as was done</span></span><br><span class="line"><span class="comment">     * in the constructor above.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    chatter_pub.<span class="built_in">publish</span>(msg);</span><br><span class="line"></span><br><span class="line">    ros::<span class="built_in">spinOnce</span>();</span><br><span class="line"></span><br><span class="line">    loop_rate.<span class="built_in">sleep</span>();</span><br><span class="line">    ++count;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="listener-cpp"><a href="#listener-cpp" class="headerlink" title="listener.cpp"></a>listener.cpp</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/String.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * This tutorial demonstrates simple receipt of messages over the ROS system.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">chatterCallback</span><span class="params">(<span class="type">const</span> std_msgs::String::ConstPtr&amp; msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">ROS_INFO</span>(<span class="string">&quot;I heard: [%s]&quot;</span>, msg-&gt;data.<span class="built_in">c_str</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The ros::init() function needs to see argc and argv so that it can perform</span></span><br><span class="line"><span class="comment">   * any ROS arguments and name remapping that were provided at the command line.</span></span><br><span class="line"><span class="comment">   * For programmatic remappings you can use a different version of init() which takes</span></span><br><span class="line"><span class="comment">   * remappings directly, but for most command-line programs, passing argc and argv is</span></span><br><span class="line"><span class="comment">   * the easiest way to do it.  The third argument to init() is the name of the node.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * You must call one of the versions of ros::init() before using any other</span></span><br><span class="line"><span class="comment">   * part of the ROS system.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ros::<span class="built_in">init</span>(argc, argv, <span class="string">&quot;listener&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * NodeHandle is the main access point to communications with the ROS system.</span></span><br><span class="line"><span class="comment">   * The first NodeHandle constructed will fully initialize this node, and the last</span></span><br><span class="line"><span class="comment">   * NodeHandle destructed will close down the node.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ros::NodeHandle n;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The subscribe() call is how you tell ROS that you want to receive messages</span></span><br><span class="line"><span class="comment">   * on a given topic.  This invokes a call to the ROS</span></span><br><span class="line"><span class="comment">   * master node, which keeps a registry of who is publishing and who</span></span><br><span class="line"><span class="comment">   * is subscribing.  Messages are passed to a callback function, here</span></span><br><span class="line"><span class="comment">   * called chatterCallback.  subscribe() returns a Subscriber object that you</span></span><br><span class="line"><span class="comment">   * must hold on to until you want to unsubscribe.  When all copies of the Subscriber</span></span><br><span class="line"><span class="comment">   * object go out of scope, this callback will automatically be unsubscribed from</span></span><br><span class="line"><span class="comment">   * this topic.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * The second parameter to the subscribe() function is the size of the message</span></span><br><span class="line"><span class="comment">   * queue.  If messages are arriving faster than they are being processed, this</span></span><br><span class="line"><span class="comment">   * is the number of messages that will be buffered up before beginning to throw</span></span><br><span class="line"><span class="comment">   * away the oldest ones.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ros::Subscriber sub = n.<span class="built_in">subscribe</span>(<span class="string">&quot;chatter&quot;</span>, <span class="number">1000</span>, chatterCallback);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ros::spin() will enter a loop, pumping callbacks.  With this version, all</span></span><br><span class="line"><span class="comment">   * callbacks will be called from within this thread (the main one).  ros::spin()</span></span><br><span class="line"><span class="comment">   * will exit when Ctrl-C is pressed, or the node is shutdown by the master.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ros::<span class="built_in">spin</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>.<span class="number">3</span>)</span><br><span class="line"><span class="keyword">project</span>(beginner_tutorials)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Compile as C++11, supported in ROS Kinetic and newer</span></span><br><span class="line"><span class="keyword">add_compile_options</span>(-std=c++<span class="number">11</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Find catkin macros and libraries</span></span><br><span class="line"><span class="comment">## if COMPONENTS list like find_package(catkin REQUIRED COMPONENTS xyz)</span></span><br><span class="line"><span class="comment">## is used, also find other catkin packages</span></span><br><span class="line"><span class="keyword">find_package</span>(catkin REQUIRED COMPONENTS</span><br><span class="line">  roscpp</span><br><span class="line">  rospy</span><br><span class="line">  std_msgs</span><br><span class="line">  message_generation</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">## System dependencies are found with CMake&#x27;s conventions</span></span><br><span class="line"><span class="comment"># find_package(Boost REQUIRED COMPONENTS system)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Generate messages in the &#x27;msg&#x27; folder</span></span><br><span class="line">add_message_files(</span><br><span class="line">  FILES</span><br><span class="line">  Num.msg</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Generate services in the &#x27;srv&#x27; folder</span></span><br><span class="line">add_service_files(</span><br><span class="line">   FILES</span><br><span class="line">   AddTwoInts.srv</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Generate actions in the &#x27;action&#x27; folder</span></span><br><span class="line"><span class="comment"># add_action_files(</span></span><br><span class="line"><span class="comment">#   FILES</span></span><br><span class="line"><span class="comment">#   Action1.action</span></span><br><span class="line"><span class="comment">#   Action2.action</span></span><br><span class="line"><span class="comment"># )</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Generate added messages and services with any dependencies listed here</span></span><br><span class="line">generate_messages(</span><br><span class="line">  DEPENDENCIES</span><br><span class="line">  std_msgs</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">catkin_package(</span><br><span class="line">  INCLUDE_DIRS <span class="keyword">include</span></span><br><span class="line">  LIBRARIES beginner_tutorials</span><br><span class="line">  CATKIN_DEPENDS roscpp rospy std_msgs message_runtime</span><br><span class="line"><span class="comment">#  DEPENDS system_lib</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">###########</span></span><br><span class="line"><span class="comment">## Build ##</span></span><br><span class="line"><span class="comment">###########</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Specify additional locations of header files</span></span><br><span class="line"><span class="comment">## Your package locations should be listed before other locations</span></span><br><span class="line"><span class="keyword">include_directories</span>(</span><br><span class="line">  <span class="keyword">include</span></span><br><span class="line">  <span class="variable">$&#123;catkin_INCLUDE_DIRS&#125;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(talker src/talker.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(talker <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>)</span><br><span class="line"><span class="keyword">add_dependencies</span>(talker beginner_tutorials_generate_messages_cpp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(listener src/listener.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(listener <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>)</span><br><span class="line"><span class="keyword">add_dependencies</span>(listener beginner_tutorials_generate_messages_cpp)</span><br></pre></td></tr></table></figure>

<h2 id="catkin-make"><a href="#catkin-make" class="headerlink" title="catkin_make"></a>catkin_make</h2><pre><code>cd ~/catkin_ws
catkin_make 

Base path: /home/kezunlin/workspace/ros/catkin_ws
Source space: /home/kezunlin/workspace/ros/catkin_ws/src
Build space: /home/kezunlin/workspace/ros/catkin_ws/build
Devel space: /home/kezunlin/workspace/ros/catkin_ws/devel
Install space: /home/kezunlin/workspace/ros/catkin_ws/install
####
#### Running command: &quot;make cmake_check_build_system&quot; in &quot;/home/kezunlin/workspace/ros/catkin_ws/build&quot;
####
-- Using CATKIN_DEVEL_PREFIX: /home/kezunlin/workspace/ros/catkin_ws/devel
-- Using CMAKE_PREFIX_PATH: /home/kezunlin/workspace/ros/catkin_ws/devel;/home/kezunlin/catkin_ws/devel;/opt/ros/kinetic
-- This workspace overlays: /home/kezunlin/workspace/ros/catkin_ws/devel;/home/kezunlin/catkin_ws/devel;/opt/ros/kinetic
-- Using PYTHON_EXECUTABLE: /usr/bin/python
-- Using Debian Python package layout
-- Using empy: /usr/bin/empy
-- Using CATKIN_ENABLE_TESTING: ON
-- Call enable_testing()
-- Using CATKIN_TEST_RESULTS_DIR: /home/kezunlin/workspace/ros/catkin_ws/build/test_results
-- Found gtest: gtests will be built
-- Using Python nosetests: /usr/local/bin/nosetests-2.7
-- catkin 0.7.14
-- BUILD_SHARED_LIBS is on
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- ~~  traversing 1 packages in topological order:
-- ~~  - beginner_tutorials
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- +++ processing catkin package: &#39;beginner_tutorials&#39;
-- ==&gt; add_subdirectory(beginner_tutorials)
-- Using these message generators: gencpp;geneus;genlisp;gennodejs;genpy
-- beginner_tutorials: 1 messages, 1 services
-- Configuring done
-- Generating done
-- Build files have been written to: /home/kezunlin/workspace/ros/catkin_ws/build
####
#### Running command: &quot;make -j8 -l8&quot; in &quot;/home/kezunlin/workspace/ros/catkin_ws/build&quot;
####
[  0%] [  0%] [  0%] [  0%] Built target std_msgs_generate_messages_cpp
Built target std_msgs_generate_messages_py
[  0%] Built target std_msgs_generate_messages_nodejs
Built target std_msgs_generate_messages_lisp
Built target std_msgs_generate_messages_eus
[  0%] [  0%] Built target _beginner_tutorials_generate_messages_check_deps_AddTwoInts
Built target _beginner_tutorials_generate_messages_check_deps_Num
[ 20%] [ 20%] [ 20%] [ 26%] [ 33%] [ 40%] [ 46%] Generating Lisp code from beginner_tutorials/Num.msg
Generating EusLisp code from beginner_tutorials/AddTwoInts.srv
Generating EusLisp code from beginner_tutorials/Num.msg
Generating Javascript code from beginner_tutorials/Num.msg
Generating Javascript code from beginner_tutorials/AddTwoInts.srv
Generating C++ code from beginner_tutorials/Num.msg
[ 53%] Generating C++ code from beginner_tutorials/AddTwoInts.srv
Generating Python from MSG beginner_tutorials/Num
[ 60%] Generating Lisp code from beginner_tutorials/AddTwoInts.srv
[ 66%] Generating Python code from SRV beginner_tutorials/AddTwoInts
[ 66%] Built target beginner_tutorials_generate_messages_nodejs
[ 73%] Built target beginner_tutorials_generate_messages_eus
[ 73%] Built target beginner_tutorials_generate_messages_lisp
[ 80%] [ 86%] Generating Python srv __init__.py for beginner_tutorials
Generating Python msg __init__.py for beginner_tutorials
[ 86%] Built target beginner_tutorials_generate_messages_cpp
Scanning dependencies of target listener
Scanning dependencies of target talker
[ 93%] [100%] Building CXX object beginner_tutorials/CMakeFiles/listener.dir/src/listener.cpp.o
Building CXX object beginner_tutorials/CMakeFiles/talker.dir/src/talker.cpp.o
[100%] Built target beginner_tutorials_generate_messages_py
[100%] Built target beginner_tutorials_generate_messages
Linking CXX executable /home/kezunlin/workspace/ros/catkin_ws/devel/lib/beginner_tutorials/talker
[100%] Built target talker
Linking CXX executable /home/kezunlin/workspace/ros/catkin_ws/devel/lib/beginner_tutorials/listener
[100%] Built target listener
</code></pre>
<h3 id="play-with-talker-and-listener"><a href="#play-with-talker-and-listener" class="headerlink" title="play with talker and listener"></a>play with talker and listener</h3><pre><code>roscore 

cd ~/catkin_ws
./devel/lib/beginner_tutorials/talker
./devel/lib/beginner_tutorials/listener
</code></pre>
<p><code>rosrun beginner_tutorials talker</code></p>
<pre><code>[ INFO] [1545039519.457624559]: hello world 803
[ INFO] [1545039519.557624500]: hello world 804
[ INFO] [1545039519.657595852]: hello world 805
[ INFO] [1545039519.757538635]: hello world 806
</code></pre>
<p><code>rosrun beginner_tutorials listener</code></p>
<pre><code>[ INFO] [1545039519.458099942]: I heard: [hello world 803]
[ INFO] [1545039519.558116295]: I heard: [hello world 804]
[ INFO] [1545039519.658085716]: I heard: [hello world 805]
[ INFO] [1545039519.757998160]: I heard: [hello world 806]
</code></pre>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>



<h2 id="Quick-Ref"><a href="#Quick-Ref" class="headerlink" title="Quick Ref"></a>Quick Ref</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install and configure ros environment</span></span><br><span class="line"><span class="comment">## install</span></span><br><span class="line"><span class="built_in">sudo</span> sh -c <span class="string">&#x27;. /etc/lsb-release &amp;&amp; echo &quot;deb [arch=amd64] http://mirrors.ustc.edu.cn/ros/ubuntu/ $DISTRIB_CODENAME main&quot; &gt; /etc/apt/sources.list.d/ros-latest.list&#x27;</span></span><br><span class="line"><span class="built_in">sudo</span> apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-kinetic-desktop-full</span><br><span class="line"><span class="built_in">sudo</span> apt-get install python-rosinstall python-rosinstall-generator python-wstool build-essential</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> rosdep init</span><br><span class="line">rosdep update</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;source /opt/ros/kinetic/setup.bash&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="built_in">env</span> | grep ROS</span><br><span class="line"></span><br><span class="line"><span class="comment">## test </span></span><br><span class="line">roscore</span><br><span class="line"></span><br><span class="line"><span class="comment">## create workspace</span></span><br><span class="line"><span class="built_in">mkdir</span> -p ~/catkin_ws/src</span><br><span class="line"><span class="built_in">cd</span> ~/catkin_ws/</span><br><span class="line">catkin_make</span><br><span class="line"><span class="built_in">source</span> devel/setup.bash </span><br><span class="line"><span class="built_in">env</span> | grep ROS</span><br></pre></td></tr></table></figure>

<h2 id="Navigating-the-ROS-Filesystem"><a href="#Navigating-the-ROS-Filesystem" class="headerlink" title="Navigating the ROS Filesystem"></a>Navigating the ROS Filesystem</h2><p>commands</p>
<ul>
<li>rospack &#x3D; ros + pack(age)</li>
<li>roscd &#x3D; ros + cd</li>
<li>rosls &#x3D; ros + ls</li>
</ul>
<p>sudo apt-get install ros-kinetic-ros-tutorials</p>
<p>rosls roscpp_tutorials</p>
<p>rospack find roscpp</p>
<p>&#x2F;opt&#x2F;ros&#x2F;kinetic&#x2F;share&#x2F;roscpp</p>
<p>roscd roscpp<br>pwd<br>&#x2F;opt&#x2F;ros&#x2F;kinetic&#x2F;share&#x2F;roscpp</p>
<blockquote>
<p>Note that <code>roscd</code>, like other ROS tools, will only find ROS packages that are within the directories listed in your <code>ROS_PACKAGE_PATH</code>.<br><code>echo $ROS_PACKAGE_PATH</code></p>
</blockquote>
<p>roscd roscpp&#x2F;cmake<br>pwd<br>&#x2F;opt&#x2F;ros&#x2F;kinetic&#x2F;share&#x2F;roscpp&#x2F;cmake</p>
<p>roscd log<br>pwd<br>&#x2F;home&#x2F;kezunlin&#x2F;.ros&#x2F;log&#x2F;42e6e804-0199-11e9-93c2-80fa5b47928a</p>
<p>rosls roscpp<br>cmake  msg  package.xml  rosbuild  srv</p>
<h2 id="Creating-a-ROS-Package"><a href="#Creating-a-ROS-Package" class="headerlink" title="Creating a ROS Package"></a>Creating a ROS Package</h2><h3 id="package-structure"><a href="#package-structure" class="headerlink" title="package structure"></a>package structure</h3><p>workspace_folder&#x2F;        – WORKSPACE<br>  src&#x2F;                   – SOURCE SPACE<br>    CMakeLists.txt       – ‘Toplevel’ CMake file, provided by catkin<br>    package_1&#x2F;<br>      CMakeLists.txt     – CMakeLists.txt file for package_1<br>      package.xml        – Package manifest for package_1<br>    …<br>    package_n&#x2F;<br>      CMakeLists.txt     – CMakeLists.txt file for package_n<br>      package.xml        – Package manifest for package_n</p>
<h3 id="create-a-catkin-package"><a href="#create-a-catkin-package" class="headerlink" title="create a catkin package"></a>create a catkin package</h3><blockquote>
<p>catkin_create_pkg <package_name> [depend1] [depend2] [depend3]</p>
</blockquote>
<p>cd ~&#x2F;catkin_ws&#x2F;src<br>catkin_create_pkg beginner_tutorials roscpp rospy std_msgs</p>
<pre><code>Created file beginner_tutorials/CMakeLists.txt
Created file beginner_tutorials/package.xml
Created folder beginner_tutorials/include/beginner_tutorials
Created folder beginner_tutorials/src
</code></pre>
<h3 id="build-a-catkin-workspace-and-source-setup-file"><a href="#build-a-catkin-workspace-and-source-setup-file" class="headerlink" title="build a catkin workspace and source setup file"></a>build a catkin workspace and source setup file</h3><p>cd ~&#x2F;catkin_ws&#x2F;<br>catkin_make</p>
<p>. ~&#x2F;catkin_ws&#x2F;devel&#x2F;setup.bash</p>
<h3 id="package-dependencies"><a href="#package-dependencies" class="headerlink" title="package dependencies"></a>package dependencies</h3><h4 id="first-order-dependencies"><a href="#first-order-dependencies" class="headerlink" title="first-order dependencies"></a>first-order dependencies</h4><p>rospack depends1 beginner_tutorials<br>roscpp<br>rospy<br>std_msgs</p>
<p>roscd beginner_tutorials<br>cat package.xml</p>
<pre><code>&lt;package format=&quot;2&quot;&gt;
...
  &lt;buildtool_depend&gt;catkin&lt;/buildtool_depend&gt;
  &lt;build_depend&gt;roscpp&lt;/build_depend&gt;
  &lt;build_depend&gt;rospy&lt;/build_depend&gt;
  &lt;build_depend&gt;std_msgs&lt;/build_depend&gt;
...
&lt;/package&gt;
</code></pre>
<h4 id="Indirect-dependencies"><a href="#Indirect-dependencies" class="headerlink" title="Indirect dependencies"></a>Indirect dependencies</h4><p>rospack depends1 rospy<br>genpy<br>roscpp<br>rosgraph<br>rosgraph_msgs<br>roslib<br>std_msgs</p>
<h4 id="list-all-dependencies"><a href="#list-all-dependencies" class="headerlink" title="list all dependencies"></a>list all dependencies</h4><p>rospack depends beginner_tutorials</p>
<h3 id="Customizing-Your-Package"><a href="#Customizing-Your-Package" class="headerlink" title="Customizing Your Package"></a>Customizing Your Package</h3><p>vim package.xml</p>
<h2 id="Building-a-ROS-Package"><a href="#Building-a-ROS-Package" class="headerlink" title="Building a ROS Package"></a>Building a ROS Package</h2><h3 id="catkin-make-1"><a href="#catkin-make-1" class="headerlink" title="catkin_make"></a>catkin_make</h3><pre><code># In a CMake project
$ mkdir build
$ cd build
$ cmake ..
$ make
$ make install  # (optionally)

# In a catkin workspace
$ catkin_make
$ catkin_make install  # (optionally)
</code></pre>
<h2 id="Understanding-ROS-Nodes"><a href="#Understanding-ROS-Nodes" class="headerlink" title="Understanding ROS Nodes"></a>Understanding ROS Nodes</h2><p>commands</p>
<ul>
<li>roscore &#x3D; ros+core : master (provides name service for ROS) + rosout (stdout&#x2F;stderr) + parameter server (parameter server will be introduced later)</li>
<li>rosnode &#x3D; ros+node : ROS tool to get information about a node.</li>
<li>rosrun &#x3D; ros+run : runs a node from a given package.</li>
</ul>
<h3 id="concepts"><a href="#concepts" class="headerlink" title="concepts"></a>concepts</h3><p>Quick Overview of Graph Concepts</p>
<ul>
<li>Nodes: A node is an executable that uses ROS to communicate with other nodes.</li>
<li>Messages: ROS data type used when subscribing or publishing to a topic.</li>
<li>Topics: Nodes can publish messages to a topic as well as subscribe to a topic to receive messages.</li>
<li>Master: Name service for ROS (i.e. helps nodes find each other)</li>
<li>rosout: ROS equivalent of stdout&#x2F;stderr</li>
<li>roscore: Master + rosout + parameter server (parameter server will be introduced later)</li>
</ul>
<p>Client Libraries</p>
<ul>
<li>rospy &#x3D; python client library</li>
<li>roscpp &#x3D; c++ client library</li>
</ul>
<h3 id="play-with-nodes"><a href="#play-with-nodes" class="headerlink" title="play with nodes"></a>play with nodes</h3><p>roscore</p>
<p>rosnode list<br>&#x2F;rosout</p>
<p>rosnode info &#x2F;rosout</p>
<pre><code>--------------------------------------------------------------------------------
Node [/rosout]
Publications: 
 * /rosout_agg [rosgraph_msgs/Log]

Subscriptions: 
 * /rosout [unknown type]

Services: 
 * /rosout/get_loggers
 * /rosout/set_logger_level


contacting node http://ke:40803/ ...
Pid: 31049
</code></pre>
<h3 id="run-new-nodes"><a href="#run-new-nodes" class="headerlink" title="run new nodes"></a>run new nodes</h3><blockquote>
<p>rosrun [package_name] [node_name]</p>
</blockquote>
<p>rosrun turtlesim turtlesim_node</p>
<p>rosnode list<br>&#x2F;rosout<br>&#x2F;turtlesim</p>
<p>rosnode info &#x2F;turtlesim</p>
<h3 id="rename-node-name"><a href="#rename-node-name" class="headerlink" title="rename node name"></a>rename node name</h3><p>rosrun turtlesim turtlesim_node __name:&#x3D;my_turtle</p>
<p>rosnode list<br>&#x2F;my_turtle<br>&#x2F;rosout</p>
<blockquote>
<p>Note: If you still see <code>/turtlesim</code> in the list, it might mean that you stopped the node in the terminal using <code>ctrl-C</code> instead of <code>closing the window</code></p>
</blockquote>
<h3 id="ping-node"><a href="#ping-node" class="headerlink" title="ping node"></a>ping node</h3><p>rosnode ping my_turtle<br>rosnode: node is [&#x2F;my_turtle]<br>pinging &#x2F;my_turtle with a timeout of 3.0s<br>xmlrpc reply from <a target="_blank" rel="noopener" href="http://ke:33523/">http://ke:33523/</a>	time&#x3D;0.274181ms<br>xmlrpc reply from <a target="_blank" rel="noopener" href="http://ke:33523/">http://ke:33523/</a>	time&#x3D;1.040220ms<br>xmlrpc reply from <a target="_blank" rel="noopener" href="http://ke:33523/">http://ke:33523/</a>	time&#x3D;1.013041ms<br>^Cping average: 0.775814ms</p>
<h2 id="Understanding-ROS-Topics"><a href="#Understanding-ROS-Topics" class="headerlink" title="Understanding ROS Topics"></a>Understanding ROS Topics</h2><p>roscore<br>rosrun turtlesim turtlesim_node<br>rosrun turtlesim turtle_teleop_key</p>
<p>rosrun rqt_graph rqt_graph</p>
<p>rostopic echo &#x2F;turtle1&#x2F;cmd_vel</p>
<h2 id="linear-x-2-0-y-0-0-z-0-0angular-x-0-0-y-0-0-z-0-0"><a href="#linear-x-2-0-y-0-0-z-0-0angular-x-0-0-y-0-0-z-0-0" class="headerlink" title="linear:  x: 2.0  y: 0.0  z: 0.0angular:  x: 0.0  y: 0.0  z: 0.0"></a>linear:<br>  x: 2.0<br>  y: 0.0<br>  z: 0.0<br>angular:<br>  x: 0.0<br>  y: 0.0<br>  z: 0.0</h2><p>rostopic list -v</p>
<pre><code>Published topics:
 * /turtle1/color_sensor [turtlesim/Color] 1 publisher
 * /turtle1/cmd_vel [geometry_msgs/Twist] 1 publisher
 * /rosout [rosgraph_msgs/Log] 3 publishers
 * /rosout_agg [rosgraph_msgs/Log] 1 publisher
 * /turtle1/pose [turtlesim/Pose] 1 publisher

Subscribed topics:
 * /turtle1/cmd_vel [geometry_msgs/Twist] 1 subscriber
 * /rosout [rosgraph_msgs/Log] 1 subscriber
 * /statistics [rosgraph_msgs/TopicStatistics] 1 subscriber
</code></pre>
<p>rostopic type &#x2F;turtle1&#x2F;cmd_vel<br>geometry_msgs&#x2F;Twist</p>
<p>rosmsg show geometry_msgs&#x2F;Twist<br>geometry_msgs&#x2F;Vector3 linear<br>  float64 x<br>  float64 y<br>  float64 z<br>geometry_msgs&#x2F;Vector3 angular<br>  float64 x<br>  float64 y<br>  float64 z</p>
<p>rostopic type &#x2F;turtle1&#x2F;cmd_vel | rosmsg show</p>
<h3 id="publish-messages"><a href="#publish-messages" class="headerlink" title="publish messages"></a>publish messages</h3><blockquote>
<p>rostopic pub [topic] [msg_type] [args]</p>
</blockquote>
<p>rostopic pub &#x2F;turtle1&#x2F;cmd_vel geometry_msgs&#x2F;Twist “linear:<br>  x: 2.0<br>  y: 0.0<br>  z: 0.0<br>angular:<br>  x: 0.0<br>  y: 0.0<br>  z: 1.8” </p>
<p>rostopic pub -1 &#x2F;turtle1&#x2F;cmd_vel geometry_msgs&#x2F;Twist – ‘[2.0, 0.0, 0.0]’ ‘[0.0, 0.0, 1.8]’</p>
<p>rostopic pub &#x2F;turtle1&#x2F;cmd_vel geometry_msgs&#x2F;Twist -r 1 – ‘[2.0, 0.0, 0.0]’ ‘[0.0, 0.0, -1.8]’</p>
<blockquote>
<p>YAML syntax</p>
</blockquote>
<p>rostopic hz &#x2F;turtle1&#x2F;pose<br>$ 60 HZ</p>
<p>rosrun rqt_plot rqt_plot</p>
<h2 id="Understanding-ROS-Services-and-Parameters"><a href="#Understanding-ROS-Services-and-Parameters" class="headerlink" title="Understanding ROS Services and Parameters"></a>Understanding ROS Services and Parameters</h2><h3 id="rosservice"><a href="#rosservice" class="headerlink" title="rosservice"></a>rosservice</h3><p>Services are another way that nodes can communicate with each other. Services allow nodes to send a <code>request</code> and <code>receive</code> a response.</p>
<p>rosnode list<br>&#x2F;rosout<br>&#x2F;rqt_gui_py_node_1614<br>&#x2F;teleop_turtle<br>&#x2F;turtlesim</p>
<p>rosservice list<br>&#x2F;clear<br>&#x2F;kill<br>&#x2F;reset<br>&#x2F;rosout&#x2F;get_loggers<br>&#x2F;rosout&#x2F;set_logger_level<br>&#x2F;rqt_gui_py_node_1614&#x2F;get_loggers<br>&#x2F;rqt_gui_py_node_1614&#x2F;set_logger_level<br>&#x2F;spawn<br>&#x2F;teleop_turtle&#x2F;get_loggers<br>&#x2F;teleop_turtle&#x2F;set_logger_level<br>&#x2F;turtle1&#x2F;set_pen<br>&#x2F;turtle1&#x2F;teleport_absolute<br>&#x2F;turtle1&#x2F;teleport_relative<br>&#x2F;turtlesim&#x2F;get_loggers<br>&#x2F;turtlesim&#x2F;set_logger_level</p>
<blockquote>
<p>rosservice type [service]<br>rosservice call [service] [args]</p>
</blockquote>
<p>rosservice type &#x2F;clear<br>std_srvs&#x2F;Empty</p>
<p>rosservice call &#x2F;clear</p>
<blockquote>
<p>clear the background of turtlesim_node</p>
</blockquote>
<h2 id="rosservice-type-spawn-rossrv-showfloat32-xfloat32-yfloat32-thetastring-name"><a href="#rosservice-type-spawn-rossrv-showfloat32-xfloat32-yfloat32-thetastring-name" class="headerlink" title="rosservice type &#x2F;spawn | rossrv showfloat32 xfloat32 yfloat32 thetastring name"></a>rosservice type &#x2F;spawn | rossrv show<br>float32 x<br>float32 y<br>float32 theta<br>string name</h2><p>string name</p>
<p>rosservice call &#x2F;spawn 2 2 0.2 “”</p>
<blockquote>
<p>This service lets us spawn a new turtle at a given location and orientation. The name field is optional.</p>
</blockquote>
<h3 id="rosparam"><a href="#rosparam" class="headerlink" title="rosparam"></a>rosparam</h3><p> rosparam list<br>&#x2F;background_b<br>&#x2F;background_g<br>&#x2F;background_r<br>&#x2F;rosdistro<br>&#x2F;roslaunch&#x2F;uris&#x2F;host_ke__35701<br>&#x2F;rosversion<br>&#x2F;run_id</p>
<blockquote>
<p>rosparam set [param_name]<br>rosparam get [param_name]</p>
</blockquote>
<p>rosparam set &#x2F;background_r 150<br>rosservice call &#x2F;clear</p>
<p>rosparam get &#x2F;<br>background_b: 255<br>background_g: 86<br>background_r: 150<br>rosdistro: ‘kinetic</p>
<p>  ‘<br>roslaunch:<br>  uris: {host_ke__35701: ‘<a target="_blank" rel="noopener" href="http://ke:35701/'%7D">http://ke:35701/&#39;}</a><br>rosversion: ‘1.12.14</p>
<p>  ‘<br>run_id: eb9e9f1e-01a3-11e9-93c2-80fa5b47928a</p>
<p>rosparam get &#x2F;background_b<br>255</p>
<blockquote>
<p>rosparam dump [file_name] [namespace]<br>rosparam load [file_name] [namespace]</p>
</blockquote>
<p>rosparam dump params.yaml</p>
<p>rosparam load params.yaml copy<br>rosparam get &#x2F;copy&#x2F;background_b</p>
<h2 id="Using-rqt-console-and-roslaunch"><a href="#Using-rqt-console-and-roslaunch" class="headerlink" title="Using rqt_console and roslaunch"></a>Using rqt_console and roslaunch</h2><p>rosrun rqt_console rqt_console<br>rosrun rqt_logger_level rqt_logger_level</p>
<blockquote>
<p>2 windows pop up.</p>
</blockquote>
<p>logger levels</p>
<p>Fatal<br>Error<br>Warn<br>Info<br>Debug</p>
<blockquote>
<p>roslaunch starts nodes as defined in a launch file.<br>roslaunch [package] [filename.launch]</p>
</blockquote>
<p>cd ~&#x2F;catkin_ws<br>source devel&#x2F;setup.bash<br>roscd beginner_tutorials</p>
<p>mkdir launch<br>cd launch</p>
<p>vim turtle.launch</p>
<launch>

  <group ns="turtlesim1">
    <node pkg="turtlesim" name="sim" type="turtlesim_node"/>
  </group>

  <group ns="turtlesim2">
    <node pkg="turtlesim" name="sim" type="turtlesim_node"/>
  </group>

  <node pkg="turtlesim" name="mimic" type="mimic">
    <remap from="input" to="turtlesim1/turtle1"/>
    <remap from="output" to="turtlesim2/turtle1"/>
  </node>

</launch>


<p>rosnode list<br>&#x2F;mimic<br>&#x2F;rosout<br>&#x2F;turtlesim1&#x2F;sim<br>&#x2F;turtlesim2&#x2F;sim</p>
<p>rostopic list<br>&#x2F;rosout<br>&#x2F;rosout_agg<br>&#x2F;turtlesim1&#x2F;turtle1&#x2F;cmd_vel<br>&#x2F;turtlesim1&#x2F;turtle1&#x2F;color_sensor<br>&#x2F;turtlesim1&#x2F;turtle1&#x2F;pose<br>&#x2F;turtlesim2&#x2F;turtle1&#x2F;cmd_vel<br>&#x2F;turtlesim2&#x2F;turtle1&#x2F;color_sensor<br>&#x2F;turtlesim2&#x2F;turtle1&#x2F;pose</p>
<p>rostopic pub &#x2F;turtlesim1&#x2F;turtle1&#x2F;cmd_vel geometry_msgs&#x2F;Twist -r 1 – ‘[2.0, 0.0, 0.0]’ ‘[0.0, 0.0, -1.8]’</p>
<blockquote>
<p>You will see the two turtlesims start moving even though the publish command is only being sent to turtlesim1.</p>
</blockquote>
<h2 id="rosed"><a href="#rosed" class="headerlink" title="rosed"></a>rosed</h2><p>rosed roscpp <tab><tab></p>
<p>rosed roscpp Logger.msg</p>
<h2 id="Creating-a-ROS-msg-and-srv"><a href="#Creating-a-ROS-msg-and-srv" class="headerlink" title="Creating a ROS msg and srv"></a>Creating a ROS msg and srv</h2><ul>
<li>msg: msg files are simple text files that describe the fields of a ROS message. They are used to generate source code for messages in different languages.</li>
<li>srv: an srv file describes a service. It is composed of two parts: a request and a response.</li>
</ul>
<h3 id="msg"><a href="#msg" class="headerlink" title="msg"></a>msg</h3><p>msgs are just simple text files with a field type and field name per line. The field types you can use are:</p>
<p>int8, int16, int32, int64 (plus uint*)<br>float32, float64<br>string<br>time, duration<br>other msg files<br>variable-length array[] and fixed-length array[C]</p>
<blockquote>
<p>There is also a special type in ROS: Header, the header contains a timestamp and coordinate frame information that are commonly used in ROS.</p>
</blockquote>
<p>Header header<br>string child_frame_id<br>geometry_msgs&#x2F;PoseWithCovariance pose<br>geometry_msgs&#x2F;TwistWithCovariance twist</p>
<h3 id="srv"><a href="#srv" class="headerlink" title="srv"></a>srv</h3><h2 id="int64-Aint64-B"><a href="#int64-Aint64-B" class="headerlink" title="int64 Aint64 B"></a>int64 A<br>int64 B</h2><p>int64 Sum</p>
<blockquote>
<p>A and B are the request, and Sum is the response.</p>
</blockquote>
<h3 id="create-msg-1"><a href="#create-msg-1" class="headerlink" title="create msg"></a>create msg</h3><p>roscd beginner_tutorials<br>mkdir msg<br>echo “int64 num” &gt; msg&#x2F;Num.msg</p>
<p>vim package.xml</p>
<p><build_depend>message_generation</build_depend><br><exec_depend>message_runtime</exec_depend></p>
<p>vim CMakeLists.txt</p>
<p>find_package(catkin REQUIRED COMPONENTS<br>   roscpp<br>   rospy<br>   std_msgs<br>   message_generation<br>)</p>
<p>catkin_package(<br>  …<br>  CATKIN_DEPENDS message_runtime …<br>  …)</p>
<p>add_message_files(<br>  FILES<br>  Num.msg<br>)</p>
<h3 id="create-srv-1"><a href="#create-srv-1" class="headerlink" title="create srv"></a>create srv</h3><p>roscd beginner_tutorials<br>mkdir srv</p>
<blockquote>
<p>roscp [package_name] [file_to_copy_path] [copy_path]<br>roscp rospy_tutorials AddTwoInts.srv srv&#x2F;AddTwoInts.srv</p>
</blockquote>
<p>vim CMakeLists.txt</p>
<p>add_service_files(<br>  FILES<br>  AddTwoInts.srv<br>)</p>
<h3 id="show-msg-1"><a href="#show-msg-1" class="headerlink" title="show msg"></a>show msg</h3><p>rosmsg show beginner_tutorials&#x2F;Num<br>int64 num</p>
<p>rosmsg show Num<br>[beginner_tutorials&#x2F;Num]:<br>int64 num</p>
<h3 id="show-srv-1"><a href="#show-srv-1" class="headerlink" title="show srv"></a>show srv</h3><blockquote>
<p>rossrv show <service type><br>rossrv show beginner_tutorials&#x2F;AddTwoInts </p>
</blockquote>
<pre><code>int64 a
int64 b
---
int64 sum
</code></pre>
<p>rossrv show AddTwoInts</p>
<pre><code>[beginner_tutorials/AddTwoInts]:
int64 a
int64 b
---
int64 sum

[rospy_tutorials/AddTwoInts]:
int64 a
int64 b
---
int64 sum
</code></pre>
<h3 id="catkin-make-2"><a href="#catkin-make-2" class="headerlink" title="catkin_make"></a>catkin_make</h3><p>roscd beginner_tutorials<br>cd ..&#x2F;..<br>catkin_make install</p>
<h3 id="review"><a href="#review" class="headerlink" title="review"></a>review</h3><p>rospack &#x3D; ros+pack(age) : provides information related to ROS packages<br>roscd &#x3D; ros+cd : changes directory to a ROS package or stack<br>rosls &#x3D; ros+ls : lists files in a ROS package<br>roscp &#x3D; ros+cp : copies files from&#x2F;to a ROS package<br>rosmsg &#x3D; ros+msg : provides information related to ROS message definitions<br>rossrv &#x3D; ros+srv : provides information related to ROS service definitions<br>catkin_make : makes (compiles) a ROS package<br>rosmake &#x3D; ros+make : makes (compiles) a ROS package (if you’re not using a catkin workspace)</p>
<h2 id="Writing-a-Simple-Publisher-and-Subscriber"><a href="#Writing-a-Simple-Publisher-and-Subscriber" class="headerlink" title="Writing a Simple Publisher and Subscriber"></a>Writing a Simple Publisher and Subscriber</h2><h3 id="src"><a href="#src" class="headerlink" title="src"></a>src</h3><p>roscd beginner_tutorials<br>vim src&#x2F;talker.cpp<br>vim src&#x2F;listener.cpp</p>
<h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><p>cd ~&#x2F;catkin_ws<br>catkin_make</p>
<h3 id="play-with-talker-and-listener-1"><a href="#play-with-talker-and-listener-1" class="headerlink" title="play with talker and listener"></a>play with talker and listener</h3><p>roscore </p>
<p>rosrun beginner_tutorials talker</p>
<pre><code>[ INFO] [1545039519.457624559]: hello world 803
[ INFO] [1545039519.557624500]: hello world 804
[ INFO] [1545039519.657595852]: hello world 805
[ INFO] [1545039519.757538635]: hello world 806
</code></pre>
<p>rosrun beginner_tutorials listener</p>
<pre><code>[ INFO] [1545039519.458099942]: I heard: [hello world 803]
[ INFO] [1545039519.558116295]: I heard: [hello world 804]
[ INFO] [1545039519.658085716]: I heard: [hello world 805]
[ INFO] [1545039519.757998160]: I heard: [hello world 806]
</code></pre>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber%28c%2B%2B%29">ros WritingPublisherSubscriber</a></li>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/lizhongpingchn/p/5543013.html">ros publisher subscriber</a></li>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/xuanxiaochen/p/6013886.html">ros publisher subscriber</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20181214: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/tmux-tutorial-on-ubuntu-16-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/tmux-tutorial-on-ubuntu-16-04/" class="post-title-link" itemprop="url">tmux tutorial on ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-14 09:42:00" itemprop="dateCreated datePublished" datetime="2018-12-14T09:42:00+08:00">2018-12-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get -y install tmux</span><br></pre></td></tr></table></figure>

<h3 id="usage"><a href="#usage" class="headerlink" title="usage"></a>usage</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">1) 默认创建一个会话，以数字命名。（不推荐）</span><br><span class="line">[root@Centos6 ~]# tmux</span><br><span class="line"></span><br><span class="line">2）新建会话，比如新创建一个会话以<span class="string">&quot;ccc&quot;</span>命名</span><br><span class="line">[root@Centos6 ~]# tmux new -s ccc</span><br><span class="line"></span><br><span class="line">1) 加上参数-d，表示在后台新建会话</span><br><span class="line">root@bobo:~# tmux new -s shibo -d</span><br><span class="line">root@bobo:~# tmux <span class="built_in">ls</span></span><br><span class="line">shibo: 1 windows (created Tue Oct  2 19:22:32 2018) [135x35]</span><br><span class="line"></span><br><span class="line">4）查看创建得所有会话</span><br><span class="line">[root@Centos6 ~]# tmux <span class="built_in">ls</span></span><br><span class="line">0: 1 windows (created Wed Aug 30 17:58:20 2017) [112x22](attached)    <span class="comment">#attached表示该会话是当前会话</span></span><br><span class="line">aaa: 2 windows (created Wed Aug 30 16:54:33 2017) [112x22]</span><br><span class="line">ccc: 1 windows (created Wed Aug 30 17:01:05 2017) [112x22]</span><br><span class="line"></span><br><span class="line">5）从终端环境进入会话</span><br><span class="line">[root@Centos6 ~]# tmux attach -t aaa </span><br><span class="line"></span><br><span class="line">6）快捷键退出会话：</span><br><span class="line">登到某一个会话后，依次按键ctrl-b + d，这样就会退化该会话，但不会关闭会话；</span><br><span class="line">按键ctrl + d，就会在退出会话的通话也关闭了该会话。</span><br><span class="line"></span><br><span class="line">7）关闭会话（销毁会话）</span><br><span class="line">[root@Centos6 ~]# tmux <span class="built_in">ls</span></span><br><span class="line">aaa: 2 windows (created Wed Aug 30 16:54:33 2017) [112x22]</span><br><span class="line">bbb: 1 windows (created Wed Aug 30 19:02:09 2017) [112x22]</span><br><span class="line"></span><br><span class="line">[root@Centos6 ~]# tmux kill-session -t bbb</span><br><span class="line"></span><br><span class="line">[root@Centos6 ~]# tmux <span class="built_in">ls</span></span><br><span class="line">aaa: 2 windows (created Wed Aug 30 16:54:33 2017) [112x22]</span><br><span class="line"></span><br><span class="line">8）重命名会话</span><br><span class="line">[root@Centos6 ~]# tmux <span class="built_in">ls</span>  </span><br><span class="line">wangshibo: 1 windows (created Sun Sep 30 10:17:00 2018) [136x29] (attached)</span><br><span class="line"></span><br><span class="line">[root@Centos6 ~]# tmux rename -t wangshibo kevin</span><br><span class="line"></span><br><span class="line">[root@Centos6 ~]# tmux <span class="built_in">ls</span></span><br><span class="line">kevin: 1 windows (created Sun Sep 30 10:17:00 2018) [136x29] (attached)</span><br><span class="line"></span><br><span class="line">９）发送命令到回话并执行</span><br><span class="line">[root@Centos6 ~]# tmux send -t session_name <span class="string">&quot;command&quot;</span> ENTER</span><br></pre></td></tr></table></figure>

<h3 id="nohup"><a href="#nohup" class="headerlink" title="nohup"></a>nohup</h3><pre><code>nohup &lt;command&gt; [argument…] &amp;
</code></pre>
<p>使用tmux打开一个终端窗口，可以在窗口里执行一个长时间运行的交互式命令操作，令其一直在后台跑着，并且在按键ctrl-b-d后，可以无感知的退出窗口，<br>而退出后窗口不会关闭，即窗口里执行的交互命令也不会结束。这比起传统的”nohup command &amp; （然后按ctrl+c）”的方式要好用很多。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tmux new -s aaa</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get -y update </span><br><span class="line">ctrl+b + d</span><br></pre></td></tr></table></figure>

<h3 id="similar-tools"><a href="#similar-tools" class="headerlink" title="similar tools"></a>similar tools</h3><ul>
<li>screen</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/kevingrace/p/6496899.html">tmux tutorials</a></li>
<li><a target="_blank" rel="noopener" href="http://mingxinglai.com/cn/2012/09/tmux/">tmux configure</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20181214: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/pyinstaller-tutorial-on-windows-10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/pyinstaller-tutorial-on-windows-10/" class="post-title-link" itemprop="url">use pyinstaller to package executable on windows 10</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-13 10:04:00" itemprop="dateCreated datePublished" datetime="2018-12-13T10:04:00+08:00">2018-12-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install pywin32 pyinstaller</span><br><span class="line">pip3 install --upgrade setuptools</span><br></pre></td></tr></table></figure>

<p><code>pyinstall -F demo.py</code> error</p>
<pre><code>pyinstaller AttributeError: &#39;str&#39; object has no attribute &#39;items&#39;
</code></pre>
<p>solution:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install --upgrade setuptools</span><br></pre></td></tr></table></figure>

<h3 id="usage"><a href="#usage" class="headerlink" title="usage"></a>usage</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller -h </span><br></pre></td></tr></table></figure>

<p>params:</p>
<ul>
<li><p>General Options</p>
<p>  -y, –noconfirm<br>  Replace output directory (default: SPECPATH&#x2F;dist&#x2F;SPECNAME)<br>  without asking for confirmation<br>  –upx-dir UPX_DIR<br>  Path to UPX utility (default: search the execution path)<br><br>  –clean	<br>  Clean PyInstaller cache and remove temporary files before building.<br><br>  –log-level LEVEL<br>  Amount of detail in build-time console messages. LEVEL may be one of<br>  TRACE, DEBUG, INFO, WARN, ERROR, CRITICAL (default: INFO).</p>
</li>
<li><p>What to generate</p>
<pre><code>-D, --onedir	
    Create a one-folder bundle containing an executable (default)

-F, --onefile	
    Create a one-file bundled executable.
</code></pre>
</li>
<li><p>What to bundle, where to search</p>
<pre><code>--add-data &lt;SRC;DEST or SRC:DEST&gt;  
    This option can be used multiple times.

--add-binary &lt;SRC;DEST or SRC:DEST&gt; 
    This option can be used multiple times.

-p DIR, --paths DIR 
    A path to search for imports (like using PYTHONPATH). 
    Multiple paths are allowed, separated by ‘:’, or use 
    this option multiple times

--hidden-import MODULENAME, --hiddenimport MODULENAME 
    Name an import not visible in the code of the script(s). 
    This option can be used multiple times.
</code></pre>
</li>
<li><p>Windows and Mac OS X specific options</p>
<pre><code>-c, --console, --nowindowed
    Open a console window for standard i/o (default)
-w, --windowed, --noconsole
    Windows and Mac OS X: do not provide a console window 
    for standard i/o
</code></pre>
</li>
</ul>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>



<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><h3 id="use-pyd"><a href="#use-pyd" class="headerlink" title="use pyd"></a>use pyd</h3><p>path related source code</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sys.path.append(<span class="string">&#x27;./sdk/superdog/&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> superdog <span class="comment"># superdog.pyd</span></span><br></pre></td></tr></table></figure>

<p>pyinstaller commands</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller -y -D --path=<span class="string">&quot;sdk/superdog&quot;</span> demo.py</span><br><span class="line"><span class="comment"># pyinstaller -y -D --add-binary &#x27;./sdk/superdog/superdog.pyd;.&#x27; </span></span><br><span class="line"><span class="comment"># --add-binary &#x27;./sdk/superdog/dog_windows_x64.dll;.&#x27; demo.py</span></span><br></pre></td></tr></table></figure>

<p>generate <code>build</code> and <code>dist</code> folder, plus <code>demo.spec</code></p>
<p>output </p>
<pre><code>78 INFO: Extending PYTHONPATH with paths
[&#39;E:\\git\\python\\helloworld&#39;,
 &#39;E:\\git\\python\\helloworld\\sdk\\superdog&#39;,
 &#39;E:\\git\\python\\helloworld&#39;]
</code></pre>
<p>demo.spec</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- mode: python -*-</span></span><br><span class="line"></span><br><span class="line">block_cipher = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = Analysis([<span class="string">&#x27;demo.py&#x27;</span>],</span><br><span class="line">             pathex=[<span class="string">&#x27;sdk/superdog&#x27;</span>, <span class="string">&#x27;E:\\git\\python\\helloworld&#x27;</span>],</span><br><span class="line">             binaries=[],</span><br><span class="line">             datas=[],</span><br><span class="line">             hiddenimports=[],</span><br><span class="line">             hookspath=[],</span><br><span class="line">             runtime_hooks=[],</span><br><span class="line">             excludes=[],</span><br><span class="line">             win_no_prefer_redirects=<span class="literal">False</span>,</span><br><span class="line">             win_private_assemblies=<span class="literal">False</span>,</span><br><span class="line">             cipher=block_cipher,</span><br><span class="line">             noarchive=<span class="literal">False</span>)</span><br><span class="line">pyz = PYZ(a.pure, a.zipped_data,</span><br><span class="line">             cipher=block_cipher)</span><br><span class="line">exe = EXE(pyz,</span><br><span class="line">          a.scripts,</span><br><span class="line">          [],</span><br><span class="line">          exclude_binaries=<span class="literal">True</span>,</span><br><span class="line">          name=<span class="string">&#x27;demo&#x27;</span>,</span><br><span class="line">          debug=<span class="literal">False</span>,</span><br><span class="line">          bootloader_ignore_signals=<span class="literal">False</span>,</span><br><span class="line">          strip=<span class="literal">False</span>,</span><br><span class="line">          upx=<span class="literal">True</span>,</span><br><span class="line">          console=<span class="literal">True</span> )</span><br><span class="line">coll = COLLECT(exe,</span><br><span class="line">               a.binaries,</span><br><span class="line">               a.zipfiles,</span><br><span class="line">               a.datas,</span><br><span class="line">               strip=<span class="literal">False</span>,</span><br><span class="line">               upx=<span class="literal">True</span>,</span><br><span class="line">               name=<span class="string">&#x27;demo&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>view <code>build/demo/xref-demo.html</code></p>
<p>superdog found.</p>
<blockquote>
<p>Tips:<br>if we use <code>pyinstaller -y -D demo.py</code> don’t include <code>--path=&quot;sdk/superdog&quot;</code>,<br>package will be missing, and error occur when we run executable.</p>
</blockquote>
<p>run executable </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> dist/demo</span><br><span class="line">./demo.exe</span><br><span class="line"><span class="comment"># OK</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>all related dlls have been copied to <code>dist/demo/</code> folder,<br>eg. <code>cublas64_80.dll,curand64_80.dll,cudart64_80.dll,cudnn64_6.dll</code></p>
</blockquote>
<h3 id="use-ctype-DLLs"><a href="#use-ctype-DLLs" class="headerlink" title="use ctype DLLs"></a>use ctype DLLs</h3><p>path related source code </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sys.path.append(<span class="string">&#x27;./sdk/superdog/&#x27;</span>)</span><br><span class="line">sys.path.append(<span class="string">&#x27;./sdk/detect/&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> superdog <span class="comment"># superdog.pyd</span></span><br><span class="line"><span class="keyword">import</span> detect <span class="comment"># detect.py cuda80_detect.dll cuda90_detect.dll</span></span><br></pre></td></tr></table></figure>

<p>CDLL related source code</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lib = CDLL(<span class="string">&quot;./sdk/detect/cuda80_detect_cpp_dll.dll&quot;</span>, RTLD_GLOBAL)</span><br></pre></td></tr></table></figure>

<p>pyinstaller commands</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller -y -D --path=<span class="string">&quot;sdk/superdog;sdk/detect&quot;</span> demo.py</span><br></pre></td></tr></table></figure>

<p>warning</p>
<pre><code>93 INFO: Extending PYTHONPATH with paths
[&#39;E:\\git\\python\\helloworld&#39;,
 &#39;E:\\git\\python\\helloworld\\sdk\\superdog&#39;,
 &#39;E:\\git\\python\\helloworld\\sdk\\detect&#39;,
 &#39;E:\\git\\python\\helloworld&#39;]
  ...
WARNING: Ignoring ./sdk/detect/cuda80_detect_cpp_dll.dll imported
    from E:\git\python\helloworld\sdk\detect\detect.py -
    ctypes imports are only supported using bare filenames
</code></pre>
<p>fix </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#lib = CDLL(&quot;./sdk/detect/cuda80_detect_cpp_dll.dll&quot;, RTLD_GLOBAL)</span></span><br><span class="line">lib = CDLL(<span class="string">&quot;cuda80_detect_cpp_dll.dll&quot;</span>, RTLD_GLOBAL)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Tips: <strong>for CDLL with pyinstaller, we must use bare filenames in python source</strong>.<br>see <a target="_blank" rel="noopener" href="https://pyinstaller.readthedocs.io/en/v3.3.1/feature-notes.html">here</a></p>
</blockquote>
<p>now we run pyintaller again</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller -y -D --path=<span class="string">&quot;sdk/superdog;sdk/detect&quot;</span> demo.py</span><br></pre></td></tr></table></figure>

<p>view <code>build/demo/xref-demo.html</code></p>
<p>superdog and detect.</p>
<p>run executable </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd dist/demo</span><br><span class="line">./demo.exe</span><br><span class="line"><span class="comment"># OK</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>all related dlls have been copied to <code>dist/demo/</code> folder,<br>eg. <code>cublas64_80.dll,curand64_80.dll,cudart64_80.dll,cudnn64_6.dll</code><br>and <code>cuda80_detect_cpp_dll.dll</code></p>
</blockquote>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h2 id="Version"><a href="#Version" class="headerlink" title="Version"></a>Version</h2><h3 id="get-version"><a href="#get-version" class="headerlink" title="get version"></a>get version</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python grab_version.py <span class="string">&quot;/path/to/xxx.exe&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>C:\Users\zunli\AppData\Local\Programs\Python\Python35\Lib\site-packages<br>PyInstaller\utils\cliutils\grab_version.py</p>
</blockquote>
<p><img src="https://kezunlin.me/images/posts/635233-20190305155532641-1365664774.png" alt="qq version info"></p>
<p>file_version_info.txt</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># UTF-8</span><br><span class="line">#</span><br><span class="line"># For more details about fixed file info &#x27;ffi&#x27; see:</span><br><span class="line"># http://msdn.microsoft.com/en-us/library/ms646997.aspx</span><br><span class="line">VSVersionInfo(</span><br><span class="line">  ffi=FixedFileInfo(</span><br><span class="line">    # filevers and prodvers should be always a tuple with four items: (1, 2, 3, 4)</span><br><span class="line">    # Set not needed items to zero 0.</span><br><span class="line">    filevers=(9, 0, 4, 23780),</span><br><span class="line">    prodvers=(9, 0, 4, 23780),</span><br><span class="line">    # Contains a bitmask that specifies the valid bits &#x27;flags&#x27;r</span><br><span class="line">    mask=0x3f,</span><br><span class="line">    # Contains a bitmask that specifies the Boolean attributes of the file.</span><br><span class="line">    flags=0x0,</span><br><span class="line">    # The operating system for which this file was designed.</span><br><span class="line">    # 0x4 - NT and there is no need to change it.</span><br><span class="line">    OS=0x40004,</span><br><span class="line">    # The general type of file.</span><br><span class="line">    # 0x1 - the file is an application.</span><br><span class="line">    fileType=0x1,</span><br><span class="line">    # The function of the file.</span><br><span class="line">    # 0x0 - the function is not defined for this fileType</span><br><span class="line">    subtype=0x0,</span><br><span class="line">    # Creation date and time stamp.</span><br><span class="line">    date=(0, 0)</span><br><span class="line">    ),</span><br><span class="line">  kids=[</span><br><span class="line">    StringFileInfo(</span><br><span class="line">      [</span><br><span class="line">      StringTable(</span><br><span class="line">        u&#x27;080404b0&#x27;,</span><br><span class="line">        [StringStruct(u&#x27;CompanyName&#x27;, u&#x27;Tencent&#x27;),</span><br><span class="line">        StringStruct(u&#x27;FileDescription&#x27;, u&#x27;腾讯QQ&#x27;),</span><br><span class="line">        StringStruct(u&#x27;FileVersion&#x27;, u&#x27;9.0.4.23780&#x27;),</span><br><span class="line">        StringStruct(u&#x27;LegalCopyright&#x27;, u&#x27;Copyright (C) 1999-2018 Tencent. All Rights Reserved&#x27;),</span><br><span class="line">        StringStruct(u&#x27;ProductName&#x27;, u&#x27;腾讯QQ&#x27;),</span><br><span class="line">        StringStruct(u&#x27;ProductVersion&#x27;, u&#x27;9.0.4.23780&#x27;)])</span><br><span class="line">      ]), </span><br><span class="line">    VarFileInfo([VarStruct(u&#x27;Translation&#x27;, [2052, 1200])])</span><br><span class="line">  ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="set-version"><a href="#set-version" class="headerlink" title="set version"></a>set version</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python pyinstaller.py \</span><br><span class="line">--version-file=file_version_info.txt \</span><br><span class="line">--icon=ico.ico \</span><br><span class="line">-y -D \</span><br><span class="line">--path=<span class="string">&quot;sdk/superdog;sdk/detect&quot;</span> \</span><br><span class="line">demo.py</span><br></pre></td></tr></table></figure>

<h2 id="Advanced"><a href="#Advanced" class="headerlink" title="Advanced"></a>Advanced</h2><h3 id="Running-PyInstaller-with-Python-optimizations"><a href="#Running-PyInstaller-with-Python-optimizations" class="headerlink" title="Running PyInstaller with Python optimizations"></a>Running PyInstaller with Python optimizations</h3><blockquote>
<p>Tips: be carefull with optimizations.</p>
</blockquote>
<p>PyInstaller can be run with Python optimization flags (<code>-O</code> or <code>-OO</code>)<br>by executing it as a Python module, rather than using the <code>pyinstaller</code> command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -O -m PyInstaller -y -D --path=<span class="string">&quot;sdk/superdog&quot;</span> demo.py</span><br></pre></td></tr></table></figure>

<p>Or, by explicitly setting the <code>PYTHONOPTIMIZE</code> environment variable to a non-zero value:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Unix</span></span><br><span class="line">PYTHONOPTIMIZE=1 pyinstaller myscript.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># Windows</span></span><br><span class="line"><span class="built_in">set</span> PYTHONOPTIMIZE=1 &amp;&amp; pyinstaller myscript.py</span><br></pre></td></tr></table></figure>

<h3 id="only-import-what-you-need"><a href="#only-import-what-you-need" class="headerlink" title="only import what you need"></a>only import what you need</h3><p>replace <code>import os</code> with <code>from os import path</code> to reduce final executable size.</p>
<h3 id="Using-UPX"><a href="#Using-UPX" class="headerlink" title="Using UPX"></a>Using UPX</h3><p>see <a target="_blank" rel="noopener" href="https://upx.github.io/">upx</a></p>
<h3 id="Encrypting-Python-Bytecode"><a href="#Encrypting-Python-Bytecode" class="headerlink" title="Encrypting Python Bytecode"></a>Encrypting Python Bytecode</h3><p>To encrypt the Python bytecode modules stored in the bundle, pass the <code>--key=key-string</code> argument on the command line.</p>
<p>For this to work, you must have the <code>PyCrypto</code> module installed. The key-string is a string of 16 characters which is used to encrypt each file of Python byte-code before it is stored in the archive inside the executable file.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pycrypto</span><br></pre></td></tr></table></figure>

<h3 id="Other-similar-tools"><a href="#Other-similar-tools" class="headerlink" title="Other similar tools"></a>Other similar tools</h3><ul>
<li><a target="_blank" rel="noopener" href="http://www.py2exe.org/">py2exe</a>: pip install py2exe</li>
<li><a target="_blank" rel="noopener" href="https://cx-freeze.readthedocs.io/en/latest/">cx_freeze</a>: pip install cx_freeze</li>
<li><a target="_blank" rel="noopener" href="https://bitbucket.org/ronaldoussoren/py2app">py2app</a>: pip install py2app</li>
<li><a target="_blank" rel="noopener" href="http://nuitka.net/">nuitka</a> from <a target="_blank" rel="noopener" href="http://nuitka.net/pages/download.html">here</a></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://pyinstaller.readthedocs.io/en/stable/usage.html">pyinstaller usage</a></li>
<li><a target="_blank" rel="noopener" href="https://pyinstaller.readthedocs.io/en/stable/spec-files.html#adding-data-files">pyinstaller add data binary</a></li>
<li><a target="_blank" rel="noopener" href="https://pyinstaller.readthedocs.io/en/v3.3.1/feature-notes.html">pyinstaller feature notes</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20181213: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/compile-caffe-yolov3-on-ubuntu-16-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/compile-caffe-yolov3-on-ubuntu-16-04/" class="post-title-link" itemprop="url">compile and install caffe-yolov3 on ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-11 16:37:00" itemprop="dateCreated datePublished" datetime="2018-12-11T16:37:00+08:00">2018-12-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/deep-learning/" itemprop="url" rel="index"><span itemprop="name">deep learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h2><ul>
<li><a href="https://kezunlin.me/post/e8f8aadd/">Part 1: compile darknet on ubuntu 16.04</a></li>
<li><a href="https://kezunlin.me/post/a5c428f1/">Part 2: compile darknet on windows 10</a></li>
<li><strong><a href="https://kezunlin.me/post/cfeb28a4/">Part 3: compile caffe-yolov3 on ubuntu 16.04</a></strong></li>
</ul>
<h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="requirements"><a href="#requirements" class="headerlink" title="requirements"></a>requirements</h3><p>my system requirements (same as <a href="https://kezunlin.me/post/b90033a9/">caffe on ubuntu 16.04</a>)</p>
<ul>
<li>ubuntu 16.04</li>
<li>GeForce 1060 (6G)  sm_61</li>
<li>cuda: 9.2 </li>
<li>cudnn: 7.1.4</li>
<li>opencv: 3.3.0 </li>
<li>caffe: latest</li>
</ul>
<h3 id="compile"><a href="#compile" class="headerlink" title="compile"></a>compile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/kezunlin/caffe-yolov3.git</span><br><span class="line"><span class="built_in">cd</span> caffe-yolov3</span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build &amp;&amp; cmake-gui ..</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>caffe-yolov3</code> is based on caffe with <code>UpsampleLayer</code> and darknet.<br>tips: edit CMakeLists.txt for <code>caffe</code>.<br>see <a target="_blank" rel="noopener" href="https://github.com/kezunlin/caffe-yolov3/blob/master/CMakeLists.txt">CMakeLists.txt</a></p>
</blockquote>
<h3 id="make"><a href="#make" class="headerlink" title="make"></a>make</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">make -j8</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line">tree install</span><br><span class="line">install</span><br><span class="line">├── bin</span><br><span class="line">│   ├── demo</span><br><span class="line">│   ├── dog.jpg</span><br><span class="line">│   └── libcaffeyolo.so</span><br><span class="line">├── include</span><br><span class="line">│   └── caffeyolo</span><br><span class="line">│       ├── activations.h</span><br><span class="line">│       ├── blas.h</span><br><span class="line">│       ├── box.h</span><br><span class="line">│       ├── cuda.h</span><br><span class="line">│       ├── image.h</span><br><span class="line">│       └── yolo_layer.h</span><br><span class="line">├── lib</span><br><span class="line">│   └── libcaffeyolo.so</span><br><span class="line">└── share</span><br><span class="line">    └── cmake</span><br><span class="line">        └── caffeyolo</span><br><span class="line">            ├── caffeyolo-config.cmake</span><br><span class="line">            └── caffeyolo-config-noconfig.cmake</span><br><span class="line"></span><br><span class="line">7 directories, 12 files</span><br></pre></td></tr></table></figure>

<h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> install/bin</span><br><span class="line">./demo</span><br></pre></td></tr></table></figure>
<p>output </p>
<pre><code>num_inputs is 1
num_outputs is 3
I1211 17:13:30.259755 10384 detectnet.cpp:74] Input data layer channels is  3
I1211 17:13:30.259785 10384 detectnet.cpp:75] Input data layer width is  416
I1211 17:13:30.259806 10384 detectnet.cpp:76] Input data layer height is  416
output blob1 shape c= 255, h = 13, w = 13
output blob2 shape c= 255, h = 26, w = 26
output blob3 shape c= 255, h = 52, w = 52
object-detection:  finished processing data operation  (392)ms
object-detection:  finished processing yolov3 network  (135)ms
16: 99%
x = 0.288428,y =  0.660513,w = 0.243282,h =  0.543122
left = 128,right =  314,top = 224,bot =  536
7: 93%
x = 0.756588,y =  0.222789,w = 0.280549,h =  0.147772
left = 473,right =  688,top = 85,bot =  170
1: 99%
x = 0.473371,y =  0.483899,w = 0.517509,h =  0.575438
left = 164,right =  562,top = 112,bot =  444
detectnet-camera:  video device has been un-initialized.
detectnet-camera:  this concludes the test of the video device.
</code></pre>
<p>image<br><img src="https://kezunlin.me/images/posts/635233-20181211172011480-60199252.png" alt="dog.jpg"></p>
<h3 id="net"><a href="#net" class="headerlink" title="net"></a>net</h3><h4 id="input-output"><a href="#input-output" class="headerlink" title="input &amp;&amp; output"></a>input &amp;&amp; output</h4><p>input: </p>
<ul>
<li>data 1,3,416,416</li>
</ul>
<p>output</p>
<ul>
<li>layer82-conv 1,255,13,13</li>
<li>layer94-conv 1,255,26,26</li>
<li>layer106-conv 1,255,52,52</li>
</ul>
<h4 id="python-code"><a href="#python-code" class="headerlink" title="python code"></a>python code</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### Input: the model&#x27;s output dict</span></span><br><span class="line"><span class="comment">### Output: list of tuples in ((cx1, cy1), (cx2, cy2), cls, prob)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rects_prepare</span>(<span class="params">output, inp_dim=<span class="number">416</span>, num_classes=<span class="number">80</span></span>):</span><br><span class="line">    prediction = <span class="literal">None</span></span><br><span class="line">    <span class="comment"># transform prediction coordinates to correspond to pixel location</span></span><br><span class="line">    <span class="keyword">for</span> key, value <span class="keyword">in</span> output.items():</span><br><span class="line">        <span class="comment"># anchor sizes are borrowed from YOLOv3 config file</span></span><br><span class="line">        <span class="keyword">if</span> key == <span class="string">&#x27;layer82-conv&#x27;</span>: </span><br><span class="line">            anchors = [(<span class="number">116</span>, <span class="number">90</span>), (<span class="number">156</span>, <span class="number">198</span>), (<span class="number">373</span>, <span class="number">326</span>)] </span><br><span class="line">        <span class="keyword">elif</span> key == <span class="string">&#x27;layer94-conv&#x27;</span>:</span><br><span class="line">            anchors = [(<span class="number">30</span>, <span class="number">61</span>), (<span class="number">62</span>, <span class="number">45</span>), (<span class="number">59</span>, <span class="number">119</span>)]</span><br><span class="line">        <span class="keyword">elif</span> key == <span class="string">&#x27;layer106-conv&#x27;</span>: </span><br><span class="line">            anchors = [(<span class="number">10</span>, <span class="number">13</span>), (<span class="number">16</span>, <span class="number">30</span>), (<span class="number">33</span>, <span class="number">23</span>)]</span><br></pre></td></tr></table></figure>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h2 id="yolov3-model"><a href="#yolov3-model" class="headerlink" title="yolov3 model"></a>yolov3 model</h2><h3 id="darknet"><a href="#darknet" class="headerlink" title="darknet"></a>darknet</h3><p>files</p>
<ul>
<li>yolov3.weights</li>
<li>yolov3.cfg</li>
<li>coco.names</li>
</ul>
<h3 id="caffe-yolov3"><a href="#caffe-yolov3" class="headerlink" title="caffe-yolov3"></a>caffe-yolov3</h3><p>files</p>
<ul>
<li>yolov3.caffemodel</li>
<li>yolov3.prototxt</li>
<li>coco.names</li>
<li><strong>yolov3-cpp.prototxt</strong></li>
<li><strong>yolov3-trt.prototxt</strong></li>
</ul>
<h4 id="yolov3-cpp-prototxt"><a href="#yolov3-cpp-prototxt" class="headerlink" title="yolov3-cpp.prototxt"></a>yolov3-cpp.prototxt</h4><p>compared with <code>yolov3.prototxt</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">layer &#123;</span><br><span class="line">    bottom: &quot;layer82-conv&quot;</span><br><span class="line">    bottom: &quot;layer94-conv&quot;</span><br><span class="line">    bottom: &quot;layer106-conv&quot;</span><br><span class="line">    type: &quot;Yolov3DetectionOutput&quot;</span><br><span class="line">    top: &quot;detection_out&quot;</span><br><span class="line">    name: &quot;detection_out&quot;</span><br><span class="line">    yolov3_detection_output_param &#123;</span><br><span class="line">        nms_threshold: 0.45</span><br><span class="line">        num_classes: 80</span><br><span class="line">        biases: 10</span><br><span class="line">        biases: 13</span><br><span class="line">        biases: 16</span><br><span class="line">        biases: 30</span><br><span class="line">        biases: 33</span><br><span class="line">        biases: 23</span><br><span class="line">        biases: 30</span><br><span class="line">        biases: 61</span><br><span class="line">        biases: 62</span><br><span class="line">        biases: 45</span><br><span class="line">        biases: 59</span><br><span class="line">        biases: 119</span><br><span class="line">        biases: 116</span><br><span class="line">        biases: 90</span><br><span class="line">        biases: 156</span><br><span class="line">        biases: 198</span><br><span class="line">        biases: 373</span><br><span class="line">        biases: 326</span><br><span class="line">        mask: 6</span><br><span class="line">        mask: 7</span><br><span class="line">        mask: 8</span><br><span class="line">        mask: 3</span><br><span class="line">        mask: 4</span><br><span class="line">        mask: 5</span><br><span class="line">        mask: 0</span><br><span class="line">        mask: 1</span><br><span class="line">        mask: 2</span><br><span class="line">        mask_group_num: 3</span><br><span class="line">        anchors_scale: 32</span><br><span class="line">        anchors_scale: 16</span><br><span class="line">        anchors_scale: 8</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Use <code>Yolov3DetectionOutput</code> layer with <code>caffe</code> (<code>Upsample</code>+<code>Yolov3DetectionOutput</code>)</p>
</blockquote>
<h4 id="yolov3-trt-prototxt"><a href="#yolov3-trt-prototxt" class="headerlink" title="yolov3-trt.prototxt"></a>yolov3-trt.prototxt</h4><p>see <a target="_blank" rel="noopener" href="https://github.com/lewes6369/TensorRT-Yolov3">yolov3-trt.prototxt</a><br>compared with <code>yolov3-cpp.prototxt</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">layer &#123;</span><br><span class="line">    bottom: &quot;layer85-conv&quot;</span><br><span class="line">    top: &quot;layer86-upsample&quot;</span><br><span class="line">    name: &quot;layer86-upsample&quot;</span><br><span class="line">    type: &quot;Upsample&quot;</span><br><span class="line">    #upsample_param &#123;</span><br><span class="line">    #    scale: 2</span><br><span class="line">    #&#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">layer &#123;</span><br><span class="line">    bottom: &quot;layer97-conv&quot;</span><br><span class="line">    top: &quot;layer98-upsample&quot;</span><br><span class="line">    name: &quot;layer98-upsample&quot;</span><br><span class="line">    type: &quot;Upsample&quot;</span><br><span class="line">    #upsample_param &#123;</span><br><span class="line">    #    scale: 2</span><br><span class="line">    #&#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">layer &#123;</span><br><span class="line">    bottom: &quot;layer82-conv&quot;</span><br><span class="line">    bottom: &quot;layer94-conv&quot;</span><br><span class="line">    bottom: &quot;layer106-conv&quot;</span><br><span class="line">    top: &quot;yolo-det&quot;</span><br><span class="line">    name: &quot;yolo-det&quot;</span><br><span class="line">    type: &quot;Yolo&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Use <code>YoloLayerPlugin</code> plugin with <code>TensorRT</code></p>
</blockquote>
<h2 id="caffe-extension-layer"><a href="#caffe-extension-layer" class="headerlink" title="caffe extension layer"></a>caffe extension layer</h2><h3 id="UpsampleLayer"><a href="#UpsampleLayer" class="headerlink" title="UpsampleLayer"></a>UpsampleLayer</h3><p>see <a target="_blank" rel="noopener" href="https://github.com/BVLC/caffe/pull/6384/commits/4d2400e7ae692b25f034f02ff8e8cd3621725f5c">caffe UpsampleLayer</a></p>
<p><img src="https://kezunlin.me/images/posts/635233-20181211161856766-524598750.png" alt="upsample"></p>
<h3 id="Yolov3DetectionOutputLayer"><a href="#Yolov3DetectionOutputLayer" class="headerlink" title="Yolov3DetectionOutputLayer"></a>Yolov3DetectionOutputLayer</h3><ul>
<li>proto: <a target="_blank" rel="noopener" href="https://github.com/eric612/Caffe-YOLOv3-Windows/blob/3fb79ed65f/src/caffe/proto/caffe.proto">caffe.proto</a></li>
<li>yolov3_detection_output_layer.hpp: <a target="_blank" rel="noopener" href="https://github.com/eric612/Caffe-YOLOv3-Windows/blob/3fb79ed65f/include/caffe/layers/yolov3_detection_output_layer.hpp">header</a></li>
<li>yolov3_detection_output_layer.cpp: <a target="_blank" rel="noopener" href="https://github.com/eric612/Caffe-YOLOv3-Windows/blob/3fb79ed65fb1e9f94a10636158b740b52f02058b/src/caffe/layers/yolov3_detection_output_layer.cpp">cpp</a></li>
</ul>
<h2 id="yolov3-with-tensorrt"><a href="#yolov3-with-tensorrt" class="headerlink" title="yolov3 with tensorrt"></a>yolov3 with tensorrt</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lewes6369/TensorRT-Yolov3">TensorRT-Yolov3</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/NVIDIA-AI-IOT/deepstream_reference_apps/tree/master/yolo">trt-yolov3</a></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/ChenYingpeng/caffe-yolov3">ChenYingpengcaffe-yolov3</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kezunlin/caffe-yolov3">my version</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/BVLC/caffe/pull/6384/commits/4d2400e7ae692b25f034f02ff8e8cd3621725f5c">caffe UpsampleLayer</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20181211: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/opencv-dnn-module/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/opencv-dnn-module/" class="post-title-link" itemprop="url">how to use opencv dnn module</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-07 10:18:00" itemprop="dateCreated datePublished" datetime="2018-12-07T10:18:00+08:00">2018-12-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/deep-learning/" itemprop="url" rel="index"><span itemprop="name">deep learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><p>support framework</p>
<blockquote>
<p><code>cv2.dnn.readNetFromCaffe</code>:  deploy.prototxt + iter_140000.caffemodel<br><code>cv2.dnn.readNetFromTensorflow</code>: model.pbtxt + model.pb.<br><code>cv2.dnn.readNetFromDarknet</code>: yolov3.cfg　+ yolov3.weights<br><code>cv2.dnn.readNetFromTorch</code>:  model.t7</p>
</blockquote>
<h3 id="readNetFromCaffe"><a href="#readNetFromCaffe" class="headerlink" title="readNetFromCaffe"></a>readNetFromCaffe</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># load our serialized face detector from disk</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;[INFO] loading face detector...&quot;</span>)</span><br><span class="line">protoPath = os.path.sep.join([args[<span class="string">&quot;detector&quot;</span>], <span class="string">&quot;deploy.prototxt&quot;</span>])</span><br><span class="line">modelPath = os.path.sep.join([args[<span class="string">&quot;detector&quot;</span>],</span><br><span class="line">    <span class="string">&quot;res10_300x300_ssd_iter_140000.caffemodel&quot;</span>])</span><br><span class="line">net = cv2.dnn.readNetFromCaffe(protoPath, modelPath)</span><br></pre></td></tr></table></figure>

<h3 id="readNetFromTensorflow"><a href="#readNetFromTensorflow" class="headerlink" title="readNetFromTensorflow"></a>readNetFromTensorflow</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># derive the paths to the Mask R-CNN weights and model configuration</span></span><br><span class="line">weightsPath = os.path.sep.join([args[<span class="string">&quot;mask_rcnn&quot;</span>],</span><br><span class="line">    <span class="string">&quot;frozen_inference_graph.pb&quot;</span>])</span><br><span class="line">configPath = os.path.sep.join([args[<span class="string">&quot;mask_rcnn&quot;</span>],</span><br><span class="line">    <span class="string">&quot;mask_rcnn_inception_v2_coco_2018_01_28.pbtxt&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># load our Mask R-CNN trained on the COCO dataset (90 classes)</span></span><br><span class="line"><span class="comment"># from disk</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;[INFO] loading Mask R-CNN from disk...&quot;</span>)</span><br><span class="line">net = cv2.dnn.readNetFromTensorflow(weightsPath, configPath)</span><br></pre></td></tr></table></figure>

<h3 id="readNetFromDarknet"><a href="#readNetFromDarknet" class="headerlink" title="readNetFromDarknet"></a>readNetFromDarknet</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># derive the paths to the YOLO weights and model configuration</span></span><br><span class="line">weightsPath = os.path.sep.join([args[<span class="string">&quot;yolo&quot;</span>], <span class="string">&quot;yolov3.weights&quot;</span>])</span><br><span class="line">configPath = os.path.sep.join([args[<span class="string">&quot;yolo&quot;</span>], <span class="string">&quot;yolov3.cfg&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># load our YOLO object detector trained on COCO dataset (80 classes)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;[INFO] loading YOLO from disk...&quot;</span>)</span><br><span class="line">net = cv2.dnn.readNetFromDarknet(configPath, weightsPath)</span><br></pre></td></tr></table></figure>

<h3 id="readNetFromTorch"><a href="#readNetFromTorch" class="headerlink" title="readNetFromTorch"></a>readNetFromTorch</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># load our serialized face embedding model from disk</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;[INFO] loading face recognizer...&quot;</span>)</span><br><span class="line">net = cv2.dnn.readNetFromTorch(args[<span class="string">&quot;embedding_model&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># load the neural style transfer model from disk</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;[INFO] loading style transfer model...&quot;</span>)</span><br><span class="line">net = cv2.dnn.readNetFromTorch(args[<span class="string">&quot;model&quot;</span>])</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.pyimagesearch.com/2018/09/24/opencv-face-recognition/">ssd caffe</a></li>
<li><a target="_blank" rel="noopener" href="https://www.pyimagesearch.com/2018/11/26/instance-segmentation-with-opencv/">maskrcnn tensorflow</a></li>
<li><a target="_blank" rel="noopener" href="https://www.pyimagesearch.com/2018/11/12/yolo-object-detection-with-opencv/">yolov3 darknet</a></li>
<li><a target="_blank" rel="noopener" href="https://www.pyimagesearch.com/2018/08/27/neural-style-transfer-with-opencv/">torch</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20181207: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/install-doxygen-on-ubuntu-16-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/install-doxygen-on-ubuntu-16-04/" class="post-title-link" itemprop="url">how to install doxygen on ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-05 17:22:00" itemprop="dateCreated datePublished" datetime="2018-12-05T17:22:00+08:00">2018-12-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="how-to-install-doxygen"><a href="#how-to-install-doxygen" class="headerlink" title="how to install doxygen"></a>how to install doxygen</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> apt-get install doxygen</span><br><span class="line">$ <span class="built_in">sudo</span> apt-get install graphviz</span><br></pre></td></tr></table></figure>

<h3 id="how-to-use-doxygen"><a href="#how-to-use-doxygen" class="headerlink" title="how to use doxygen"></a>how to use doxygen</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> path/to/yourproject</span><br></pre></td></tr></table></figure>

<p>generate a <code>Doxyfile</code> with </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ doxygen -g </span><br><span class="line"></span><br><span class="line">$ ll Doxyfile</span><br></pre></td></tr></table></figure>

<p>generate doc <code>html</code> and <code>latex</code> with </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doxygen Doxyfile</span><br></pre></td></tr></table></figure>

<p>output </p>
<pre><code>Searching for include files...
Searching for example files...
Searching for images...
Searching for dot files...
Searching for msc files...
Searching for dia files...
Searching for files to exclude
Searching INPUT for files to process...
...
</code></pre>
<h3 id="view-doxygen-result"><a href="#view-doxygen-result" class="headerlink" title="view doxygen result"></a>view doxygen result</h3><p>open <code>html/index.html</code> and view results</p>
<p><img src="https://kezunlin.me/images/posts/1864218-20191213113432558-864665208.png" alt="doxygen index.html"></p>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20181204: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">kezunlin</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">181</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">213</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kezunlin</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
