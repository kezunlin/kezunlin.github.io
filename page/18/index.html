<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"kezunlin.me","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Kezunlin&#39;s Blog">
<meta property="og:url" content="https://kezunlin.me/page/18/index.html">
<meta property="og:site_name" content="Kezunlin&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="kezunlin">
<meta property="article:tag" content="linux, c++, python, AI, LLM">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://kezunlin.me/page/18/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Kezunlin's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Kezunlin's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Kezunlin's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Live and Learn</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/gtest-quick-start-on-ubuntu-16-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/gtest-quick-start-on-ubuntu-16-04/" class="post-title-link" itemprop="url">compile gtest on ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-18 15:49:00" itemprop="dateCreated datePublished" datetime="2018-01-18T15:49:00+08:00">2018-01-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h2><ul>
<li><strong><a href="https://kezunlin.me/post/4a1427cf/">compile gtest on ubuntu 16.04</a></strong></li>
<li><a href="https://kezunlin.me/post/aca50ff8/">compile gtest on windows 10</a></li>
</ul>
<h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="apt-get"><a href="#apt-get" class="headerlink" title="apt-get"></a><del>apt-get</del></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install libgtest-dev</span><br><span class="line"><span class="built_in">cd</span> /usr/src/gtest <span class="comment"># only source files</span></span><br></pre></td></tr></table></figure>

<h3 id="compile"><a href="#compile" class="headerlink" title="compile"></a>compile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/google/googletest.git</span><br><span class="line">wget https://github.com/google/googletest/archive/release-1.8.0.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> googletest</span><br><span class="line"><span class="built_in">mkdir</span> build </span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake-gui ..</span><br><span class="line">make -j8 </span><br><span class="line"><span class="built_in">sudo</span> make install </span><br></pre></td></tr></table></figure>

<p>options:</p>
<pre><code>BUILD_SHARED_LIBS=ON
</code></pre>
<blockquote>
<p>install to <code>/usr/local/</code></p>
</blockquote>
<ul>
<li>for static library, we use <code>libgtest.a</code></li>
<li>for shared library, use use <code>ligbtest.so</code>.</li>
</ul>
<h3 id="gtest-config-cmake"><a href="#gtest-config-cmake" class="headerlink" title="gtest-config.cmake"></a>gtest-config.cmake</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># - Try to find GTEST</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The following variables are optionally searched for defaults</span></span><br><span class="line"><span class="comment">#  GTEST_ROOT_DIR:            Base directory where all GTEST components are found</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The following are set after configuration is done:</span></span><br><span class="line"><span class="comment">#  GTEST_FOUND</span></span><br><span class="line"><span class="comment">#  GTEST_INCLUDE_DIRS</span></span><br><span class="line"><span class="comment">#  GTEST_LIBRARIES</span></span><br><span class="line"><span class="comment">#  GTEST_LIBRARYRARY_DIRS</span></span><br><span class="line"></span><br><span class="line">include(FindPackageHandleStandardArgs)</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span>(GTEST_ROOT_DIR <span class="string">&quot;&quot;</span> CACHE PATH <span class="string">&quot;Folder contains Google gtest&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(WIN32)</span><br><span class="line">    find_path(GTEST_INCLUDE_DIR gtest/gtest.h</span><br><span class="line">        PATHS <span class="variable">$&#123;GTEST_ROOT_DIR&#125;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    find_path(GTEST_INCLUDE_DIR gtest/gtest.h</span><br><span class="line">        PATHS <span class="variable">$&#123;GTEST_ROOT_DIR&#125;</span>)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(MSVC)</span><br><span class="line">    find_library(GTEST_LIBRARY_RELEASE gtest</span><br><span class="line">        PATHS <span class="variable">$&#123;GTEST_ROOT_DIR&#125;</span></span><br><span class="line">        PATH_SUFFIXES Release)</span><br><span class="line">    find_library(GTEST_MAIN_LIBRARY_RELEASE gtest_main</span><br><span class="line">        PATHS <span class="variable">$&#123;GTEST_ROOT_DIR&#125;</span></span><br><span class="line">        PATH_SUFFIXES Release)</span><br><span class="line"></span><br><span class="line">    find_library(GTEST_LIBRARY_DEBUG gtest</span><br><span class="line">        PATHS <span class="variable">$&#123;GTEST_ROOT_DIR&#125;</span></span><br><span class="line">        PATH_SUFFIXES Debug)</span><br><span class="line">    find_library(GTEST_MAIN_LIBRARY_DEBUG gtest_main</span><br><span class="line">        PATHS <span class="variable">$&#123;GTEST_ROOT_DIR&#125;</span></span><br><span class="line">        PATH_SUFFIXES Debug)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">set</span>(GTEST_LIBRARY optimized <span class="variable">$&#123;GTEST_LIBRARY_RELEASE&#125;</span> <span class="variable">$&#123;GTEST_MAIN_LIBRARY_RELEASE&#125;</span> debug <span class="variable">$&#123;GTEST_LIBRARY_DEBUG&#125;</span> <span class="variable">$&#123;GTEST_MAIN_LIBRARY_DEBUG&#125;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    find_library(GTEST_LIBRARY gtest</span><br><span class="line">        PATHS <span class="variable">$&#123;GTEST_ROOT_DIR&#125;</span></span><br><span class="line">        PATH_SUFFIXES lib lib64)</span><br><span class="line"></span><br><span class="line">    find_library(GTEST_MAIN_LIBRARY gtest_main</span><br><span class="line">        PATHS <span class="variable">$&#123;GTEST_ROOT_DIR&#125;</span></span><br><span class="line">        PATH_SUFFIXES lib lib64)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line">find_package_handle_standard_args(GTEST DEFAULT_MSG GTEST_INCLUDE_DIR GTEST_LIBRARY GTEST_MAIN_LIBRARY)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(GTEST_FOUND)</span><br><span class="line">  <span class="built_in">set</span>(GTEST_INCLUDE_DIRS <span class="variable">$&#123;GTEST_INCLUDE_DIR&#125;</span>)</span><br><span class="line">  <span class="built_in">set</span>(GTEST_LIBRARIES <span class="variable">$&#123;GTEST_LIBRARY&#125;</span> <span class="variable">$&#123;GTEST_MAIN_LIBRARY&#125;</span>)</span><br><span class="line">  message(STATUS <span class="string">&quot;Found gtest    (include: <span class="variable">$&#123;GTEST_INCLUDE_DIRS&#125;</span>, library: <span class="variable">$&#123;GTEST_LIBRARIES&#125;</span>)&quot;</span>)</span><br><span class="line">  mark_as_advanced(GTEST_ROOT_DIR GTEST_LIBRARY_RELEASE GTEST_LIBRARY_DEBUG</span><br><span class="line">                                GTEST_MAIN_LIBRARY_RELEASE GTEST_MAIN_LIBRARY_DEBUG</span><br><span class="line">                                 GTEST_LIBRARY GTEST_MAIN_LIBRARY GTEST_INCLUDE_DIR)</span><br><span class="line">endif()</span><br></pre></td></tr></table></figure>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><h3 id="code"><a href="#code" class="headerlink" title="code"></a>code</h3><h4 id="whattotest-cpp"><a href="#whattotest-cpp" class="headerlink" title="whattotest.cpp"></a>whattotest.cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">squareRoot</span><span class="params">(<span class="type">const</span> <span class="type">double</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="type">double</span> b = <span class="built_in">sqrt</span>(a);</span><br><span class="line">    <span class="keyword">if</span>(b != b) &#123; <span class="comment">// nan check</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1.0</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sqrt</span>(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="tests-cpp"><a href="#tests-cpp" class="headerlink" title="tests.cpp"></a>tests.cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;whattotest.cpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">TEST</span>(SquareRootTest, PositiveNos) &#123; </span><br><span class="line">    <span class="built_in">ASSERT_EQ</span>(<span class="number">6</span>, <span class="built_in">squareRoot</span>(<span class="number">36.0</span>));</span><br><span class="line">    <span class="built_in">ASSERT_EQ</span>(<span class="number">18.0</span>, <span class="built_in">squareRoot</span>(<span class="number">324.0</span>));</span><br><span class="line">    <span class="built_in">ASSERT_EQ</span>(<span class="number">25.4</span>, <span class="built_in">squareRoot</span>(<span class="number">645.16</span>));</span><br><span class="line">    <span class="built_in">ASSERT_EQ</span>(<span class="number">0</span>, <span class="built_in">squareRoot</span>(<span class="number">0.0</span>));</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">TEST</span>(SquareRootTest, NegativeNos) &#123;</span><br><span class="line">    <span class="built_in">ASSERT_EQ</span>(<span class="number">-1.0</span>, <span class="built_in">squareRoot</span>(<span class="number">-15.0</span>));</span><br><span class="line">    <span class="built_in">ASSERT_EQ</span>(<span class="number">-1.0</span>, <span class="built_in">squareRoot</span>(<span class="number">-0.2</span>));</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span> </span>&#123;</span><br><span class="line">    testing::<span class="built_in">InitGoogleTest</span>(&amp;argc, argv);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">RUN_ALL_TESTS</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 2.6)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(MSVC) </span><br><span class="line">	SET(GTEST_ROOT <span class="string">&quot;C:/Program Files/gtest&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">	<span class="comment"># BOOST_THREAD_LIBRARY  /usr/lib/x86_64-linux-gnu/libpthread.so</span></span><br><span class="line">	MESSAGE( [Main] <span class="string">&quot; BOOST_THREAD_LIBRARY = <span class="variable">$&#123;BOOST_THREAD_LIBRARY&#125;</span>&quot;</span>)</span><br><span class="line">endif(MSVC)</span><br><span class="line"></span><br><span class="line">find_package(GTest REQUIRED) <span class="comment"># GTest 1.8.0</span></span><br><span class="line">include_directories(<span class="variable">$&#123;GTEST_INCLUDE_DIRS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Link runTests with what we want to test and the GTest and pthread library</span></span><br><span class="line">add_executable(runTests tests.cpp)</span><br><span class="line">target_link_libraries(runTests <span class="variable">$&#123;GTEST_LIBRARIES&#125;</span> <span class="variable">$&#123;BOOST_THREAD_LIBRARY&#125;</span>)</span><br><span class="line"><span class="comment">#target_link_libraries(runTests gtest pthread)</span></span><br></pre></td></tr></table></figure>

<h3 id="compile-1"><a href="#compile-1" class="headerlink" title="compile"></a>compile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build &amp;&amp; cmake-gui ..</span><br><span class="line">make -j8</span><br></pre></td></tr></table></figure>

<h3 id="run"><a href="#run" class="headerlink" title="run"></a>run</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./runTests</span><br></pre></td></tr></table></figure>

<h3 id="link-optional"><a href="#link-optional" class="headerlink" title="link (optional)"></a>link (optional)</h3><p>use <code>-lgtest</code> as linker flag and optionally, if you did not write your own test mainroutine, the explicit <code>-lgtest_main</code> flag.</p>
<p>gtest use pthread, so we need <code>-lpthread</code> as well.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-lgtest -lgtest_main -lpthread</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.eriksmistad.no/getting-started-with-google-test-on-ubuntu/">getting-started-with-google-test-on-ubuntu</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/google/googletest.git">googletest repo</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/bast/gtest-demo">gtest-demo</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/13513905/how-to-setup-googletest-as-a-shared-library-on-linux">setup-googletest-as-a-shared-library-on-linux</a></li>
<li><a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/latest/module/FindGTest.html">FindGTest</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20180118: created.</li>
<li>20180122: add shared library part.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/using-boost-date-time-to-get-time-in-millisecond-microsecond-level/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/using-boost-date-time-to-get-time-in-millisecond-microsecond-level/" class="post-title-link" itemprop="url">using boost.date_time to get time in millisecond microsecond level</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-18 14:37:00" itemprop="dateCreated datePublished" datetime="2018-01-18T14:37:00+08:00">2018-01-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><h3 id="format-flags"><a href="#format-flags" class="headerlink" title="format flags"></a>format flags</h3><p><code>second millisecond microsecond nanosecond</code></p>
<p>Format Flags</p>
<ul>
<li><p>%f<br>Fractional seconds are always used, even when their value is zero<br>“13:15:16.000000”</p>
</li>
<li><p>%F *<br>Fractional seconds are used only when their value is not zero.<br>“13:15:16”<br>“05:04:03.001234”</p>
</li>
</ul>
<h3 id="to-string"><a href="#to-string" class="headerlink" title="to string"></a>to string</h3><p>The Boost.Date_Time library provides the following <code>ptime</code> to <code>std::string</code> conversions within the <code>boost::posix_time</code> namespace:</p>
<ul>
<li><code>std::string to_simple_string(ptime)</code> returns a string in the form of <code>YYYY-mmm-DD HH:MM:SS.fffffffff</code> format where mmm is the three character month name.</li>
<li><code>std::string to_iso_string(ptime)</code> returns a string in the form of <code>YYYYMMDDTHHMMSS,fffffffff</code> where T is the date-time separator.</li>
<li><code>std::string to_iso_extended_string(ptime)</code> returns a string in the form of <code>YYYY-MM-DDTHH:MM:SS,fffffffff</code> where T is the date-time separator.</li>
</ul>
<h3 id="date-time-cpp"><a href="#date-time-cpp" class="headerlink" title="date_time.cpp"></a>date_time.cpp</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;boost/date_time/posix_time/posix_time.hpp&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;boost/date_time/gregorian/gregorian.hpp&gt;</span>  </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> boost::posix_time;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> boost::gregorian;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">second millisecond microsecond nanosecond</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Format Flags</span></span><br><span class="line"><span class="comment">%f</span></span><br><span class="line"><span class="comment">Fractional seconds are always used, even when their value is zero</span></span><br><span class="line"><span class="comment">&quot;13:15:16.000000&quot;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">%F *</span></span><br><span class="line"><span class="comment">Fractional seconds are used only when their value is not zero.</span></span><br><span class="line"><span class="comment">&quot;13:15:16&quot;</span></span><br><span class="line"><span class="comment">&quot;05:04:03.001234&quot;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function">std::string <span class="title">ptime_2_str_name</span><span class="params">(boost::posix_time::ptime now)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">	<span class="comment">// https://stackoverflow.com/questions/5018188/how-to-format-a-datetime-to-string-using-boost</span></span><br><span class="line">	<span class="comment">// for multiple use</span></span><br><span class="line">	</span><br><span class="line">	std::stringstream ss;</span><br><span class="line">	<span class="comment">//static std::locale loc(std::cout.getloc(), new time_facet(&quot;%Y%m%d_%H%M%S_%f&quot;));</span></span><br><span class="line">	<span class="function"><span class="type">static</span> std::locale <span class="title">loc</span><span class="params">(ss.getloc(), <span class="keyword">new</span> time_facet(<span class="string">&quot;%Y%m%d_%H%M%S_%f&quot;</span>))</span></span>;</span><br><span class="line">	ss.<span class="built_in">imbue</span>(loc);</span><br><span class="line">	ss &lt;&lt; now;</span><br><span class="line">	<span class="keyword">return</span> ss.<span class="built_in">str</span>(); <span class="comment">// 20180118_111501_208797</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">std::string <span class="title">str_name_2_iso_format</span><span class="params">(std::string str_name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	20180118_111501_208797 ===&gt; 20180118T111501.208797===&gt;from_iso_string===&gt;ptime</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; &quot;time length: &quot; &lt;&lt; str_ptime.length() &lt;&lt; endl; //22</span></span><br><span class="line">	<span class="type">size_t</span> first_pos = str_name.<span class="built_in">find_first_of</span>(<span class="string">&#x27;_&#x27;</span>);</span><br><span class="line">	<span class="type">size_t</span> second_pos = str_name.<span class="built_in">find_last_of</span>(<span class="string">&#x27;_&#x27;</span>);</span><br><span class="line">	str_name[first_pos] = <span class="string">&#x27;T&#x27;</span>;</span><br><span class="line">	str_name[second_pos] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">	<span class="keyword">return</span> str_name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ptime <span class="title">from_name_string</span><span class="params">(std::string str_ptime)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	std::string str_iso_ptime = <span class="built_in">str_name_2_iso_format</span>(str_ptime);</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">from_iso_string</span>(str_iso_ptime);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">ptime <span class="title">p1</span><span class="params">(date(<span class="number">2001</span>, <span class="number">1</span>, <span class="number">1</span>), hours(<span class="number">1</span>))</span></span>;               </span><br><span class="line">	ptime p2 = <span class="built_in">time_from_string</span>(<span class="string">&quot;2002-2-2 02:00:00.999888&quot;</span>); <span class="comment">// fraction part: 6 bits  </span></span><br><span class="line">	ptime p3 = <span class="built_in">from_iso_string</span>(<span class="string">&quot;20030303T031233.777666&quot;</span>);    <span class="comment">// fraction part: 6 bits   </span></span><br><span class="line">	ptime p4 = second_clock::<span class="built_in">local_time</span>();                   <span class="comment">// in second              </span></span><br><span class="line">	ptime p5 = microsec_clock::<span class="built_in">universal_time</span>();             <span class="comment">// UTC World time in millisecond,microsecond       </span></span><br><span class="line">	ptime p6 = microsec_clock::<span class="built_in">local_time</span>();                 <span class="comment">// UTC local time in millisecond,microsecond           </span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; p1 &lt;&lt; endl</span><br><span class="line">		&lt;&lt; p2 &lt;&lt; endl</span><br><span class="line">		&lt;&lt; p3 &lt;&lt; endl</span><br><span class="line">		&lt;&lt; p4 &lt;&lt; endl</span><br><span class="line">		&lt;&lt; p5 &lt;&lt; endl</span><br><span class="line">		&lt;&lt; p6 &lt;&lt; endl &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	* date()</span></span><br><span class="line"><span class="comment">	* time_of_day()</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	date d = p<span class="number">1.</span><span class="built_in">date</span>();</span><br><span class="line">	time_duration td = p<span class="number">1.</span><span class="built_in">time_of_day</span>();</span><br><span class="line">	cout &lt;&lt; d &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; td &lt;&lt; endl &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="built_in">to_simple_string</span>(p2) &lt;&lt; endl               <span class="comment">//YYYY-mmm-DD HH:MM:SS.ffffff  </span></span><br><span class="line">		&lt;&lt; <span class="built_in">to_iso_string</span>(p2) &lt;&lt; endl               <span class="comment">//YYYYMMDDTHHMMSS,ffffff  </span></span><br><span class="line">		&lt;&lt; <span class="built_in">to_iso_extended_string</span>(p2) &lt;&lt; endl;     <span class="comment">//YYYY-MM-DDTHH:MM:SS,ffffff  </span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;User defined format time:&quot;</span> &lt;&lt; endl;</span><br><span class="line">	std::string str_name = <span class="built_in">ptime_2_str_name</span>(p6);</span><br><span class="line">	ptime p7 = <span class="built_in">from_name_string</span>(str_name);</span><br><span class="line">	cout &lt;&lt;<span class="string">&quot;                      p6: &quot;</span>&lt;&lt; <span class="built_in">ptime_2_str_name</span>(p6) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt;<span class="string">&quot;p7 from String2Ptime(p6): &quot;</span>&lt;&lt; <span class="built_in">ptime_2_str_name</span>(p7) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>




<h3 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Specify the minimum version for CMake</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Project&#x27;s name</span></span><br><span class="line"><span class="keyword">project</span>(date_time)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the output folder where your program will be created</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_BINARY_DIR <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/bin)</span><br><span class="line"><span class="keyword">set</span>(EXECUTABLE_OUTPUT_PATH <span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>)</span><br><span class="line"><span class="keyword">set</span>(LIBRARY_OUTPUT_PATH <span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#find_package(Boost 1.5.8 REQUIRED COMPONENTS date_time system filesystem iostreams)</span></span><br><span class="line"><span class="keyword">find_package</span>(Boost <span class="number">1.5</span>.<span class="number">8</span> REQUIRED COMPONENTS date_time)</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;Boost_INCLUDE_DIRS&#125;</span>)</span><br><span class="line"><span class="keyword">link_directories</span>(<span class="variable">$&#123;Boost_LIBRARY_DIRS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># The following folder will be included</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="string">&quot;$&#123;PROJECT_SOURCE_DIR&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(date_time <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/date_time.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(date_time <span class="variable">$&#123;Boost_LIBRARIES&#125;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="run-and-output"><a href="#run-and-output" class="headerlink" title="run and output"></a>run and output</h2><p>compile program and run </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line">make </span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> bin</span><br><span class="line">./date_time</span><br></pre></td></tr></table></figure>

<p>output </p>
<pre><code>2001-Jan-01 01:00:00
2002-Feb-02 02:00:00.999888
2003-Mar-03 03:12:33.777666
2018-Jan-18 15:20:47
2018-Jan-18 07:20:47.815415
2018-Jan-18 15:20:47.815419

2001-Jan-01, 01:00:00

2002-Feb-02 02:00:00.999888
20020202T020000.999888
2002-02-02T02:00:00.999888
User defined format time:
                      p6: 20180118_152047_815419
p7 from String2Ptime(p6): 20180118_152047_815419
</code></pre>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/5018188/how-to-format-a-datetime-to-string-using-boost">how-to-format-a-datetime-to-string-using-boost</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/22975077/how-to-convert-a-boostptime-to-string">boost ptime tostring</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20180118: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/Install-and-Configure-PCL-on-Ubuntu-16-04-from-source/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/Install-and-Configure-PCL-on-Ubuntu-16-04-from-source/" class="post-title-link" itemprop="url">Part-3: Install and Configure PCL 1.8.1 with vtk qt support on Ubuntu 16.04 from source</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-09 09:49:00" itemprop="dateCreated datePublished" datetime="2018-01-09T09:49:00+08:00">2018-01-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h2><ul>
<li><a href="https://kezunlin.me/post/91842b71/">Part-1: Install and Configure Qt5 on Ubuntu 16.04</a></li>
<li><a href="https://kezunlin.me/post/b901735e/">Part-2: Install and Configure VTK 8.1.0 from source with Qt5 on Ubuntu 16.04</a></li>
<li><a href="https://kezunlin.me/post/137aa5fc/"><strong>Part-3: Install and Configure PCL 1.8.1 with vtk qt support on Ubuntu 16.04 from source</strong></a></li>
<li><a href="https://kezunlin.me/post/2d809f92/">Part-4: Install and Configure PCL 1.8.1 with vtk qt support on windows 10 from source</a></li>
</ul>
<h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><ul>
<li>qt: 5.7.0</li>
<li>qmake: 3.0</li>
<li>qtcreator: 3.5.1</li>
<li>vtk: 8.1.0 (source)</li>
<li>pcl :1.8.1 (source)</li>
</ul>
<h3 id="Setup-Prerequisites"><a href="#Setup-Prerequisites" class="headerlink" title="Setup Prerequisites"></a>Setup Prerequisites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install git build-essential linux-libc-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install cmake cmake-gui </span><br><span class="line"><span class="built_in">sudo</span> apt-get install libusb-dev libudev-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install mpi-default-dev openmpi-bin openmpi-common </span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get install libpcap-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libflann1.8 libflann-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libeigen3-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libopenni2-dev</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libqhull7 libqhull-dev </span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get install freeglut3-dev pkg-config</span><br><span class="line"><span class="built_in">sudo</span> apt-get install libxmu-dev libxi-dev </span><br><span class="line"><span class="built_in">sudo</span> apt-get install mono-complete</span><br><span class="line"><span class="built_in">sudo</span> apt-get install openjdk-8-jdk openjdk-8-jre</span><br></pre></td></tr></table></figure>

<h4 id="metslib"><a href="#metslib" class="headerlink" title="metslib"></a>metslib</h4><p>for cmake error:</p>
<pre><code>no metslib found.
</code></pre>
<p>fix by</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.coin-or.org/download/source/metslib/metslib-0.5.3.tgz</span><br><span class="line">tar xzvf metslib-0.5.3.tgz</span><br><span class="line"><span class="built_in">cd</span> metslib-0.5.3</span><br><span class="line">./configure</span><br><span class="line">make </span><br><span class="line"><span class="built_in">sudo</span> make install</span><br></pre></td></tr></table></figure>

<h4 id="glxinfo"><a href="#glxinfo" class="headerlink" title="glxinfo"></a>glxinfo</h4><p>install </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install mesa-utils</span><br><span class="line">glxinfo </span><br></pre></td></tr></table></figure>

<p>possible error</p>
<p>  X Error of failed request:  BadRequest (invalid request code or no such operation)<br>  Major opcode of failed request:  154 (GLX)<br>  Minor opcode of failed request:  34 ()<br>  Serial number of failed request:  34<br>  Current serial number in output stream:  33</p>
<p>fix,make sure NVIDIA drivers are installed successfully and no conflict.<br>check display OpenGL info</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ glxinfo | grep OpenGL</span><br><span class="line"></span><br><span class="line">OpenGL vendor string: NVIDIA Corporation</span><br><span class="line">OpenGL renderer string: GeForce GTX 1060/PCIe/SSE2</span><br><span class="line">OpenGL core profile version string: 4.5.0 NVIDIA 384.90</span><br><span class="line">OpenGL core profile shading language version string: 4.50 NVIDIA</span><br><span class="line">OpenGL core profile context flags: (none)</span><br><span class="line">OpenGL core profile profile mask: core profile</span><br><span class="line">OpenGL core profile extensions:</span><br><span class="line">OpenGL version string: 4.5.0 NVIDIA 384.90</span><br><span class="line">OpenGL shading language version string: 4.50 NVIDIA</span><br><span class="line">OpenGL context flags: (none)</span><br><span class="line">OpenGL profile mask: (none)</span><br><span class="line">OpenGL extensions:</span><br><span class="line">OpenGL ES profile version string: OpenGL ES 3.2 NVIDIA 384.90</span><br><span class="line">OpenGL ES profile shading language version string: OpenGL ES GLSL ES 3.20</span><br><span class="line">OpenGL ES profile extensions:</span><br></pre></td></tr></table></figure>

<p>It means we use OpenGL version 4.5.0 for NVIDIA display.</p>
<p>Or by <code>nvidia-settings</code>, NVIDIA X Server Settings–&gt; X Screen 0 –&gt; OpenGL&#x2F;GLX Information.</p>
<h3 id="compile"><a href="#compile" class="headerlink" title="compile"></a>compile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/PointCloudLibrary/pcl/archive/pcl-1.8.1.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> pcl</span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake-gui ..</span><br></pre></td></tr></table></figure>

<p>with options</p>
<pre><code> QT_USE_FILE /home/kezunlin/program/pcl-1.8.1/build/use-qt5.cmake
 
 VTK_DIR  /usr/local/lib/cmake/vtk-8.1
 
 CMAKE_BUILD_TYPE       Release
 CMAKE_CONFIGURATION_TYPES Release
 CMAKE_INSTALL_PREFIX  /usr/local
 
 PCL_SHARED_LIBS       ON
 PCL_QT_VERSION        5
 PCL_ENABLE_SSE        ON
 
 Build_visualization ON
 Build_apps ON
 Build_examples OFF # error may occur
</code></pre>
<blockquote>
<p>Using CPU native flags for SSE optimization:  <code>-march=native</code></p>
</blockquote>
<p>make and install </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># it may take several minutes, wait ...</span></span><br><span class="line">make -j8</span><br><span class="line"><span class="built_in">sudo</span> make -j8 install</span><br></pre></td></tr></table></figure>

<blockquote>
<p>cmake install to <code>/usr/local/bin</code>, <code>/usr/local/lib/</code>, <code>/usr/local/include/pcl-1.8</code><br><code>PCL_DIR</code> will be <code>/usr/local/share/pcl-1.8</code></p>
</blockquote>
<h4 id="error-for-example"><a href="#error-for-example" class="headerlink" title="error for example"></a>error for example</h4><pre><code>/home/kezunlin/program/pcl-1.8.1/examples/segmentation/example_cpc_segmentation.cpp:493:17: error: ‘class vtkUnsignedCharArray’ has no member named ‘InsertNextTupleValue’
         colors-&gt;InsertNextTupleValue (color);
</code></pre>
<p>so cmake with options </p>
<pre><code>Build_examples OFF
</code></pre>
<h3 id="Test-pcl-viewer"><a href="#Test-pcl-viewer" class="headerlink" title="Test pcl_viewer"></a>Test pcl_viewer</h3><p>test <code>pcl_viewer</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/pcl_viewer ~/program/pcl-1.8.1/test/car6.pcd</span><br></pre></td></tr></table></figure>

<p>Success.</p>
<p><img src="https://kezunlin.me/images/posts/635233-20180105160000315-1719986018.png" alt="car"></p>
<blockquote>
<p>Tips: screen snapshot by <code>gnome-screenshot -a</code>.</p>
</blockquote>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="Cloud-Viewer"><a href="#Cloud-Viewer" class="headerlink" title="Cloud Viewer"></a>Cloud Viewer</h2><h3 id="cloud-viewer-cpp"><a href="#cloud-viewer-cpp" class="headerlink" title="cloud_viewer.cpp"></a>cloud_viewer.cpp</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pcl/visualization/cloud_viewer.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pcl/io/io.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pcl/io/pcd_io.h&gt;</span></span></span><br><span class="line">    </span><br><span class="line"><span class="type">int</span> user_data;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="type">void</span> </span></span><br><span class="line"><span class="function"><span class="title">viewerOneOff</span> <span class="params">(pcl::visualization::PCLVisualizer&amp; viewer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    viewer.<span class="built_in">setBackgroundColor</span> (<span class="number">1.0</span>, <span class="number">0.5</span>, <span class="number">1.0</span>);</span><br><span class="line">    pcl::PointXYZ o;</span><br><span class="line">    o.x = <span class="number">1.0</span>;</span><br><span class="line">    o.y = <span class="number">0</span>;</span><br><span class="line">    o.z = <span class="number">0</span>;</span><br><span class="line">    viewer.<span class="built_in">addSphere</span> (o, <span class="number">0.25</span>, <span class="string">&quot;sphere&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;i only run once&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="type">void</span> </span></span><br><span class="line"><span class="function"><span class="title">viewerPsycho</span> <span class="params">(pcl::visualization::PCLVisualizer&amp; viewer)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">unsigned</span> count = <span class="number">0</span>;</span><br><span class="line">    std::stringstream ss;</span><br><span class="line">    ss &lt;&lt; <span class="string">&quot;Once per viewer loop: &quot;</span> &lt;&lt; count++;</span><br><span class="line">    viewer.<span class="built_in">removeShape</span> (<span class="string">&quot;text&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    viewer.<span class="built_in">addText</span> (ss.<span class="built_in">str</span>(), <span class="number">200</span>, <span class="number">300</span>, <span class="string">&quot;text&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//<span class="doctag">FIXME:</span> possible race condition here:</span></span><br><span class="line">    user_data++;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="type">int</span> </span></span><br><span class="line"><span class="function"><span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// car6 x y z</span></span><br><span class="line">    <span class="comment">// colored_cloud x y z rbga</span></span><br><span class="line">    pcl::PointCloud&lt;pcl::PointXYZRGBA&gt;::<span class="function">Ptr <span class="title">cloud</span> <span class="params">(<span class="keyword">new</span> pcl::PointCloud&lt;pcl::PointXYZRGBA&gt;)</span></span>;</span><br><span class="line">    pcl::io::<span class="built_in">loadPCDFile</span> (<span class="string">&quot;colored_cloud.pcd&quot;</span>, *cloud);</span><br><span class="line">    </span><br><span class="line">    pcl::<span class="function">visualization::CloudViewer <span class="title">viewer</span><span class="params">(<span class="string">&quot;Cloud Viewer&quot;</span>)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//blocks until the cloud is actually rendered</span></span><br><span class="line">    viewer.<span class="built_in">showCloud</span>(cloud);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//use the following functions to get access to the underlying more advanced/powerful</span></span><br><span class="line">    <span class="comment">//PCLVisualizer</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//This will only get called once</span></span><br><span class="line">    viewer.<span class="built_in">runOnVisualizationThreadOnce</span> (viewerOneOff);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//This will get called once per visualization iteration</span></span><br><span class="line">    viewer.<span class="built_in">runOnVisualizationThread</span> (viewerPsycho);</span><br><span class="line">    <span class="keyword">while</span> (!viewer.<span class="built_in">wasStopped</span> ())</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="comment">//you can also do cool processing here</span></span><br><span class="line">    <span class="comment">//<span class="doctag">FIXME:</span> Note that this is running in a separate thread from viewerPsycho</span></span><br><span class="line">    <span class="comment">//and you should guard against race conditions yourself...</span></span><br><span class="line">    user_data++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">http://pointclouds.org/documentation/tutorials/cloud_viewer.php</span></span><br><span class="line"><span class="comment">http://pointclouds.org/documentation/tutorials/pcl_visualizer.php</span></span><br><span class="line"><span class="comment">http://docs.pointclouds.org/1.7.0/structpcl_1_1_point_x_y_z_r_g_b.html</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 2.8 FATAL_ERROR)</span><br><span class="line"></span><br><span class="line">project(cloud_viewer)</span><br><span class="line"></span><br><span class="line"><span class="comment"># set bin folder</span></span><br><span class="line"><span class="built_in">set</span>(CMAKE_BINARY_DIR <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/bin)</span><br><span class="line"><span class="built_in">set</span>(EXECUTABLE_OUTPUT_PATH <span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>)</span><br><span class="line"><span class="built_in">set</span>(LIBRARY_OUTPUT_PATH <span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>)</span><br><span class="line"></span><br><span class="line">find_package(PCL 1.8.1 REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="comment">#message( [***] $&#123;PCL_INCLUDE_DIRS&#125;)</span></span><br><span class="line"><span class="comment">#message( [***] $&#123;PCL_LIBRARY_DIRS&#125;)</span></span><br><span class="line"><span class="comment">#message( [***] $&#123;PCL_DEFINITIONS&#125;)</span></span><br><span class="line"><span class="comment">#message( [***] $&#123;PCL_LIBRARIES&#125;)</span></span><br><span class="line"></span><br><span class="line">include_directories(<span class="variable">$&#123;PCL_INCLUDE_DIRS&#125;</span>)</span><br><span class="line">link_directories(<span class="variable">$&#123;PCL_LIBRARY_DIRS&#125;</span>)</span><br><span class="line">add_definitions(<span class="variable">$&#123;PCL_DEFINITIONS&#125;</span>)</span><br><span class="line"></span><br><span class="line">add_executable (cloud_viewer cloud_viewer.cpp)</span><br><span class="line">target_link_libraries (cloud_viewer <span class="variable">$&#123;PCL_LIBRARIES&#125;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="compile-1"><a href="#compile-1" class="headerlink" title="compile"></a>compile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build </span><br><span class="line">cmake ..</span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<h3 id="run-demo"><a href="#run-demo" class="headerlink" title="run demo"></a>run demo</h3><p>bin folder</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ tree bin/</span><br><span class="line"></span><br><span class="line">bin/</span><br><span class="line">├── cloud_viewer</span><br><span class="line">└── colored_cloud.pcd</span><br><span class="line"></span><br><span class="line">0 directories, 2 files</span><br></pre></td></tr></table></figure>

<p>run demo</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cloud_viewer</span><br></pre></td></tr></table></figure>

<h2 id="Code-Example"><a href="#Code-Example" class="headerlink" title="Code Example"></a>Code Example</h2><blockquote>
<p>see <a href="https://kezunlin.me/post/2d809f92/">Part-4: Install and Configure PCL 1.8.1 with vtk qt support on windows 10 from source</a></p>
</blockquote>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a target="_blank" rel="noopener" href="http://pointclouds.org/documentation/tutorials/compiling_pcl_posix.php#compiling-pcl-posix">compile pcl on posix</a></li>
<li><a target="_blank" rel="noopener" href="https://larrylisky.com/2016/11/03/point-cloud-library-on-ubuntu-16-04-lts/">pcl on ubuntu 16.04</a></li>
<li><a target="_blank" rel="noopener" href="http://www.jfyang.com/wordpress/?cat=5">compile pcl on windows</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Microsoft/vcpkg/">vcpkg</a></li>
</ul>
<p>for windows</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://pointclouds.org/documentation/tutorials/compiling_pcl_windows.php">compiling pcl on windows</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/PointCloudLibrary/pcl/blob/master/doc/tutorials/content/compiling_pcl_dependencies_windows.rst">compiling pcl dependencies on windows</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20180105: created.</li>
<li>20180227: rewrite pcl compile part.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/Guide-to-compile-VTK-with-Qt-on-Ubuntu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/Guide-to-compile-VTK-with-Qt-on-Ubuntu/" class="post-title-link" itemprop="url">Part-2: Install and Configure VTK 8.1.0 from source with Qt5 on Ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-08 20:45:00" itemprop="dateCreated datePublished" datetime="2018-01-08T20:45:00+08:00">2018-01-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h2><ul>
<li><a href="https://kezunlin.me/post/91842b71/">Part-1: Install and Configure Qt5 on Ubuntu 16.04</a></li>
<li><a href="https://kezunlin.me/post/b901735e/"><strong>Part-2: Install and Configure VTK 8.1.0 from source with Qt5 on Ubuntu 16.04</strong></a></li>
<li><a href="https://kezunlin.me/post/137aa5fc/">Part-3: Install and Configure PCL 1.8.1 with vtk qt support on Ubuntu 16.04 from source</a></li>
<li><a href="https://kezunlin.me/post/2d809f92/">Part-4: Install and Configure PCL 1.8.1 with vtk qt support on windows 10 from source</a></li>
</ul>
<h2 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h2><ul>
<li>qt: 5.7.0</li>
<li>qmake: 3.0</li>
<li>qtcreator: 3.5.1</li>
<li>vtk: 8.1.0  (from source)</li>
</ul>
<h3 id="install-qt57"><a href="#install-qt57" class="headerlink" title="install qt57"></a>install qt57</h3><p>see <a href="https://kezunlin.me/post/91842b71/"><strong>Part-1: Install and Configure Qt5 on Ubuntu 16.04</strong></a></p>
<blockquote>
<p>install qt57 and qtcreator.</p>
</blockquote>
<h3 id="install-vtk"><a href="#install-vtk" class="headerlink" title="install vtk"></a>install vtk</h3><h4 id="download-source"><a href="#download-source" class="headerlink" title="download source"></a>download source</h4><p>Download vtk source</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.vtk.org/files/release/8.1/VTK-8.1.0.tar.gz</span><br><span class="line">wget https://www.vtk.org/files/release/8.1/VTKData-8.1.0.tar.gz</span><br></pre></td></tr></table></figure>

<p>integrate VTK with Qt for a pretty graphical user interface, we need to turn on some options.</p>
<h4 id="configure-vtk-with-qt"><a href="#configure-vtk-with-qt" class="headerlink" title="configure vtk with qt"></a>configure vtk with qt</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> VTK-8.1.0</span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake-gui ..</span><br></pre></td></tr></table></figure>

<p>with options:</p>
<pre><code>VTK_Group_Qt       ON
VTK_QT_VERSION     5 # default
QT5_DIR            /opt/qt/5.7/gcc_64/lib/cmake/Qt5

VTK_RENDERING_BACKEND OpenGL2 # default
BUILD_SHARED_LIBS  ON
CMAKE_BUILD_TYPE   Release
CMAKE_INSTALL_PREFIX /usr/local
</code></pre>
<blockquote>
<p>set <code>QT5_Dir</code> to <code>/opt/qt/5.7/gcc_64/lib/cmake/Qt5</code></p>
</blockquote>
<h4 id="download-MD5-VTKData"><a href="#download-MD5-VTKData" class="headerlink" title="download MD5 VTKData"></a>download MD5 VTKData</h4><p>tar <code>VTKData-8.1.0.tar.gz</code> and copy <code>MD5</code> to <code>VTK-8.1.0/build/ExternalData/Objects/MD5</code></p>
<h4 id="make-and-install"><a href="#make-and-install" class="headerlink" title="make and install"></a>make and install</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make -j8</span><br><span class="line"><span class="built_in">sudo</span> make -j8 install</span><br></pre></td></tr></table></figure>

<blockquote>
<p>install to <code>/usr/local/include/vtk-8.1</code> and <code>/usr/local/lib/cmake/vtk-8.1</code></p>
</blockquote>
<h4 id="install-QVTKWidget-plugin"><a href="#install-QVTKWidget-plugin" class="headerlink" title="install QVTKWidget plugin"></a>install QVTKWidget plugin</h4><ol>
<li>copy <code>libQVTKWidgetPlugin.so</code> to<br>install path: <code>/usr/lib/x86_64-linux-gnu/qt5/plugins/designer</code></li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> build/lib</span><br><span class="line"><span class="built_in">ls</span> -al libQVTKWidgetPlugin.so </span><br><span class="line"></span><br><span class="line"><span class="comment"># copy to qt creator</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> libQVTKWidgetPlugin.so /usr/lib/x86_64-linux-gnu/qt5/plugins/designer </span><br></pre></td></tr></table></figure>

<ol start="2">
<li>now list designer plugins</li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /usr/lib/x86_64-linux-gnu/qt5/plugins/designer</span><br><span class="line">libqquickwidget.so  libQVTKWidgetPlugin.so  libqwebview.so</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>if we start <code>qtcreator</code> we will see an <code>QVTKWidget</code> at the bottom of <code>VTK</code> container of <code>Design</code> layout.</li>
</ol>
<p><img src="https://kezunlin.me/images/posts/635233-20180109102359785-330027676.png" alt="QVTKWidget for qtcreator"></p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h2 id="VTK-Example"><a href="#VTK-Example" class="headerlink" title="VTK Example"></a>VTK Example</h2><h3 id="CylinderRenderingProperties-cpp"><a href="#CylinderRenderingProperties-cpp" class="headerlink" title="CylinderRenderingProperties.cpp"></a>CylinderRenderingProperties.cpp</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkCylinderSource.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkPolyDataMapper.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkActor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkRenderer.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkRenderWindow.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkRenderWindowInteractor.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkProperty.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkCamera.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vtkSmartPointer.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span>, <span class="type">char</span> *[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// This creates a polygonal cylinder model with eight circumferential facets</span></span><br><span class="line">  <span class="comment">// (i.e, in practice an octagonal prism).</span></span><br><span class="line">  vtkSmartPointer&lt;vtkCylinderSource&gt; cylinder =</span><br><span class="line">    vtkSmartPointer&lt;vtkCylinderSource&gt;::<span class="built_in">New</span>();</span><br><span class="line">  cylinder-&gt;<span class="built_in">SetResolution</span>(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// The mapper is responsible for pushing the geometry into the graphics library.</span></span><br><span class="line">  <span class="comment">// It may also do color mapping, if scalars or other attributes are defined.</span></span><br><span class="line">  vtkSmartPointer&lt;vtkPolyDataMapper&gt; cylinderMapper =</span><br><span class="line">    vtkSmartPointer&lt;vtkPolyDataMapper&gt;::<span class="built_in">New</span>();</span><br><span class="line">  cylinderMapper-&gt;<span class="built_in">SetInputConnection</span>(cylinder-&gt;<span class="built_in">GetOutputPort</span>());</span><br><span class="line"></span><br><span class="line">  <span class="comment">// The actor is a grouping mechanism: besides the geometry (mapper), it</span></span><br><span class="line">  <span class="comment">// also has a property, transformation matrix, and/or texture map.</span></span><br><span class="line">  <span class="comment">// Here we set its color and rotate it around the X and Y axes.</span></span><br><span class="line">  vtkSmartPointer&lt;vtkActor&gt; cylinderActor =</span><br><span class="line">    vtkSmartPointer&lt;vtkActor&gt;::<span class="built_in">New</span>();</span><br><span class="line">  cylinderActor-&gt;<span class="built_in">SetMapper</span>(cylinderMapper);</span><br><span class="line">  cylinderActor-&gt;<span class="built_in">GetProperty</span>()-&gt;<span class="built_in">SetColor</span>(<span class="number">1.0000</span>, <span class="number">0.3882</span>, <span class="number">0.2784</span>);</span><br><span class="line">  cylinderActor-&gt;<span class="built_in">RotateX</span>(<span class="number">30.0</span>);</span><br><span class="line">  cylinderActor-&gt;<span class="built_in">RotateY</span>(<span class="number">-45.0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// The renderer generates the image</span></span><br><span class="line">  <span class="comment">// which is then displayed on the render window.</span></span><br><span class="line">  <span class="comment">// It can be thought of as a scene to which the actor is added</span></span><br><span class="line">  vtkSmartPointer&lt;vtkRenderer&gt; renderer =</span><br><span class="line">    vtkSmartPointer&lt;vtkRenderer&gt;::<span class="built_in">New</span>();</span><br><span class="line">  renderer-&gt;<span class="built_in">AddActor</span>(cylinderActor);</span><br><span class="line">  renderer-&gt;<span class="built_in">SetBackground</span>(<span class="number">0.1</span>, <span class="number">0.2</span>, <span class="number">0.4</span>);</span><br><span class="line">  <span class="comment">// Zoom in a little by accessing the camera and invoking its &quot;Zoom&quot; method.</span></span><br><span class="line">  renderer-&gt;<span class="built_in">ResetCamera</span>();</span><br><span class="line">  renderer-&gt;<span class="built_in">GetActiveCamera</span>()-&gt;<span class="built_in">Zoom</span>(<span class="number">1.5</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// The render window is the actual GUI window</span></span><br><span class="line">  <span class="comment">// that appears on the computer screen</span></span><br><span class="line">  vtkSmartPointer&lt;vtkRenderWindow&gt; renderWindow =</span><br><span class="line">    vtkSmartPointer&lt;vtkRenderWindow&gt;::<span class="built_in">New</span>();</span><br><span class="line">  renderWindow-&gt;<span class="built_in">SetSize</span>(<span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">  renderWindow-&gt;<span class="built_in">AddRenderer</span>(renderer);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// The render window interactor captures mouse events</span></span><br><span class="line">  <span class="comment">// and will perform appropriate camera or actor manipulation</span></span><br><span class="line">  <span class="comment">// depending on the nature of the events.</span></span><br><span class="line">  vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor =</span><br><span class="line">    vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::<span class="built_in">New</span>();</span><br><span class="line">  renderWindowInteractor-&gt;<span class="built_in">SetRenderWindow</span>(renderWindow);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// This starts the event loop and as a side effect causes an initial render.</span></span><br><span class="line">  renderWindowInteractor-&gt;<span class="built_in">Start</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 2.8)</span><br><span class="line"> </span><br><span class="line">PROJECT(CylinderRenderingProperties)</span><br><span class="line"> </span><br><span class="line">find_package(VTK REQUIRED)</span><br><span class="line">include(<span class="variable">$&#123;VTK_USE_FILE&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># /usr/local/lib/cmake/vtk-8.0/UseVTK.cmake</span></span><br><span class="line"><span class="comment"># C:/Program Files/PCL 1.8.1/3rdParty/VTK/lib/cmake/vtk-8.0/UseVTK.cmake</span></span><br><span class="line"></span><br><span class="line">message ([vtk] <span class="variable">$&#123;VTK_LIBRARIES&#125;</span>)</span><br><span class="line"></span><br><span class="line">add_executable(CylinderRenderingProperties MACOSX_BUNDLE CylinderRenderingProperties.cxx )</span><br><span class="line"> </span><br><span class="line">target_link_libraries(CylinderRenderingProperties <span class="variable">$&#123;VTK_LIBRARIES&#125;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="compile"><a href="#compile" class="headerlink" title="compile"></a>compile</h3><pre><code class="bash">mkdir build &amp;&amp; cd build &amp;&amp; cmake-gui ..
make -j8
</code></pre>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.vtk.org/Wiki/VTK/Configure_and_Build">Configure_and_Build vtk</a></li>
<li><a target="_blank" rel="noopener" href="https://www.vtk.org/Wiki/VTK/Tutorials/QtSetup">vtk qt setup</a></li>
</ul>
<h1 id="History"><a href="#History" class="headerlink" title="History"></a>History</h1><ul>
<li>20180108: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/guide-to-build-qt-library-and-use-in-another-project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/guide-to-build-qt-library-and-use-in-another-project/" class="post-title-link" itemprop="url">How to Build and Use user-defined QT Library</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-08 19:15:00" itemprop="dateCreated datePublished" datetime="2018-01-08T19:15:00+08:00">2018-01-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><h3 id="build-qt-library"><a href="#build-qt-library" class="headerlink" title="build qt library"></a>build qt library</h3><h4 id="QObject-class"><a href="#QObject-class" class="headerlink" title="QObject class"></a>QObject class</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span>  <span class="title class_">SHARED_EXPORT</span> CameraGrabber : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">	Q_OBJECT</span><br><span class="line">		signals :</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">sendFrameTrash</span><span class="params">(<span class="type">int</span> nCameraID, <span class="type">int</span> nTotalTrashFrame)</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">explicit</span> <span class="title">CameraGrabber</span><span class="params">(QObject *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_INCLUDE_CURRENT_DIR <span class="keyword">ON</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTOMOC <span class="keyword">ON</span>)  <span class="comment"># for qt SLOTS</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_library</span>(<span class="variable">$&#123;CAMERA_GRABBER_TARGET&#125;</span></span><br><span class="line">    CaptureProcess.h</span><br><span class="line">    CaptureProcess.cpp</span><br><span class="line">    FindGrabber.h </span><br><span class="line">    FindGrabber.cpp</span><br><span class="line">    CameraGrabber.h</span><br><span class="line">    CameraGrabber.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">qt5_use_modules</span>(<span class="variable">$&#123;CAMERA_GRABBER_TARGET&#125;</span> Core)</span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span> (<span class="variable">$&#123;CAMERA_GRABBER_TARGET&#125;</span> </span><br><span class="line">    <span class="variable">$&#123;CONGIF_TARGET&#125;</span></span><br><span class="line">    <span class="variable">$&#123;SAPERA_LIBRARIES&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>build and get <code>CameraGrabber.h</code>,<code>CameraGrabber.lib</code>,<code>CameraGrabber.dll</code> and <code>mocs_compilation.cpp</code>.</p>
<h3 id="use-qt-library"><a href="#use-qt-library" class="headerlink" title="use qt library"></a>use qt library</h3><h4 id="MainWindow-h"><a href="#MainWindow-h" class="headerlink" title="MainWindow.h"></a>MainWindow.h</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Sensor/CameraGrabber/CameraGrabber.h&quot;</span> </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span> : <span class="keyword">public</span> QMainWindow</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MainWindow</span><span class="params">(QWidget *parent=<span class="number">0</span>)</span></span>;</span><br><span class="line">    ~<span class="built_in">MainWindow</span>();</span><br><span class="line">   </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	CameraGrabber *graber = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="MainWindow-cpp"><a href="#MainWindow-cpp" class="headerlink" title="MainWindow.cpp"></a>MainWindow.cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mainwindow.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// moc cpp files for QObject</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;build/src/car/Sensor/CameraGrabber/MySensorCameraGrabber_autogen/mocs_compilation.cpp&quot;</span></span></span><br></pre></td></tr></table></figure>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h4 id="CMakeLists-txt-1"><a href="#CMakeLists-txt-1" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_INCLUDE_CURRENT_DIR <span class="keyword">ON</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTOMOC <span class="keyword">ON</span>)  <span class="comment"># for qt project</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#==============================================================</span></span><br><span class="line"><span class="comment"># cpp,ui,resource files</span></span><br><span class="line"><span class="comment">#==============================================================</span></span><br><span class="line"><span class="comment"># cpp files</span></span><br><span class="line"><span class="comment">#aux_source_directory(. SRC_LIST)</span></span><br><span class="line"><span class="keyword">set</span>(SRC_LIST </span><br><span class="line">	main.cpp</span><br><span class="line">	mainwindow.h</span><br><span class="line">	mainwindow.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ui files</span></span><br><span class="line">qt5_wrap_ui(ui_FILES mainwindow.ui)</span><br><span class="line"></span><br><span class="line"><span class="comment"># resource files</span></span><br><span class="line">qt5_add_resources(qrc_FILES resource.qrc)</span><br><span class="line"></span><br><span class="line"><span class="keyword">message</span>( [Main] <span class="variable">$&#123;SRC_LIST&#125;</span> ) </span><br><span class="line"><span class="keyword">message</span>( [Main] <span class="variable">$&#123;ui_FILES&#125;</span> ) </span><br><span class="line"><span class="keyword">message</span>( [Main] <span class="variable">$&#123;qrc_FILES&#125;</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">#==============================================================</span></span><br><span class="line"><span class="comment"># generate and link target for point_cloud_viewer</span></span><br><span class="line"><span class="comment">#==============================================================</span></span><br><span class="line"><span class="keyword">set</span>(TARGET_NAME aa_qt_main)</span><br><span class="line"><span class="keyword">add_executable</span>(<span class="variable">$&#123;TARGET_NAME&#125;</span> <span class="variable">$&#123;SRC_LIST&#125;</span> <span class="variable">$&#123;ui_FILES&#125;</span> <span class="variable">$&#123;qrc_FILES&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># link qt libraries</span></span><br><span class="line"><span class="keyword">qt5_use_modules</span>(<span class="variable">$&#123;TARGET_NAME&#125;</span> Core Widgets OpenGL Xml Gui Sql)</span><br><span class="line"></span><br><span class="line"><span class="comment"># link vtk and pcl libraries</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;TARGET_NAME&#125;</span> </span><br><span class="line">    <span class="variable">$&#123;CONFIG_TARGET&#125;</span> </span><br><span class="line">    <span class="variable">$&#123;UTIL_TARGET&#125;</span>  </span><br><span class="line">    <span class="variable">$&#123;MODEL_TARGET&#125;</span> </span><br><span class="line">    <span class="variable">$&#123;DETECTION_TARGET&#125;</span> </span><br><span class="line">    <span class="variable">$&#123;DATABASE_TARGET&#125;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment"># sensor</span></span><br><span class="line">    <span class="variable">$&#123;CODER_LINKER_TARGET&#125;</span></span><br><span class="line">    <span class="variable">$&#123;RFID_TARGET&#125;</span></span><br><span class="line">    <span class="variable">$&#123;CAMERA_GRABBER_TARGET&#125;</span></span><br><span class="line">    <span class="variable">$&#123;LIDAR_GRABBER_TARGET&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$&#123;GTEST_LIBRARIES&#125;</span></span><br><span class="line">    <span class="variable">$&#123;BOOST_THREAD_LIBRARY&#125;</span></span><br><span class="line">    <span class="variable">$&#123;GLOG_LIBRARIES&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$&#123;Boost_LIBRARIES&#125;</span></span><br><span class="line">    <span class="variable">$&#123;OpenCV_LIBS&#125;</span></span><br><span class="line">    <span class="variable">$&#123;PCL_LIBRARIES&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h4><p>If we reference qt dll which use QObject,when we include header in <code>MainWindow.h</code>,we must also include <code>mocs_compilation.cpp</code> in <code>MainWindow.cpp</code>. Otherwise error will occur:</p>
<pre><code>error LNK2001: 无法解析的外部符号 &quot;public: static struct QMetaObject const staticMetaObject
</code></pre>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20180409: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/Getting-Started-With-Qt-and-Qt-Creator-on-Ubuntu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/Getting-Started-With-Qt-and-Qt-Creator-on-Ubuntu/" class="post-title-link" itemprop="url">Part-1: Install and Configure Qt5 on Ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-08 11:43:00" itemprop="dateCreated datePublished" datetime="2018-01-08T11:43:00+08:00">2018-01-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h2><ul>
<li><a href="https://kezunlin.me/post/91842b71/"><strong>Part-1: Install and Configure Qt5 on Ubuntu 16.04</strong></a></li>
<li><a href="https://kezunlin.me/post/b901735e/">Part-2: Install and Configure VTK 8.1.0 from source with Qt5 on Ubuntu 16.04</a></li>
<li><a href="https://kezunlin.me/post/137aa5fc/">Part-3: Install and Configure PCL 1.8.1 with vtk qt support on Ubuntu 16.04 from source</a></li>
<li><a href="https://kezunlin.me/post/2d809f92/">Part-4: Install and Configure PCL 1.8.1 with vtk qt support on windows 10 from source</a></li>
</ul>
<h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><ul>
<li>qt: 5.7.0</li>
<li>qmake: 3.0 based on Qt 5.7.0</li>
<li>qtcreator: 3.5.1 based on Qt 5.5.1</li>
</ul>
<h3 id="purge-existing-qt"><a href="#purge-existing-qt" class="headerlink" title="purge existing qt"></a>purge existing qt</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get purge qt5-default qtcreator </span><br><span class="line"><span class="built_in">sudo</span> apt-get purge qt4-designer qt4-dev-tools</span><br></pre></td></tr></table></figure>

<h3 id="install-qt57"><a href="#install-qt57" class="headerlink" title="install qt57"></a>install qt57</h3><p>In addition, building graphical Qt applications requires OpenGL libraries and headers installed. On Ubuntu and other Debian-based Linux systems you can get OpenGL and the minimal set of development tools by installing the packages  <strong>libgl1-mesa-dev</strong> and <strong>build-essential</strong>, i.e. by running this command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install build-essential libgl1-mesa-dev</span><br></pre></td></tr></table></figure>

<p>Download qt and install.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install build-essential libgl1-mesa-dev</span><br><span class="line">wget http://download.qt.io/official_releases/qt/5.7/5.7.0/qt-opensource-linux-x64-5.7.0.run</span><br><span class="line"><span class="built_in">chmod</span> +x qt-opensource-linux-x64-5.7.0.run</span><br><span class="line">./qt-opensource-linux-x64-5.7.0.run</span><br></pre></td></tr></table></figure>

<blockquote>
<p>install to <code>/opt/Qt5.7.0</code></p>
</blockquote>
<p>create links to <code>/opt/qt/</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /opt/Qt5.7.0 qt</span><br></pre></td></tr></table></figure>

<h3 id="qtchooser"><a href="#qtchooser" class="headerlink" title="qtchooser"></a>qtchooser</h3><h4 id="add-qt57-conf"><a href="#add-qt57-conf" class="headerlink" title="add qt57.conf"></a>add qt57.conf</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /usr/share/qtchooser/qt57.conf </span><br><span class="line"></span><br><span class="line">/opt/qt/5.7/gcc_64/bin</span><br><span class="line">/opt/qt/5.7/gcc_64/lib</span><br><span class="line"></span><br><span class="line"><span class="comment"># link to qt57</span></span><br><span class="line"><span class="built_in">cd</span> /usr/lib/x86_64-linux-gnu/qtchooser</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /usr/share/qtchooser/qt57.conf qt57.conf</span><br></pre></td></tr></table></figure>

<h4 id="link-to-default"><a href="#link-to-default" class="headerlink" title="link to default"></a>link to default</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/lib/x86_64-linux-gnu/qt-default/qtchooser</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> default.conf</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /usr/share/qtchooser/qt57.conf default.conf</span><br><span class="line"><span class="built_in">ls</span> -l default.conf</span><br><span class="line">default.conf -&gt; /usr/share/qtchooser/qt57.conf</span><br></pre></td></tr></table></figure>

<h4 id="qt-conf"><a href="#qt-conf" class="headerlink" title="qt conf"></a>qt conf</h4><p><code>/usr/share/qtchooser/</code></p>
<ul>
<li>qt4-x86_64-linux-gnu.conf   (FILE)</li>
<li>qt5-x86_64-linux-gnu.conf   (FILE)</li>
<li>qt57.conf                   (FILE)</li>
</ul>
<p><code>/usr/lib/x86_64-linux-gnu/qtchooser/</code></p>
<ul>
<li>4.conf      (link)</li>
<li>5.conf      (link)</li>
<li>qt4.conf    (link)</li>
<li>qt5.conf    (link)</li>
<li>qt57.conf   (link)</li>
</ul>
<p><code>/usr/lib/x86_64-linux-gnu/qt-default/qtchooser/</code></p>
<ul>
<li>default.conf (link) qt57.conf</li>
</ul>
<h4 id="qtchooser-1"><a href="#qtchooser-1" class="headerlink" title="qtchooser"></a>qtchooser</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> qtchooser </span><br><span class="line">/usr/bin/qtchooser</span><br><span class="line"></span><br><span class="line">qtchooser -l</span><br><span class="line"></span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">default</span><br><span class="line">qt4-x86_64-linux-gnu</span><br><span class="line">qt4</span><br><span class="line">qt5-x86_64-linux-gnu</span><br><span class="line">qt5</span><br></pre></td></tr></table></figure>

<h4 id="qtchooser-env"><a href="#qtchooser-env" class="headerlink" title="qtchooser env"></a>qtchooser env</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">qtchooser -print-env</span><br><span class="line">QT_SELECT=<span class="string">&quot;default&quot;</span></span><br><span class="line">QTTOOLDIR=<span class="string">&quot;/opt/qt/5.7/gcc_64/bin&quot;</span></span><br><span class="line">QTLIBDIR=<span class="string">&quot;/opt/qt/5.7/gcc_64/lib&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="export-QT-QPA-PLATFORM-PLUGIN-PATH"><a href="#export-QT-QPA-PLATFORM-PLUGIN-PATH" class="headerlink" title="export QT_QPA_PLATFORM_PLUGIN_PATH"></a>export QT_QPA_PLATFORM_PLUGIN_PATH</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim .bashrc</span><br><span class="line"><span class="built_in">export</span> QT_QPA_PLATFORM_PLUGIN_PATH=/opt/qt/5.7/gcc_64/plugins/platforms</span><br></pre></td></tr></table></figure>

<blockquote>
<p>otherwise,errors may occur. <code>Failed to load platform plugin &quot;xcb&quot;.</code></p>
</blockquote>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>



<h2 id="QtCreator-Tutorial"><a href="#QtCreator-Tutorial" class="headerlink" title="QtCreator Tutorial"></a>QtCreator Tutorial</h2><h3 id="install-qtcreator"><a href="#install-qtcreator" class="headerlink" title="install qtcreator"></a>install qtcreator</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get -y install qtcreator</span><br><span class="line"></span><br><span class="line">qtcreator -version</span><br><span class="line">Qt Creator 3.5.1 based on Qt 5.5.1</span><br></pre></td></tr></table></figure>

<h3 id="create-application"><a href="#create-application" class="headerlink" title="create application"></a>create application</h3><ol>
<li><p>Start <code>qtcreator</code> and create a <code>Qt Widget Application</code> named <code>hello</code>.</p>
</li>
<li><p>Add a resource file named <code>resource.qrc</code>.</p>
<pre><code> hello--&gt;right click--&gt; Add New... ---&gt;qt---&gt; qt resource file---&gt; name resource---&gt; generate resource.qrc
</code></pre>
</li>
<li><p>and then import images to resource.qrc</p>
<pre><code> Resources | resource.qrt---&gt;right click---&gt; Add Prefix...---&gt; name /prefix
 Resources | resource.qrt | /prefix---&gt;right click ---&gt; Add Existing Files... ---&gt; choose images ---&gt; OK
</code></pre>
</li>
<li><p>use resource in <code>mainwindow.ui</code></p>
<pre><code> button ---&gt; property page ---&gt; icon ---&gt; Choose Resource... ---&gt; select image ---&gt; OK
</code></pre>
</li>
</ol>
<h3 id="qt-slots"><a href="#qt-slots" class="headerlink" title="qt slots"></a>qt slots</h3><h4 id="method-1"><a href="#method-1" class="headerlink" title="method 1"></a>method 1</h4><p>steps: </p>
<pre><code>mainwindow.ui ---&gt; choose button ---&gt; right click ---&gt; Go to slot... ---&gt; choose clicked() ---&gt; OK
</code></pre>
<p>will add slots in <code>mainwindow.h</code> automatically</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">on_pushButtonOK_clicked</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>and in <code>mainwindow.cpp</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButtonOK_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Tips: if we use <code>on_pushButtonOK_clicked</code> style, there is no need to connect with slots in <code>MainWindow</code> constructor by hand.</p>
</blockquote>
<h4 id="method-2-OK"><a href="#method-2-OK" class="headerlink" title="method 2 (OK)"></a>method 2 (OK)</h4><p>add slots in <code>mainwindow.h</code> by hand</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pushButtonCancel_clicked</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>and in <code>mainwindow.cpp</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::pushButtonCancel_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>connect button with slot in <code>mainwindow.cpp</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent) :</span><br><span class="line">    <span class="built_in">QMainWindow</span>(parent),</span><br><span class="line">    <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// connect</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;pushButtonCancel, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">pushButtonCancel_clicked</span>()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h2 id="Code-Example"><a href="#Code-Example" class="headerlink" title="Code Example"></a>Code Example</h2><h3 id="folder"><a href="#folder" class="headerlink" title="folder"></a>folder</h3><p>folder structure like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ tree hello/</span><br><span class="line"></span><br><span class="line">hello/</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">├── hello.pro</span><br><span class="line">├── hello.pro.user</span><br><span class="line">├── images</span><br><span class="line">│   ├── kezunlin_logo.png</span><br><span class="line">│   ├── logo.svg</span><br><span class="line">│   └── searchicon.png</span><br><span class="line">├── main.cpp</span><br><span class="line">├── mainwindow.cpp</span><br><span class="line">├── mainwindow.h</span><br><span class="line">├── mainwindow.ui</span><br><span class="line">└── resource.qrc</span><br><span class="line"></span><br><span class="line">1 directory, 11 files</span><br></pre></td></tr></table></figure>

<h3 id="code"><a href="#code" class="headerlink" title="code"></a>code</h3><h4 id="mainwinow-h"><a href="#mainwinow-h" class="headerlink" title="mainwinow.h"></a>mainwinow.h</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MAINWINDOW_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAINWINDOW_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span> : <span class="keyword">public</span> QMainWindow</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MainWindow</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">    ~<span class="built_in">MainWindow</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">on_pushButtonOK_clicked</span><span class="params">()</span></span>; <span class="comment">// method1</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pushButtonCancel_clicked</span><span class="params">()</span></span>; <span class="comment">// method2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::MainWindow *ui;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MAINWINDOW_H</span></span></span><br></pre></td></tr></table></figure>

<h4 id="mainwindow-cpp"><a href="#mainwindow-cpp" class="headerlink" title="mainwindow.cpp"></a>mainwindow.cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mainwindow.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent) :</span><br><span class="line">    <span class="built_in">QMainWindow</span>(parent),</span><br><span class="line">    <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// connect</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;pushButtonCancel, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">pushButtonCancel_clicked</span>()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~<span class="built_in">MainWindow</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButtonOK_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QString text = ui-&gt;lineEditName-&gt;<span class="built_in">text</span>();</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;OK&quot;</span>, text);</span><br><span class="line">    ui-&gt;pushButtonOK-&gt;<span class="built_in">setText</span>( <span class="built_in">tr</span>(<span class="string">&quot;(OK. click me)&quot;</span>) );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::pushButtonCancel_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QString text = ui-&gt;lineEditName-&gt;<span class="built_in">text</span>();</span><br><span class="line">    QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;Cancel&quot;</span>, text);</span><br><span class="line">    ui-&gt;pushButtonCancel-&gt;<span class="built_in">setText</span>( <span class="built_in">tr</span>(<span class="string">&quot;(Cancel.click me)&quot;</span>) );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="main-cpp"><a href="#main-cpp" class="headerlink" title="main.cpp"></a>main.cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MainWindow w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>.<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(helloworld)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Find includes in corresponding build directories</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_INCLUDE_CURRENT_DIR <span class="keyword">ON</span>)</span><br><span class="line"><span class="comment"># Instruct CMake to run moc automatically when needed.</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTOMOC <span class="keyword">ON</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># $&#123;QT_INCLUDE_DIRS&#125; $&#123;QT_LIBRARIES&#125; and so on are all Qt4 Macro Definitions!!!!!</span></span><br><span class="line"><span class="comment"># Find the QtWidgets library</span></span><br><span class="line"><span class="keyword">find_package</span>(Qt5Core)</span><br><span class="line"><span class="keyword">find_package</span>(Qt5Widgets)</span><br><span class="line"><span class="keyword">find_package</span>(Qt5Gui)</span><br><span class="line"><span class="keyword">find_package</span>(Qt5OpenGL)</span><br><span class="line"><span class="keyword">find_package</span>(Qt5Xml)</span><br><span class="line"></span><br><span class="line"><span class="comment">#message( [qt] $&#123;Qt5Core_INCLUDE_DIRS&#125; )</span></span><br><span class="line"><span class="comment">#message( [qt] $&#123;Qt5Core_LIBRARIES&#125; )</span></span><br><span class="line"><span class="comment">#message( [qt] $&#123;Qt5Widgets_INCLUDE_DIRS&#125; )</span></span><br><span class="line"><span class="comment">#message( [qt] $&#123;Qt5Widgets_LIBRARIES&#125; )</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cpp files</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. SRC_LIST)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ui files</span></span><br><span class="line">qt5_wrap_ui(ui_FILES mainwindow.ui)</span><br><span class="line"><span class="comment"># resource files</span></span><br><span class="line">qt5_add_resources(qrc_FILES resource.qrc)</span><br><span class="line"></span><br><span class="line"><span class="keyword">message</span>( [Main] <span class="variable">$&#123;SRC_LIST&#125;</span> ) <span class="comment"># ./main.cpp./mainwindow.cpp</span></span><br><span class="line"><span class="keyword">message</span>( [Main] <span class="variable">$&#123;ui_FILES&#125;</span> ) <span class="comment"># build/ui_mainwindow.h</span></span><br><span class="line"><span class="keyword">message</span>( [Main] <span class="variable">$&#123;qrc_FILES&#125;</span> )<span class="comment"># build/qrc_resource.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Tell CMake to create the helloworld executable</span></span><br><span class="line"><span class="keyword">add_executable</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> <span class="variable">$&#123;SRC_LIST&#125;</span> <span class="variable">$&#123;ui_FILES&#125;</span> <span class="variable">$&#123;qrc_FILES&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">qt5_use_modules</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> Core Widgets OpenGL Xml Gui)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use the Widgets module from Qt 5.</span></span><br><span class="line"><span class="comment">#qt5_use_modules(helloworld Widgets)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># link other libraries</span></span><br><span class="line"><span class="comment">#target_link_libraries ($&#123;PROJECT_NAME&#125; $&#123;SPEC_OPENCV_LIBS&#125;)</span></span><br></pre></td></tr></table></figure>

<h3 id="CMakeLists-txt-2"><a href="#CMakeLists-txt-2" class="headerlink" title="CMakeLists.txt 2"></a>CMakeLists.txt 2</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(PROJECT_NAME demo)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_BINARY_DIR <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/bin)  <span class="comment"># bin/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(EXECUTABLE_OUTPUT_PATH <span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>)</span><br><span class="line"><span class="keyword">set</span>(LIBRARY_OUTPUT_PATH <span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">11</span>)</span><br><span class="line"><span class="comment">#set(CMAKE_PREFIX_PATH $&#123;QTDIR&#125;)</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTOMOC <span class="keyword">ON</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTOUIC <span class="keyword">ON</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTORCC <span class="keyword">ON</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># QT5_DIR /opt/Qt5.7.0/5.7/gcc_64/lib/cmake/Qt5</span></span><br><span class="line"><span class="keyword">find_package</span>(Qt5 REQUIRED Widgets Core Gui Network OpenGL)</span><br><span class="line"><span class="keyword">find_package</span>(OpenCV REQUIRED COMPONENTS core highgui imgproc features2d calib3d )</span><br><span class="line"><span class="keyword">find_package</span>(Protobuf REQUIRED) <span class="comment"># 3.6.1</span></span><br><span class="line"><span class="keyword">find_package</span>(VTK REQUIRED) <span class="comment"># 8.1.2</span></span><br><span class="line"><span class="keyword">include</span>(<span class="variable">$&#123;VTK_USE_FILE&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">MESSAGE</span>( [Main] <span class="string">&quot; VTK_INCLUDE_DIRS = $&#123;VTK_INCLUDE_DIRS&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">MESSAGE</span>( [Main] <span class="string">&quot; VTK_LIBRARIES = $&#123;VTK_LIBRARIES&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>(PCL REQUIRED) <span class="comment"># 1.9.1</span></span><br><span class="line"><span class="comment">#find_package(PCL REQUIRED COMPONENTS common io filters visualization)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">link_directories</span>(<span class="variable">$&#123;PCL_LIBRARY_DIRS&#125;</span>)</span><br><span class="line"><span class="keyword">add_definitions</span>(<span class="variable">$&#123;PCL_DEFINITIONS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">message</span> ([main] <span class="string">&quot;PCL_DIR = $&#123;PCL_DIR&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">message</span> ([main] <span class="string">&quot;PCL_FOUND = $&#123;PCL_FOUND&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">message</span> ([main] <span class="string">&quot;PCL_INCLUDE_DIRS = $&#123;PCL_INCLUDE_DIRS&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">message</span> ([main] <span class="string">&quot;PCL_LIBRARIES = $&#123;PCL_LIBRARIES&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">message</span> ([main] <span class="string">&quot;PCL_LIBRARY_DIRS = $&#123;PCL_LIBRARY_DIRS&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">message</span> ([main] <span class="string">&quot;PCL_COMMON_LIBRARIES = $&#123;PCL_COMMON_LIBRARIES&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">message</span> ([main] <span class="string">&quot;PCL_IO_LIBRARIES = $&#123;PCL_IO_LIBRARIES&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">message</span> ([main] <span class="string">&quot;PCL_FILTERS_LIBRARIES = $&#123;PCL_FILTERS_LIBRARIES&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">message</span> ([main] <span class="string">&quot;PCL_VISUALIZATION_LIBRARIES = $&#123;PCL_VISUALIZATION_LIBRARIES&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">include_directories</span>(</span><br><span class="line">	./ <span class="comment"># current folder</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#	$&#123;GFLAGS_INCLUDE_DIRS&#125;</span></span><br><span class="line"><span class="comment">#	$&#123;GLOG_INCLUDE_DIRS&#125;</span></span><br><span class="line"><span class="comment">#	$&#123;GTEST_INCLUDE_DIRS&#125;</span></span><br><span class="line">	<span class="variable">$&#123;PROTOBUF_INCLUDE_DIRS&#125;</span></span><br><span class="line">	<span class="variable">$&#123;Boost_INCLUDE_DIRS&#125;</span> </span><br><span class="line">	<span class="variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span></span><br><span class="line">	<span class="variable">$&#123;VTK_INCLUDE_DIRS&#125;</span></span><br><span class="line">	<span class="variable">$&#123;PCL_INCLUDE_DIRS&#125;</span></span><br><span class="line">) </span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(SOURCE_FILES</span><br><span class="line">    main.cpp</span><br><span class="line">    MainWindow.cpp</span><br><span class="line">    ./proto/camera_image.pb.cc</span><br><span class="line">    ./proto/point_cloud.pb.cc</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(RESOURCE_FILE resource.qrc)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> <span class="variable">$&#123;SOURCE_FILES&#125;</span> <span class="variable">$&#123;RESOURCE_FILE&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> </span><br><span class="line">    Qt5::Widgets Qt5::Gui Qt5::Core Qt5::OpenGL Qt5::Network</span><br><span class="line">	<span class="variable">$&#123;Boost_LIBRARIES&#125;</span></span><br><span class="line">	<span class="variable">$&#123;PROTOBUF_LIBRARIES&#125;</span></span><br><span class="line">	<span class="variable">$&#123;OpenCV_LIBRARIES&#125;</span></span><br><span class="line">	<span class="variable">$&#123;VTK_LIBRARIES&#125;</span></span><br><span class="line">	<span class="variable">$&#123;PCL_LIBRARIES&#125;</span>    </span><br><span class="line">    pthread</span><br><span class="line">    rt</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="cmake"><a href="#cmake" class="headerlink" title="cmake"></a>cmake</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> hello</span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<h3 id="run"><a href="#run" class="headerlink" title="run"></a>run</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./helloworld</span><br></pre></td></tr></table></figure>

<p>screen snapshot like this:</p>
<p><img src="https://kezunlin.me/images/posts/635233-20180108163402269-37644849.png" alt="qt demo window"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="http://wiki.qt.io/Install_Qt_5_on_Ubuntu">Install_Qt_5_on_Ubuntu</a></li>
<li><a target="_blank" rel="noopener" href="http://sourcedigit.com/20623-how-to-install-qt-creator-on-ubuntu-16-04/">install-qt-creator-on-ubuntu-16-04</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ics.com/blog/getting-started-qt-and-qt-creator-linux">getting-started-qt-and-qt-creator-linux</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/17106315/failed-to-load-platform-plugin-xcb-while-launching-qt5-app-on-linux-without">failed-to-load-platform-plugin-xcb</a></li>
<li><a target="_blank" rel="noopener" href="https://lemirep.wordpress.com/2013/06/01/deploying-qt-applications-on-linux-and-windows-3/">deploying-qt-applications-on-linux-and-windows-3</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20180108: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/ubuntu-network-proxy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/ubuntu-network-proxy/" class="post-title-link" itemprop="url">Ubuntu Network Configuration</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-08 10:03:00" itemprop="dateCreated datePublished" datetime="2018-01-08T10:03:00+08:00">2018-01-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><h3 id="network-proxy"><a href="#network-proxy" class="headerlink" title="network proxy"></a>network proxy</h3><ul>
<li>System wide: Network—&gt;None&#x2F;Manual</li>
<li>chrome: can not set</li>
<li>firefox: about:preferences—&gt; Network Proxy</li>
</ul>
<h3 id="eth0-config"><a href="#eth0-config" class="headerlink" title="eth0 config"></a>eth0 config</h3><h4 id="rename-xxx-to-eth0"><a href="#rename-xxx-to-eth0" class="headerlink" title="rename xxx to eth0"></a>rename xxx to eth0</h4><p>errors may occur:</p>
<pre><code>Ubuntu networking restart | cannot find device &#39;eth0&#39;
</code></pre>
<p>check eth0 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dmesg | grep eth </span><br><span class="line"></span><br><span class="line">[5.715564] e1000 0000:02:01.0 eth0: (PCI:66MHz:32-bit) 00:0c:29:7d:bf:43</span><br><span class="line">[5.715573] e1000 0000:02:01.0 eth0: Intel(R) PRO/1000 Network Connection</span><br><span class="line">[5.719709] e1000 0000:02:01.0 ens33: renamed from eth0</span><br></pre></td></tr></table></figure>

<p>and we get <code>ens33</code> renamed from <code>eth0</code>, we need to change it back to <code>eth0</code>.</p>
<h4 id="solution"><a href="#solution" class="headerlink" title="solution"></a>solution</h4><ol>
<li><p>edit grub and update</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> vim /etc/default/grub</span><br><span class="line"></span><br><span class="line"><span class="comment">#GRUB_CMDLINE_LINUX=&quot;&quot;</span></span><br><span class="line">GRUB_CMDLINE_LINUX=<span class="string">&quot;net.ifnames=0 biosdevname=0&quot;</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> update-grub</span><br></pre></td></tr></table></figure>
</li>
<li><p>edit network interfaces <code>/etc/network/interfaces</code></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"></span><br><span class="line">auto eth0</span><br><span class="line">iface eth0 inet static</span><br><span class="line">address 192.168.1.77 </span><br><span class="line">netmask 255.255.255.0</span><br><span class="line">gateway 192.168.1.1 </span><br></pre></td></tr></table></figure>
</li>
<li><p>reboot </p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> reboot now</span><br></pre></td></tr></table></figure>
</li>
<li><p>check eth0</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> ifconfig</span><br><span class="line"></span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 80:fa:5b:47:92:8a  </span><br><span class="line">            inet addr:192.168.1.77  Bcast:192.168.1.255  Mask:255.255.255.0</span><br><span class="line">            UP BROADCAST MULTICAST  MTU:1500  Metric:1</span><br><span class="line">            RX packets:0 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">            TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">            collisions:0 txqueuelen:1000 </span><br><span class="line">            RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">            inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">            inet6 addr: ::1/128 Scope:Host</span><br><span class="line">            UP LOOPBACK RUNNING  MTU:65536  Metric:1</span><br><span class="line">            RX packets:4640 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">            TX packets:4640 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">            collisions:0 txqueuelen:1000 </span><br><span class="line">            RX bytes:865530 (865.5 KB)  TX bytes:865530 (865.5 KB)</span><br></pre></td></tr></table></figure></li>
</ol>
<p>OK. Now we get <code>eth0</code>,<code>wlan0</code> properly set.</p>
<h2 id="ldconfig"><a href="#ldconfig" class="headerlink" title="ldconfig"></a>ldconfig</h2><h3 id="libEGL"><a href="#libEGL" class="headerlink" title="libEGL"></a>libEGL</h3><h4 id="error"><a href="#error" class="headerlink" title="error"></a>error</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> ldconfig</span><br><span class="line"></span><br><span class="line">/sbin/ldconfig.real: /usr/lib/nvidia-384/libEGL.so.1 is not a symbolic <span class="built_in">link</span></span><br><span class="line">/sbin/ldconfig.real: /usr/lib32/nvidia-384/libEGL.so.1 is not a symbolic <span class="built_in">link</span></span><br></pre></td></tr></table></figure>

<h4 id="fix"><a href="#fix" class="headerlink" title="fix"></a>fix</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /usr/lib/nvidia-384/libEGL.so </span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /usr/lib/nvidia-384/libEGL.so.1 </span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /usr/lib/nvidia-384/libEGL.so.384.90 /usr/lib/nvidia-384/libEGL.so.1</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /usr/lib/nvidia-384/libEGL.so.1 /usr/lib/nvidia-384/libEGL.so</span><br><span class="line"></span><br><span class="line"><span class="comment"># fix lib32</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /usr/lib32/nvidia-384/libEGL.so </span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /usr/lib32/nvidia-384/libEGL.so.1 </span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /usr/lib32/nvidia-384/libEGL.so.384.90 /usr/lib32/nvidia-384/libEGL.so.1</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /usr/lib32/nvidia-384/libEGL.so.1 /usr/lib32/nvidia-384/libEGL.so</span><br></pre></td></tr></table></figure>

<p>list libEGL.so of lib</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> -al libEGL.so*</span><br><span class="line"></span><br><span class="line">lrwxrwxrwx 1 root root    33 1月   8 11:24 libEGL.so -&gt; /usr/lib/nvidia-384/libEGL.so.1</span><br><span class="line">lrwxrwxrwx 1 root root    38 1月   8 11:24 libEGL.so.1 -&gt; /usr/lib/nvidia-384/libEGL.so.384.90</span><br><span class="line">-rw-r--r-- 1 root root 15012 9月  20 08:44 libEGL.so.384.90</span><br></pre></td></tr></table></figure>

<p>list libEGL.so of lib32</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> -al libEGL.so*</span><br><span class="line"></span><br><span class="line">lrwxrwxrwx 1 root root    33 1月   8 11:24 libEGL.so -&gt; /usr/lib32/nvidia-384/libEGL.so.1</span><br><span class="line">lrwxrwxrwx 1 root root    38 1月   8 11:24 libEGL.so.1 -&gt; /usr/lib32/nvidia-384/libEGL.so.384.90</span><br><span class="line">-rw-r--r-- 1 root root 15012 9月  20 08:44 libEGL.so.384.90</span><br></pre></td></tr></table></figure>

<h4 id="check"><a href="#check" class="headerlink" title="check"></a>check</h4><pre><code class="bash">$ sudo ldconfig
</code></pre>
<p>OK.</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a target="_blank" rel="noopener" href="https://askubuntu.com/questions/900285/libegl-so-1-is-not-a-symbolic-link">libegl so not symbolic link</a></li>
<li><a target="_blank" rel="noopener" href="http://www.iesensor.com/blog/2017/02/27/solved-fenics-2016-2-cpp-code-compiling-error-on-ubuntu-16-04/">libvtkRenderingPythonTkWidgets.so</a></li>
</ul>
<h1 id="History"><a href="#History" class="headerlink" title="History"></a>History</h1><ul>
<li>20180108: created</li>
<li>20180222: add eth0 part.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/Install-and-Configure-ROS-Kinetic-on-Ubuntu-16-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/Install-and-Configure-ROS-Kinetic-on-Ubuntu-16-04/" class="post-title-link" itemprop="url">Install and Configure ROS Kinetic on Ubuntu 16.04</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-04 16:25:00" itemprop="dateCreated datePublished" datetime="2018-01-04T16:25:00+08:00">2018-01-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Install-Guide"><a href="#Install-Guide" class="headerlink" title="Install Guide"></a>Install Guide</h2><h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><pre><code>ROS release 	  ROS version	      Ubuntu version
2016.3	     ROS Kinetic Kame	Ubuntu 16.04(Xenial)/Ubuntu 15.10
</code></pre>
<h3 id="quick-commands"><a href="#quick-commands" class="headerlink" title="quick commands"></a>quick commands</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> sh -c <span class="string">&#x27;. /etc/lsb-release &amp;&amp; echo &quot;deb [arch=amd64] http://mirrors.ustc.edu.cn/ros/ubuntu/ $DISTRIB_CODENAME main&quot; &gt; /etc/apt/sources.list.d/ros-latest.list&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-kinetic-desktop-full</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> apt-get install python-rosinstall python-rosinstall-generator python-wstool build-essential</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> rosdep init</span><br><span class="line">rosdep update</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;source /opt/ros/kinetic/setup.bash&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># test</span></span><br><span class="line">roscore</span><br></pre></td></tr></table></figure>

<h3 id="update-source"><a href="#update-source" class="headerlink" title="update source"></a>update source</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br></pre></td></tr></table></figure>
<blockquote>
<p>tinghua source<br><code>http://mirrors.tuna.tsinghua.edu.cn/ubuntu xenial</code></p>
</blockquote>
<h3 id="Configure-ros-source"><a href="#Configure-ros-source" class="headerlink" title="Configure ros source"></a>Configure ros source</h3><h4 id="ros-offical-NOT-RECOMMEND"><a href="#ros-offical-NOT-RECOMMEND" class="headerlink" title="ros offical(NOT RECOMMEND)"></a>ros offical(NOT RECOMMEND)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> sh -c <span class="string">&#x27;echo &quot;deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main&quot; &gt; /etc/apt/sources.list.d/ros-latest.list&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>NOT RECOMMEND，when <code>apt-get update</code>, error will occur <code>Hash Sum mismatch</code></p>
</blockquote>
<h4 id="ros-china-RECOMMEND"><a href="#ros-china-RECOMMEND" class="headerlink" title="ros china(RECOMMEND)"></a>ros china(RECOMMEND)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> sh -c <span class="string">&#x27;. /etc/lsb-release &amp;&amp; echo &quot;deb [arch=amd64] http://mirrors.ustc.edu.cn/ros/ubuntu/ $DISTRIB_CODENAME main&quot; &gt; /etc/apt/sources.list.d/ros-latest.list&#x27;</span></span><br><span class="line"><span class="built_in">sudo</span> apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116</span><br></pre></td></tr></table></figure>

<p>cat <code>ros-latest.list</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb [<span class="built_in">arch</span>=amd64] http://mirrors.ustc.edu.cn/ros/ubuntu/ xenial main</span><br></pre></td></tr></table></figure>

<h3 id="Install-ros"><a href="#Install-ros" class="headerlink" title="Install ros"></a>Install ros</h3><p>ROS, rqt, rviz, robot-generic libraries, 2D&#x2F;3D simulators, navigation and 2D&#x2F;3D perception</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ros-kinetic-desktop-full</span><br><span class="line"></span><br><span class="line"><span class="comment">#sudo apt-get install ros-kinetic-desktop</span></span><br><span class="line"><span class="comment">#sudo apt-get install ros-kinetic-ros-base</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#sudo apt-get install ros-kinetic-&lt;PACKAGE&gt;</span></span><br><span class="line"><span class="comment">#sudo apt-get install ros-kinetic-slam-gmapping</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#apt-cache search ros-kinetic</span></span><br></pre></td></tr></table></figure>
<h3 id="Initialize-rosdep"><a href="#Initialize-rosdep" class="headerlink" title="Initialize rosdep"></a>Initialize rosdep</h3><p>Before you can use ROS, you will need to initialize rosdep. rosdep enables you to easily install system dependencies for source you want to compile and is required to run some core components in ROS.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> rosdep init</span><br><span class="line">rosdep update</span><br></pre></td></tr></table></figure>

<p>will output </p>
<pre><code>reading in sources list data from /etc/ros/rosdep/sources.list.d
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/releases/fuerte.yaml
Query rosdistro index https://raw.githubusercontent.com/ros/rosdistro/master/index.yaml
Add distro &quot;groovy&quot;
Add distro &quot;hydro&quot;
Add distro &quot;indigo&quot;
Add distro &quot;jade&quot;
Add distro &quot;kinetic&quot;
Add distro &quot;lunar&quot;
updated cache in /home/kezunlin/.ros/rosdep/sources.cache
</code></pre>
<h3 id="Environment-setup"><a href="#Environment-setup" class="headerlink" title="Environment setup"></a>Environment setup</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;source /opt/ros/kinetic/setup.bash&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>

<h4 id="check-ROS"><a href="#check-ROS" class="headerlink" title="check  ROS"></a>check  ROS</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">env</span> | grep ROS</span><br><span class="line"><span class="built_in">export</span> | grep ROS</span><br><span class="line"><span class="built_in">declare</span> -x ROSLISP_PACKAGE_DIRECTORIES=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">declare</span> -x ROS_DISTRO=<span class="string">&quot;kinetic&quot;</span></span><br><span class="line"><span class="built_in">declare</span> -x ROS_ETC_DIR=<span class="string">&quot;/opt/ros/kinetic/etc/ros&quot;</span></span><br><span class="line"><span class="built_in">declare</span> -x ROS_MASTER_URI=<span class="string">&quot;http://localhost:11311&quot;</span></span><br><span class="line"><span class="built_in">declare</span> -x ROS_PACKAGE_PATH=<span class="string">&quot;/opt/ros/kinetic/share&quot;</span></span><br><span class="line"><span class="built_in">declare</span> -x ROS_ROOT=<span class="string">&quot;/opt/ros/kinetic/share/ros&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Dependencies-for-building-packages"><a href="#Dependencies-for-building-packages" class="headerlink" title="Dependencies for building packages"></a>Dependencies for building packages</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install python-rosinstall python-rosinstall-generator python-wstool build-essential</span><br></pre></td></tr></table></figure>

<h3 id="Test-install"><a href="#Test-install" class="headerlink" title="Test install"></a>Test install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roscore</span><br></pre></td></tr></table></figure>
<p>output </p>
<pre><code>... logging to /home/kezunlin/.ros/log/b777db6c-ff85-11e8-93c2-80fa5b47928a/roslaunch-ke-17139.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is &lt;1GB.

started roslaunch server http://ke:36319/
ros_comm version 1.12.14


SUMMARY
========

PARAMETERS
 * /rosdistro: kinetic
 * /rosversion: 1.12.14

NODES

auto-starting new master
process[master]: started with pid [17162]
ROS_MASTER_URI=http://ke:11311/

setting /run_id to b777db6c-ff85-11e8-93c2-80fa5b47928a
process[rosout-1]: started with pid [17175]
started core service [/rosout]
^C[rosout-1] killing on exit
[master] killing on exit
shutting down processing monitor...
... shutting down processing monitor complete
done
</code></pre>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<h2 id="Create-Workspace"><a href="#Create-Workspace" class="headerlink" title="Create Workspace"></a>Create Workspace</h2><h3 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h3><p>Let’s create and build a catkin workspace:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/catkin_ws/src</span><br><span class="line"><span class="built_in">cd</span> ~/catkin_ws/</span><br><span class="line">catkin_make</span><br><span class="line"></span><br><span class="line"><span class="built_in">ls</span> .</span><br><span class="line">build dist src</span><br></pre></td></tr></table></figure>

<p><code>tree src</code> folder</p>
<pre><code>src/
└── CMakeLists.txt -&gt; /opt/ros/kinetic/share/catkin/cmake/toplevel.cmake

0 directories, 1 file
</code></pre>
<p><code>tree devel</code> folder  </p>
<pre><code>devel
├── env.sh
├── lib
├── setup.bash
├── setup.sh
├── _setup_util.py
└── setup.zsh

1 directory, 5 files
</code></pre>
<p>The <code>catkin_make</code> command is a convenience tool for working with <code>catkin workspaces</code>. </p>
<h3 id="source-devel-setup"><a href="#source-devel-setup" class="headerlink" title="source devel setup"></a>source devel setup</h3><p>before <code>source devel/setup.bash</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">env</span> | grep ROS</span><br><span class="line">ROS_ROOT=/opt/ros/kinetic/share/ros</span><br><span class="line">ROS_PACKAGE_PATH=/opt/ros/kinetic/share</span><br><span class="line">ROS_MASTER_URI=http://localhost:11311</span><br><span class="line">ROSLISP_PACKAGE_DIRECTORIES=</span><br><span class="line">ROS_DISTRO=kinetic</span><br><span class="line">ROS_ETC_DIR=/opt/ros/kinetic/etc/ros</span><br></pre></td></tr></table></figure>

<p>after <code>source devel/setup.bash</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">env</span> | grep ROS</span><br><span class="line">ROS_ROOT=/opt/ros/kinetic/share/ros</span><br><span class="line">ROS_PACKAGE_PATH=/home/kezunlin/catkin_ws/src:/opt/ros/kinetic/share</span><br><span class="line">ROS_MASTER_URI=http://localhost:11311</span><br><span class="line">ROSLISP_PACKAGE_DIRECTORIES=/home/kezunlin/catkin_ws/devel/share/common-lisp</span><br><span class="line">ROS_DISTRO=kinetic</span><br><span class="line">ROS_ETC_DIR=/opt/ros/kinetic/etc/ros</span><br></pre></td></tr></table></figure>

<p>To make sure your workspace is properly overlayed by the setup script, make sure <code>ROS_PACKAGE_PATH</code> environment variable includes the directory you’re in.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$ROS_PACKAGE_PATH</span></span><br><span class="line">/home/kezunlin/catkin_ws/src:/opt/ros/kinetic/share</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/kinetic/Installation/Ubuntu">Official Install Guide</a></li>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/ROS/Installation/UbuntuMirrors">Ubuntu ROS mirrors</a></li>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/ROS/Tutorials/InstallingandConfiguringROSEnvironment">Configure ROS Environment</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>2018&#x2F;01&#x2F;04: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/Brewing-Logistic-Regression-then-Going-Deeper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/Brewing-Logistic-Regression-then-Going-Deeper/" class="post-title-link" itemprop="url">Brewing Logistic Regression then Going Deeper</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-02 16:53:00" itemprop="dateCreated datePublished" datetime="2018-01-02T16:53:00+08:00">2018-01-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/machine-learning/" itemprop="url" rel="index"><span itemprop="name">machine learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><p>While Caffe is made for deep networks it can likewise represent “shallow” models like logistic regression for classification. We’ll do simple logistic regression on synthetic data that we’ll generate and save to HDF5 to feed vectors to Caffe. Once that model is done, we’ll add layers to improve accuracy. That’s what Caffe is about: define a model, experiment, and then deploy.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.chdir(<span class="string">&#x27;..&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.insert(<span class="number">0</span>, <span class="string">&#x27;./python&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> caffe</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> h5py</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> tempfile</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sklearn</span><br><span class="line"><span class="keyword">import</span> sklearn.datasets</span><br><span class="line"><span class="keyword">import</span> sklearn.linear_model</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure>

<p>Synthesize a dataset of 10,000 4-vectors for binary classification with 2 informative features and 2 noise features.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">X, y = sklearn.datasets.make_classification(</span><br><span class="line">    n_samples=<span class="number">10000</span>, n_features=<span class="number">4</span>, n_redundant=<span class="number">0</span>, n_informative=<span class="number">2</span>, </span><br><span class="line">    n_clusters_per_class=<span class="number">2</span>, hypercube=<span class="literal">False</span>, random_state=<span class="number">0</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;data,&#x27;</span>,X.shape,y.shape <span class="comment"># (10000, 4) (10000,) x0,x1,x2,x3, y</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Split into train and test</span></span><br><span class="line">X, Xt, y, yt = sklearn.model_selection.train_test_split(X, y)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;train,&#x27;</span>,X.shape,y.shape  <span class="comment">#train: (7500, 4) (7500,)</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;test,&#x27;</span>, Xt.shape,yt.shape<span class="comment">#test:  (2500, 4) (2500,)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Visualize sample of the data</span></span><br><span class="line">ind = np.random.permutation(X.shape[<span class="number">0</span>])[:<span class="number">1000</span>] <span class="comment"># (7500,)---&gt;(1000,)   x0,x1,x2,x3, y</span></span><br><span class="line">df = pd.DataFrame(X[ind])</span><br><span class="line">_ = pd.plotting.scatter_matrix(df, figsize=(<span class="number">9</span>, <span class="number">9</span>), diagonal=<span class="string">&#x27;kde&#x27;</span>, marker=<span class="string">&#x27;o&#x27;</span>, s=<span class="number">40</span>, alpha=<span class="number">.4</span>, c=y[ind])</span><br></pre></td></tr></table></figure>

<pre><code>data, (10000, 4) (10000,)
train, (7500, 4) (7500,)
test, (2500, 4) (2500,)
</code></pre>
<p><img src="https://kezunlin.me/images/posts/635233-20180102164944737-905775071.png" alt="scatter matrix"></p>
<p>Learn and evaluate scikit-learn’s logistic regression with stochastic gradient descent (SGD) training. Time and check the classifier’s accuracy.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">%%timeit</span><br><span class="line"><span class="comment"># Train and test the scikit-learn SGD logistic regression.</span></span><br><span class="line">clf = sklearn.linear_model.SGDClassifier(</span><br><span class="line">    loss=<span class="string">&#x27;log&#x27;</span>, n_iter=<span class="number">1000</span>, penalty=<span class="string">&#x27;l2&#x27;</span>, alpha=<span class="number">5e-4</span>, class_weight=<span class="string">&#x27;balanced&#x27;</span>)</span><br><span class="line"></span><br><span class="line">clf.fit(X, y)</span><br><span class="line">yt_pred = clf.predict(Xt)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Accuracy: &#123;:.3f&#125;&#x27;</span>.<span class="built_in">format</span>(sklearn.metrics.accuracy_score(yt, yt_pred)))</span><br></pre></td></tr></table></figure>

<pre><code>Accuracy: 0.781
Accuracy: 0.781
Accuracy: 0.781
Accuracy: 0.781
1 loop, best of 3: 372 ms per loop
</code></pre>
<p>Save the dataset to HDF5 for loading in Caffe.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Write out the data to HDF5 files in a temp directory.</span></span><br><span class="line"><span class="comment"># This file is assumed to be caffe_root/examples/hdf5_classification.ipynb</span></span><br><span class="line">dirname = os.path.abspath(<span class="string">&#x27;./examples/hdf5_classification/data&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(dirname):</span><br><span class="line">    os.makedirs(dirname)</span><br><span class="line"></span><br><span class="line">train_filename = os.path.join(dirname, <span class="string">&#x27;train.h5&#x27;</span>)</span><br><span class="line">test_filename = os.path.join(dirname, <span class="string">&#x27;test.h5&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># HDF5DataLayer source should be a file containing a list of HDF5 filenames.</span></span><br><span class="line"><span class="comment"># To show this off, we&#x27;ll list the same data file twice.</span></span><br><span class="line"><span class="keyword">with</span> h5py.File(train_filename, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f[<span class="string">&#x27;data&#x27;</span>] = X</span><br><span class="line">    f[<span class="string">&#x27;label&#x27;</span>] = y.astype(np.float32)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(dirname, <span class="string">&#x27;train.txt&#x27;</span>), <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(train_filename + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    f.write(train_filename + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># HDF5 is pretty efficient, but can be further compressed.</span></span><br><span class="line">comp_kwargs = &#123;<span class="string">&#x27;compression&#x27;</span>: <span class="string">&#x27;gzip&#x27;</span>, <span class="string">&#x27;compression_opts&#x27;</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">with</span> h5py.File(test_filename, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.create_dataset(<span class="string">&#x27;data&#x27;</span>, data=Xt, **comp_kwargs)</span><br><span class="line">    f.create_dataset(<span class="string">&#x27;label&#x27;</span>, data=yt.astype(np.float32), **comp_kwargs)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(dirname, <span class="string">&#x27;test.txt&#x27;</span>), <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(test_filename + <span class="string">&#x27;\n&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>Let’s define logistic regression in Caffe through Python net specification. This is a quick and natural way to define nets that sidesteps manually editing the protobuf model.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> caffe <span class="keyword">import</span> layers <span class="keyword">as</span> L</span><br><span class="line"><span class="keyword">from</span> caffe <span class="keyword">import</span> params <span class="keyword">as</span> P</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">logreg</span>(<span class="params">hdf5, batch_size</span>):</span><br><span class="line">    <span class="comment"># logistic regression: data, matrix multiplication, and 2-class softmax loss</span></span><br><span class="line">    n = caffe.NetSpec()</span><br><span class="line">    n.data, n.label = L.HDF5Data(batch_size=batch_size, source=hdf5, ntop=<span class="number">2</span>)</span><br><span class="line">    n.ip1 = L.InnerProduct(n.data, num_output=<span class="number">2</span>, weight_filler=<span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;xavier&#x27;</span>))</span><br><span class="line">    n.accuracy = L.Accuracy(n.ip1, n.label)</span><br><span class="line">    n.loss = L.SoftmaxWithLoss(n.ip1, n.label)</span><br><span class="line">    <span class="keyword">return</span> n.to_proto()</span><br><span class="line"></span><br><span class="line">train_net_path = <span class="string">&#x27;examples/hdf5_classification/logreg_auto_train.prototxt&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(train_net_path, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="built_in">str</span>(logreg(<span class="string">&#x27;examples/hdf5_classification/data/train.txt&#x27;</span>, <span class="number">10</span>)))</span><br><span class="line"></span><br><span class="line">test_net_path = <span class="string">&#x27;examples/hdf5_classification/logreg_auto_test.prototxt&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(test_net_path, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="built_in">str</span>(logreg(<span class="string">&#x27;examples/hdf5_classification/data/test.txt&#x27;</span>, <span class="number">10</span>)))</span><br></pre></td></tr></table></figure>

<p>Now, we’ll define our “solver” which trains the network by specifying the locations of the train and test nets we defined above, as well as setting values for various parameters used for learning, display, and “snapshotting”.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> caffe.proto <span class="keyword">import</span> caffe_pb2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">solver</span>(<span class="params">train_net_path, test_net_path</span>):</span><br><span class="line">    s = caffe_pb2.SolverParameter()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Specify locations of the train and test networks.</span></span><br><span class="line">    s.train_net = train_net_path</span><br><span class="line">    s.test_net.append(test_net_path)</span><br><span class="line"></span><br><span class="line">    s.test_interval = <span class="number">1000</span>  <span class="comment"># Test after every 1000 training iterations.</span></span><br><span class="line">    s.test_iter.append(<span class="number">250</span>) <span class="comment"># Test 250 &quot;batches&quot; each time we test.</span></span><br><span class="line"></span><br><span class="line">    s.max_iter = <span class="number">10000</span>      <span class="comment"># # of times to update the net (training iterations)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Set the initial learning rate for stochastic gradient descent (SGD).</span></span><br><span class="line">    s.base_lr = <span class="number">0.01</span>        </span><br><span class="line"></span><br><span class="line">    <span class="comment"># Set `lr_policy` to define how the learning rate changes during training.</span></span><br><span class="line">    <span class="comment"># Here, we &#x27;step&#x27; the learning rate by multiplying it by a factor `gamma`</span></span><br><span class="line">    <span class="comment"># every `stepsize` iterations.</span></span><br><span class="line">    s.lr_policy = <span class="string">&#x27;step&#x27;</span></span><br><span class="line">    s.gamma = <span class="number">0.1</span></span><br><span class="line">    s.stepsize = <span class="number">5000</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Set other optimization parameters. Setting a non-zero `momentum` takes a</span></span><br><span class="line">    <span class="comment"># weighted average of the current gradient and previous gradients to make</span></span><br><span class="line">    <span class="comment"># learning more stable. L2 weight decay regularizes learning, to help prevent</span></span><br><span class="line">    <span class="comment"># the model from overfitting.</span></span><br><span class="line">    s.momentum = <span class="number">0.9</span></span><br><span class="line">    s.weight_decay = <span class="number">5e-4</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Display the current training loss and accuracy every 1000 iterations.</span></span><br><span class="line">    s.display = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Snapshots are files used to store networks we&#x27;ve trained.  Here, we&#x27;ll</span></span><br><span class="line">    <span class="comment"># snapshot every 10K iterations -- just once at the end of training.</span></span><br><span class="line">    <span class="comment"># For larger networks that take longer to train, you may want to set</span></span><br><span class="line">    <span class="comment"># snapshot &lt; max_iter to save the network and training state to disk during</span></span><br><span class="line">    <span class="comment"># optimization, preventing disaster in case of machine crashes, etc.</span></span><br><span class="line">    s.snapshot = <span class="number">10000</span></span><br><span class="line">    s.snapshot_prefix = <span class="string">&#x27;examples/hdf5_classification/data/train&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># We&#x27;ll train on the CPU for fair benchmarking against scikit-learn.</span></span><br><span class="line">    <span class="comment"># Changing to GPU should result in much faster training!</span></span><br><span class="line">    s.solver_mode = caffe_pb2.SolverParameter.CPU</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">solver_path = <span class="string">&#x27;examples/hdf5_classification/logreg_solver.prototxt&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(solver_path, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="built_in">str</span>(solver(train_net_path, test_net_path)))</span><br></pre></td></tr></table></figure>

<p>Time to learn and evaluate our Caffeinated logistic regression in Python.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">%%timeit</span><br><span class="line">caffe.set_mode_cpu()</span><br><span class="line">solver = caffe.get_solver(solver_path)</span><br><span class="line">solver.solve()</span><br><span class="line"></span><br><span class="line">accuracy = <span class="number">0</span></span><br><span class="line">batch_size = solver.test_nets[<span class="number">0</span>].blobs[<span class="string">&#x27;data&#x27;</span>].num</span><br><span class="line">test_iters = <span class="built_in">int</span>(<span class="built_in">len</span>(Xt) / batch_size)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(test_iters):</span><br><span class="line">    solver.test_nets[<span class="number">0</span>].forward()</span><br><span class="line">    accuracy += solver.test_nets[<span class="number">0</span>].blobs[<span class="string">&#x27;accuracy&#x27;</span>].data</span><br><span class="line">accuracy /= test_iters</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Accuracy: &#123;:.3f&#125;&quot;</span>.<span class="built_in">format</span>(accuracy))</span><br></pre></td></tr></table></figure>

<pre><code>Accuracy: 0.770
Accuracy: 0.770
Accuracy: 0.770
Accuracy: 0.770
1 loop, best of 3: 195 ms per loop
</code></pre>
<p>Do the same through the command line interface for detailed output on the model and solving.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!./build/tools/caffe train -solver examples/hdf5_classification/logreg_solver.prototxt</span><br></pre></td></tr></table></figure>

<pre><code>I0224 00:32:03.232779   655 caffe.cpp:178] Use CPU.
I0224 00:32:03.391911   655 solver.cpp:48] Initializing solver from parameters: 
train_net: &quot;examples/hdf5_classification/logreg_auto_train.prototxt&quot;
test_net: &quot;examples/hdf5_classification/logreg_auto_test.prototxt&quot;
......
I0224 00:32:04.087514   655 solver.cpp:406]     Test net output #0: accuracy = 0.77
I0224 00:32:04.087532   655 solver.cpp:406]     Test net output #1: loss = 0.593815 (* 1 = 0.593815 loss)
I0224 00:32:04.087541   655 solver.cpp:323] Optimization Done.
I0224 00:32:04.087548   655 caffe.cpp:222] Optimization Done.
</code></pre>
<p>If you look at output or the <code>logreg_auto_train.prototxt</code>, you’ll see that the model is simple logistic regression.<br>We can make it a little more advanced by introducing a non-linearity between weights that take the input and weights that give the output – now we have a two-layer network.<br>That network is given in <code>nonlinear_auto_train.prototxt</code>, and that’s the only change made in <code>nonlinear_logreg_solver.prototxt</code> which we will now use.</p>
<p>The final accuracy of the new network should be higher than logistic regression!</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> caffe <span class="keyword">import</span> layers <span class="keyword">as</span> L</span><br><span class="line"><span class="keyword">from</span> caffe <span class="keyword">import</span> params <span class="keyword">as</span> P</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">nonlinear_net</span>(<span class="params">hdf5, batch_size</span>):</span><br><span class="line">    <span class="comment"># one small nonlinearity, one leap for model kind</span></span><br><span class="line">    n = caffe.NetSpec()</span><br><span class="line">    n.data, n.label = L.HDF5Data(batch_size=batch_size, source=hdf5, ntop=<span class="number">2</span>)</span><br><span class="line">    <span class="comment"># define a hidden layer of dimension 40</span></span><br><span class="line">    n.ip1 = L.InnerProduct(n.data, num_output=<span class="number">40</span>, weight_filler=<span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;xavier&#x27;</span>))</span><br><span class="line">    <span class="comment"># transform the output through the ReLU (rectified linear) non-linearity</span></span><br><span class="line">    n.relu1 = L.ReLU(n.ip1, in_place=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># score the (now non-linear) features</span></span><br><span class="line">    n.ip2 = L.InnerProduct(n.ip1, num_output=<span class="number">2</span>, weight_filler=<span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;xavier&#x27;</span>))</span><br><span class="line">    <span class="comment"># same accuracy and loss as before</span></span><br><span class="line">    n.accuracy = L.Accuracy(n.ip2, n.label)</span><br><span class="line">    n.loss = L.SoftmaxWithLoss(n.ip2, n.label)</span><br><span class="line">    <span class="keyword">return</span> n.to_proto()</span><br><span class="line"></span><br><span class="line">train_net_path = <span class="string">&#x27;examples/hdf5_classification/nonlinear_auto_train.prototxt&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(train_net_path, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="built_in">str</span>(nonlinear_net(<span class="string">&#x27;examples/hdf5_classification/data/train.txt&#x27;</span>, <span class="number">10</span>)))</span><br><span class="line"></span><br><span class="line">test_net_path = <span class="string">&#x27;examples/hdf5_classification/nonlinear_auto_test.prototxt&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(test_net_path, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="built_in">str</span>(nonlinear_net(<span class="string">&#x27;examples/hdf5_classification/data/test.txt&#x27;</span>, <span class="number">10</span>)))</span><br><span class="line"></span><br><span class="line">solver_path = <span class="string">&#x27;examples/hdf5_classification/nonlinear_logreg_solver.prototxt&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(solver_path, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="built_in">str</span>(solver(train_net_path, test_net_path)))</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">%%timeit</span><br><span class="line">caffe.set_mode_cpu()</span><br><span class="line">solver = caffe.get_solver(solver_path)</span><br><span class="line">solver.solve()</span><br><span class="line"></span><br><span class="line">accuracy = <span class="number">0</span></span><br><span class="line">batch_size = solver.test_nets[<span class="number">0</span>].blobs[<span class="string">&#x27;data&#x27;</span>].num</span><br><span class="line">test_iters = <span class="built_in">int</span>(<span class="built_in">len</span>(Xt) / batch_size)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(test_iters):</span><br><span class="line">    solver.test_nets[<span class="number">0</span>].forward()</span><br><span class="line">    accuracy += solver.test_nets[<span class="number">0</span>].blobs[<span class="string">&#x27;accuracy&#x27;</span>].data</span><br><span class="line">accuracy /= test_iters</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Accuracy: &#123;:.3f&#125;&quot;</span>.<span class="built_in">format</span>(accuracy))</span><br></pre></td></tr></table></figure>

<pre><code>Accuracy: 0.838
Accuracy: 0.837
Accuracy: 0.838
Accuracy: 0.834
1 loop, best of 3: 277 ms per loop
</code></pre>
<p>Do the same through the command line interface for detailed output on the model and solving.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!./build/tools/caffe train -solver examples/hdf5_classification/nonlinear_logreg_solver.prototxt</span><br></pre></td></tr></table></figure>

<pre><code>I0224 00:32:05.654265   658 caffe.cpp:178] Use CPU.
I0224 00:32:05.810444   658 solver.cpp:48] Initializing solver from parameters: 
train_net: &quot;examples/hdf5_classification/nonlinear_auto_train.prototxt&quot;
test_net: &quot;examples/hdf5_classification/nonlinear_auto_test.prototxt&quot;
......
I0224 00:32:06.078208   658 solver.cpp:406]     Test net output #0: accuracy = 0.8388
I0224 00:32:06.078225   658 solver.cpp:406]     Test net output #1: loss = 0.382042 (* 1 = 0.382042 loss)
I0224 00:32:06.078234   658 solver.cpp:323] Optimization Done.
I0224 00:32:06.078241   658 caffe.cpp:222] Optimization Done.
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Clean up (comment this out if you want to examine the hdf5_classification/data directory).</span></span><br><span class="line">shutil.rmtree(dirname)</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="http://demo.vislab.berkeleyvision.org/">demo</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/BVLC/caffe">caffe git</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>20180102: created.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://kezunlin.me/blog/Using-Github-Pages-and-Hexo-to-manage-personal-blogs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kezunlin">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kezunlin's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/Using-Github-Pages-and-Hexo-to-manage-personal-blogs/" class="post-title-link" itemprop="url">Part 1 Using Github Pages and Hexo to manage personal blogs on Ubuntu</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-12-26 17:28:00" itemprop="dateCreated datePublished" datetime="2017-12-26T17:28:00+08:00">2017-12-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-10-14 13:39:28" itemprop="dateModified" datetime="2024-10-14T13:39:28+08:00">2024-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h2><ul>
<li><strong><a href="https://kezunlin.me/post/98df88a8/">Part 1: Using Github Pages and Hexo to manage personal blogs on Ubuntu.</a></strong></li>
<li><a href="https://kezunlin.me/post/41448ed1/">Part 2: Using Github Pages and Hexo to manage personal blogs on windows.</a></li>
</ul>
<h2 id="Hexo-Tutorial"><a href="#Hexo-Tutorial" class="headerlink" title="Hexo Tutorial"></a>Hexo Tutorial</h2><p>Github recommends us to use Jekyll to manage static pages, which is based on Ruby and is difficult for us to install and configure. So we use Hexo instead. Hexo is a static blog framework similar to Jekyll ,which is based on Node.js and easier for use to use.</p>
<h3 id="use-Github-to-create-repo"><a href="#use-Github-to-create-repo" class="headerlink" title="use Github to create repo"></a>use Github to create repo</h3><ol>
<li><p>create a new repo in github, name by <code>username</code>.github.io: <code>kezunlin.github.io</code></p>
</li>
<li><p>Setting | Github Pages, choose a theame and deploy.</p>
</li>
</ol>
<h3 id="install-nodejs-by-apt-get"><a href="#install-nodejs-by-apt-get" class="headerlink" title="install nodejs by apt-get"></a><del>install nodejs by apt-get</del></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get -y install nodejs</span><br><span class="line"><span class="built_in">sudo</span> apt-get -y install nodejs-legacy</span><br><span class="line"><span class="built_in">sudo</span> apt-get -y install npm</span><br><span class="line">node -v </span><br><span class="line">npm -v </span><br></pre></td></tr></table></figure>

<h3 id="install-nodejs-from-source"><a href="#install-nodejs-from-source" class="headerlink" title="install nodejs from source"></a>install nodejs from source</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># download and compile</span></span><br><span class="line">wget https://nodejs.org/dist/v8.9.3/node-v8.9.3.tar.gz</span><br><span class="line">tar xzvf node-v8.9.3.tar.gz</span><br><span class="line"><span class="built_in">cd</span> node-v8.9.3</span><br><span class="line">./configure</span><br><span class="line">make -j8</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># link to /usr/bin</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /usr/local/bin/node /usr/bin/node</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /usr/local/bin/npm /usr/bin/npm</span><br><span class="line"></span><br><span class="line"><span class="comment"># check version</span></span><br><span class="line">node -v </span><br><span class="line">npm -v </span><br></pre></td></tr></table></figure>

<h3 id="test-node"><a href="#test-node" class="headerlink" title="test node"></a>test node</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> hello.js</span><br><span class="line">console.log(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line"></span><br><span class="line">node hello.js</span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure>

<h3 id="install-hexo"><a href="#install-hexo" class="headerlink" title="install hexo"></a>install hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install hexo globally</span></span><br><span class="line"><span class="built_in">sudo</span> npm install hexo-cli -g</span><br><span class="line"><span class="comment">#sudo npm install hexo --save</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># use cnpm from taobao instead of offical npm, which is slow for chinese users.</span></span><br><span class="line"><span class="built_in">sudo</span> npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>
<p>use <code>cnpm</code> instead of <code>npm</code> (optional)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cnpm install </span></span><br><span class="line"><span class="built_in">sudo</span> cnpm install hexo-cli -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># check version</span></span><br><span class="line">hexo -v</span><br></pre></td></tr></table></figure>

<h3 id="create-hexo-site"><a href="#create-hexo-site" class="headerlink" title="create hexo site"></a>create hexo site</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> workspace</span><br><span class="line"><span class="built_in">mkdir</span> blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line"></span><br><span class="line">hexo init</span><br><span class="line"><span class="comment">#npm install</span></span><br><span class="line">hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>

<blockquote>
<p>now we can visit <a href="localhost:4000">localhost:4000</a> and create posts.</p>
</blockquote>
<h3 id="deploy-to-github"><a href="#deploy-to-github" class="headerlink" title="deploy to github"></a>deploy to github</h3><p>vim <code>blog/_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repo:</span>   <span class="string">git@github.com:kezunlin/kezunlin.github.io.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">master</span>    </span><br></pre></td></tr></table></figure>
<p>generate ssh-key and copy to <code>github</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># generate ssh-key </span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">ssh-keygen</span><br><span class="line"><span class="built_in">cat</span> .ssh/id_rsa.pub</span><br><span class="line"></span><br><span class="line"><span class="comment"># copy content to github</span></span><br><span class="line"><span class="comment"># https://github.com/settings/keys</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># install plungin and deploy to github</span></span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ssh-keygen -t rsa -C “<a href="mailto:&#121;&#x6f;&#117;&#x72;&#x5f;&#x65;&#x6d;&#x61;&#105;&#x6c;&#64;&#x65;&#120;&#x61;&#x6d;&#x70;&#x6c;&#101;&#x2e;&#99;&#111;&#109;">&#121;&#x6f;&#117;&#x72;&#x5f;&#x65;&#x6d;&#x61;&#105;&#x6c;&#64;&#x65;&#120;&#x61;&#x6d;&#x70;&#x6c;&#101;&#x2e;&#99;&#111;&#109;</a>“</p>
</blockquote>
<blockquote>
<p>now we can visit <a target="_blank" rel="noopener" href="https://kezunlin.github.io/">https://kezunlin.github.io/</a></p>
</blockquote>
<h3 id="add-README-and-skip-render"><a href="#add-README-and-skip-render" class="headerlink" title="add README and skip render"></a>add <strong>README</strong> and skip render</h3><ol>
<li><p>add <code>README.md</code> to <strong>source</strong> folder</p>
</li>
<li><p>edit <code>blog/_config.yml</code> to skip render <code>README.md</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">skip_render:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">README.md</span>        </span><br></pre></td></tr></table></figure>
</li>
<li><p>use <code>hexo generate</code> to copy <code>README.md</code> from <strong>source&#x2F;</strong> to <strong>public&#x2F;</strong></p>
</li>
</ol>
<h3 id="new-post-and-deploy-again"><a href="#new-post-and-deploy-again" class="headerlink" title="new post and deploy again"></a>new post and deploy again</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&#x27;first post&#x27;</span></span><br><span class="line">vim <span class="built_in">source</span>/_posts/first-post.md</span><br><span class="line"></span><br><span class="line">hexo generate</span><br><span class="line">hexo server</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<p>now we can visit <a target="_blank" rel="noopener" href="https://kezunlin.github.io/">https://kezunlin.github.io/</a> and see our first post.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h2 id="Appendix"><a href="#Appendix" class="headerlink" title="Appendix"></a>Appendix</h2><h3 id="hexo-commands"><a href="#hexo-commands" class="headerlink" title="hexo commands"></a>hexo commands</h3><p>Hexo common commands：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;postName&quot;</span>       <span class="comment">#new post</span></span><br><span class="line">hexo new page <span class="string">&quot;pageName&quot;</span>  <span class="comment">#new page</span></span><br><span class="line">hexo generate             <span class="comment">#generate static files to public/</span></span><br><span class="line">hexo server               <span class="comment">#start server on localhost:4000 </span></span><br><span class="line">hexo deploy               <span class="comment">#push .deploy_git/ to GitHub</span></span><br><span class="line">hexo clean                <span class="comment">#clean files  </span></span><br></pre></td></tr></table></figure>

<p>Hexo short commands:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo n == hexo new</span><br><span class="line">hexo g == hexo generate</span><br><span class="line">hexo s == hexo server</span><br><span class="line">hexo d == hexo deploy    </span><br></pre></td></tr></table></figure>

<p>Hexo composite commands:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo server -g</span><br><span class="line">hexo deploy -g</span><br></pre></td></tr></table></figure>

<h3 id="front-matter"><a href="#front-matter" class="headerlink" title="front-matter"></a>front-matter</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Using Github Pages and Hexo to manage personal blogs</span><br><span class="line">date: 2017-12-26 17:28:10</span><br><span class="line">categories: tutorial</span><br><span class="line">tags: </span><br><span class="line"><span class="bullet">    -</span> github pages</span><br><span class="line"><span class="bullet">    -</span> hexo</span><br><span class="line"><span class="bullet">    -</span> nodejs</span><br><span class="line"><span class="bullet">    -</span> npm</span><br><span class="line">---    </span><br></pre></td></tr></table></figure>

<blockquote>
<p>see <a target="_blank" rel="noopener" href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md">front-matter details</a></p>
</blockquote>
<h3 id="more"><a href="#more" class="headerlink" title="more"></a>more</h3><p>use <code>&lt;!--more--&gt;</code> to control web content</p>
<h3 id="Use-next-theme"><a href="#Use-next-theme" class="headerlink" title="Use next theme"></a>Use next theme</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>

<p>vim <code>blog/_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#theme: landscape</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure>

<h3 id="Avatar"><a href="#Avatar" class="headerlink" title="Avatar"></a>Avatar</h3><p>edit <code>blog\themes\next\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">avatar:</span> <span class="string">/images/avatar.jpg</span></span><br></pre></td></tr></table></figure>

<h3 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h3><p>install plugin by </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install &lt;plugin-name&gt; --save</span><br></pre></td></tr></table></figure>

<h4 id="hexo-admin"><a href="#hexo-admin" class="headerlink" title="hexo admin"></a>hexo admin</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save hexo-admin</span><br></pre></td></tr></table></figure>

<blockquote>
<p>now we can visit <a target="_blank" rel="noopener" href="http://localhost:4000/admin/">http://localhost:4000/admin/</a></p>
</blockquote>
<h4 id="git-deployer"><a href="#git-deployer" class="headerlink" title="git deployer"></a>git deployer</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<h4 id="rss-feed"><a href="#rss-feed" class="headerlink" title="rss feed"></a>rss feed</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure>

<blockquote>
<p> visit <a target="_blank" rel="noopener" href="http://localhost:4000/atom.xml">http://localhost:4000/atom.xml</a></p>
</blockquote>
<h4 id="sitemap"><a href="#sitemap" class="headerlink" title="sitemap"></a>sitemap</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure>

<p>vim <code>blog/_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>now we can visit <a target="_blank" rel="noopener" href="http://localhost:4000/sitemap.xml">http://localhost:4000/sitemap.xml</a></p>
</blockquote>
<h4 id="baidu-sitemap"><a href="#baidu-sitemap" class="headerlink" title="baidu sitemap"></a>baidu sitemap</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure>

<p>vim <code>blog/_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidusitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidusitemap.xml</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>now we can visit <a target="_blank" rel="noopener" href="http://localhost:4000/baidusitemap.xml">http://localhost:4000/baidusitemap.xml</a></p>
</blockquote>
<h4 id="perment-link"><a href="#perment-link" class="headerlink" title="perment link"></a>perment link</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure>

<p>edit <code>blog\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">post/:abbrlink/</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">    <span class="attr">alg:</span> <span class="string">crc32</span>  <span class="comment"># crc16(default) and crc32</span></span><br><span class="line">    <span class="attr">rep:</span> <span class="string">hex</span>    <span class="comment"># dec(default) and hex</span></span><br></pre></td></tr></table></figure>

<p>will fill <code>abbrlink</code> in your post.md</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">categories:</span><br><span class="line"><span class="bullet">-</span> tutorial</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">-</span> hexo</span><br><span class="line">abbrlink: 4a17b156</span><br><span class="line"><span class="section">date: 2017-12-26 17:20:10</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>

<h4 id="index-archive-category-tag"><a href="#index-archive-category-tag" class="headerlink" title="index&#x2F;archive&#x2F;category&#x2F;tag"></a>index&#x2F;archive&#x2F;category&#x2F;tag</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-archive --save</span><br><span class="line">npm install hexo-generator-category --save</span><br><span class="line">npm install hexo-generator-tag --save</span><br></pre></td></tr></table></figure>

<h4 id="tags-list-page"><a href="#tags-list-page" class="headerlink" title="tags list page"></a>tags list page</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;tags&quot;</span></span><br><span class="line"><span class="comment"># generate source/tags/index.md</span></span><br></pre></td></tr></table></figure>

<p>edit <code>source/tags/index.md</code></p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: tags</span><br><span class="line">date: 2017-12-27 15:46:09</span><br><span class="line"><span class="section">type: &quot;tags&quot;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>now we can visit <a target="_blank" rel="noopener" href="http://localhost:4000/tags/">http://localhost:4000/tags/</a></p>
</blockquote>
<h4 id="categories-list-page"><a href="#categories-list-page" class="headerlink" title="categories list page"></a>categories list page</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;categories&quot;</span></span><br><span class="line"><span class="comment"># generate source/categories/index.md</span></span><br></pre></td></tr></table></figure>

<p>edit <code>source/categories/index.md</code></p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: 2017-12-27 15:46:03</span><br><span class="line"><span class="section">type: &quot;categories&quot;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>now we can visit <a target="_blank" rel="noopener" href="http://localhost:4000/categories/">http://localhost:4000/categories/</a></p>
</blockquote>
<h4 id="local-search"><a href="#local-search" class="headerlink" title="local search"></a>local search</h4><p>install search plugin</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-generator-search --save</span><br></pre></td></tr></table></figure>

<p>edit <code>themes\next\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># create a new &#x27;Search&#x27; button next to &#x27;Archives&#x27;</span></span><br><span class="line">    <span class="comment"># if auto, trigger search by changing input</span></span><br><span class="line">    <span class="comment"># if manual, trigger search by pressing enter key or search button</span></span><br><span class="line">    <span class="attr">trigger:</span> <span class="string">auto</span></span><br><span class="line">    <span class="comment"># show top n results per article, show all results by setting to -1</span></span><br><span class="line">    <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>edit <code>blog\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">    <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure>

<h3 id="Upload-images-to-cnblog"><a href="#Upload-images-to-cnblog" class="headerlink" title="Upload images to cnblog"></a>Upload images to cnblog</h3><ol>
<li>install <a target="_blank" rel="noopener" href="https://github.com/FrankFan/img-uploader">img-uploader</a> chrome extension by <a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/image-uploader/ncdoclefjnhbjnbcdpekmmgmgbdodklo?hl=zh-CN">here</a></li>
<li>upload image and get url.</li>
<li>use url in markdown.</li>
</ol>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![alt](http://images2017.cnblogs.com/.../123.png &quot;title&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="Multiple-deploy"><a href="#Multiple-deploy" class="headerlink" title="Multiple deploy"></a>Multiple deploy</h3><ul>
<li>deploy to github.com: <code>username.github.io</code></li>
<li>deploy to coding.net (gitcaffe): <code>username</code></li>
</ul>
<p>vim <code>blog/_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">      <span class="attr">github:</span> <span class="string">git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git,master</span></span><br><span class="line">      <span class="attr">coding:</span> <span class="string">git@git.coding.net:&lt;username&gt;/&lt;username&gt;.git,master</span></span><br></pre></td></tr></table></figure>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- kzl in-article ad -->
<p><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-5653382914441020"
     data-ad-slot="7925631830"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


<h2 id="Advanced"><a href="#Advanced" class="headerlink" title="Advanced"></a>Advanced</h2><h3 id="custom-domain-and-https"><a href="#custom-domain-and-https" class="headerlink" title="custom domain and https"></a>custom domain and https</h3><ul>
<li>blog: Github pages</li>
<li>SSL：CloudFlare</li>
<li>domain: Godaddy (dns nameservers from CloudFlare)</li>
</ul>
<p>get ips by </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dig kezunlin.github.io +noall +answer</span><br><span class="line"></span><br><span class="line">185.199.108.153</span><br><span class="line">185.199.109.153</span><br><span class="line">185.199.110.153</span><br><span class="line">185.199.111.153</span><br></pre></td></tr></table></figure>

<ul>
<li>A: point to 185.199.108&#x2F;109&#x2F;110&#x2F;111.153 </li>
<li>CNAME: point to <code>kezunlin.me</code></li>
</ul>
<p>steps:</p>
<ol>
<li>get <code>kezunlin.me</code> from <code>Godaddy.com</code></li>
<li>add <code>kezunlin.me</code> to github blog’s <code>blog\source\CNAME</code> file</li>
<li>register <code>CloudFlare.com</code> and add <code>A</code> record with github page IP <code>185.199.108/109/110/111.153</code><br><img src="https://kezunlin.me/images/posts/1864218-20191127161452692-1952610702.png" alt="cloudflare a records"></li>
<li>Go to <code>Godaddy.com</code> and add dns nameservers <code>dina.ns.cloudflare.com</code> and <code>paul.ns.cloudflare.com</code> from <a target="_blank" rel="noopener" href="https://dcc.godaddy.com/manage/KEZUNLIN.ME/dns">here</a><br><img src="https://kezunlin.me/images/posts/1864218-20191127161934648-550417912.png" alt="godaddy dns"></li>
<li>wait for some hours(24 hours) and we get results from <code>CloudFlare</code></li>
</ol>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kezunlin.me</span><br><span class="line">Status: Active</span><br><span class="line"></span><br><span class="line">This website is active on Cloudflare.</span><br><span class="line"></span><br><span class="line">Universal SSL Status Active Certificate</span><br></pre></td></tr></table></figure>

<p><code>Active</code> means nameservers take effect.</p>
<p>configure <code>Page Rules | rules for Always use HTTPS</code></p>
<h3 id="google-analytics"><a href="#google-analytics" class="headerlink" title="google analytics"></a>google analytics</h3><ol>
<li>get <code>google-site-verification</code> from google search console and add to <code>themes/next/layout/_partials/head.swig</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=<span class="string">&quot;google-site-verification&quot;</span> content=<span class="string">&quot;***&quot;</span> /&gt;</span><br></pre></td></tr></table></figure></li>
<li>get <code>google_analytics</code> and edit <code>themes\next\_config.yml</code><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">google_analytics:</span> <span class="string">UA-***</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="google-adsense"><a href="#google-adsense" class="headerlink" title="google adsense"></a>google adsense</h3><ul>
<li>google-adsense-header.js</li>
<li>google-adsense-display.js</li>
<li>google-adsense-article.js</li>
</ul>
<p>google-adsense-header.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script data-ad-client=<span class="string">&quot;ca-pub-5653382914441020&quot;</span> <span class="keyword">async</span> src=<span class="string">&quot;https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="baidu-zhanzhang"><a href="#baidu-zhanzhang" class="headerlink" title="baidu zhanzhang"></a>baidu zhanzhang</h3><p>get <code>baidu-site-verification</code> from <code>https://ziyuan.baidu.com/</code> and add to <code>themes/next/layout/_partials/head.swig</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=<span class="string">&quot;baidu-site-verification&quot;</span> content=<span class="string">&quot;***&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="360-zhanzhang"><a href="#360-zhanzhang" class="headerlink" title="360 zhanzhang"></a>360 zhanzhang</h3><p>get <code>360-site-verification</code> from <code>http://zhanzhang.so.com/sitetool/</code> and add to <code>themes/next/layout/_partials/head.swig</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=<span class="string">&quot;360-site-verification&quot;</span> content=<span class="string">&quot;***&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="nofollow"><a href="#nofollow" class="headerlink" title="nofollow"></a>nofollow</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-filter-nofollow --save</span><br></pre></td></tr></table></figure>

<p>edit <code>blog\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">nofollow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;exclude1.com&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;exclude2.com&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>see <a target="_blank" rel="noopener" href="https://blog.skk.moe/post/hexo-filter-nofollow-joined-hexo-official-plugin/">hexo-filter-nofollow</a></p>
</blockquote>
<h3 id="code-highlight"><a href="#code-highlight" class="headerlink" title="code highlight"></a>code highlight</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save hexo-prism-plugin</span><br></pre></td></tr></table></figure>

<p>edit <code>blog\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">prism_plugin:</span></span><br><span class="line">  <span class="attr">mode:</span> <span class="string">&#x27;preprocess&#x27;</span>    <span class="comment"># realtime/preprocess</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">&#x27;tomorrow&#x27;</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span>    <span class="comment"># default false</span></span><br><span class="line">  <span class="attr">custom_css:</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>see <a target="_blank" rel="noopener" href="https://prismjs.com/#languages-list">prismjs</a> and <a target="_blank" rel="noopener" href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md">matery</a></p>
</blockquote>
<h3 id="permalink-pinyin"><a href="#permalink-pinyin" class="headerlink" title="permalink-pinyin"></a>permalink-pinyin</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i hexo-permalink-pinyin --save</span><br></pre></td></tr></table></figure>

<p>edit <code>blog\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink_pinyin:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">separator:</span> <span class="string">&#x27;-&#x27;</span> <span class="comment"># default: &#x27;-&#x27;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>only for post url with chinese words</p>
</blockquote>
<h3 id="recommend-posts"><a href="#recommend-posts" class="headerlink" title="recommend posts"></a>recommend posts</h3><p>install plugin</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-recommended-posts --save</span><br><span class="line">hexo recommend</span><br></pre></td></tr></table></figure>

<p>edit <code>blog\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">recommended_posts:</span></span><br><span class="line">  <span class="attr">autoDisplay:</span> <span class="literal">false</span> <span class="comment"># 自动在文章底部显示推荐文章，如果你使用Material-X主题，这里要设置为false。</span></span><br><span class="line">  <span class="attr">server:</span> <span class="string">https://api.truelaurel.com</span> <span class="comment"># 后端推荐服务器地址</span></span><br><span class="line">  <span class="attr">timeoutInMillis:</span> <span class="number">10000</span> <span class="comment"># 服务时长，超过此时长，则使用离线推荐模式</span></span><br><span class="line">  <span class="attr">excludePattern:</span> []</span><br><span class="line">  <span class="attr">titleHtml:</span> <span class="string">Related</span> <span class="string">Recommend</span> <span class="string">Posts</span> <span class="comment">#自定义标题</span></span><br><span class="line">  <span class="attr">internalLinks:</span> <span class="number">4</span> <span class="comment"># 内部文章数量</span></span><br><span class="line">  <span class="attr">externalLinks:</span> <span class="number">1</span> <span class="comment"># 外部文章数量</span></span><br><span class="line">  <span class="attr">fixedNumber:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="related-posts"><a href="#related-posts" class="headerlink" title="related posts"></a>related posts</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-related-popular-posts --save</span><br></pre></td></tr></table></figure>

<blockquote>
<p>see <a target="_blank" rel="noopener" href="https://leafjame.github.io/posts/2114475547.html">here</a></p>
</blockquote>
<h3 id="pin-top-post"><a href="#pin-top-post" class="headerlink" title="pin top post"></a>pin top post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-generator-index-pin-top --save </span><br></pre></td></tr></table></figure>

<p>and edit <code>_posts/your-post.md</code></p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: hexo blog</span><br><span class="line">top: 1</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet"> -</span> hexo</span><br><span class="line">categories:</span><br><span class="line"><span class="section"> - blog</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>

<p>see <a target="_blank" rel="noopener" href="http://www.netcan666.com/2015/11/22/%E8%A7%A3%E5%86%B3Hexo%E7%BD%AE%E9%A1%B6%E9%97%AE%E9%A2%98/">here</a></p>
<h3 id="404"><a href="#404" class="headerlink" title="404"></a>404</h3><ol>
<li><code>hexo new page &quot;404&quot;</code></li>
<li>edit <code>blog\source\404\index.md</code></li>
<li><code>hexo generate</code> to generate <code>blog\public\404.html</code> </li>
<li><code>hexo deploy</code> to deploy blog to github.</li>
<li>now we can access <code>https://kezunlin.me/404.html</code></li>
</ol>
<blockquote>
<p>when 404 error occur, github will serve <code>https://kezunlin.me/404.html</code> as result.</p>
</blockquote>
<h3 id="stats-busuanzi"><a href="#stats-busuanzi" class="headerlink" title="stats busuanzi"></a>stats busuanzi</h3><p>edit <code>/theme/next/layout/_third-party/analytics/busuanzi-counter.swig</code></p>
<p>replace </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="keyword">async</span> src=<span class="string">&quot;https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>with</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="keyword">async</span> src=<span class="string">&quot;https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>edit <code>blog\themes\next\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">    <span class="comment"># count values only if the other configs are false</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># custom uv span for the whole site</span></span><br><span class="line">    <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">site_uv_header:</span> <span class="string">&lt;i</span> <span class="string">class=&quot;fa</span> <span class="string">fa-user&quot;&gt;&lt;/i&gt;</span> </span><br><span class="line">    <span class="attr">site_uv_footer:</span> <span class="string">Visitors</span></span><br><span class="line">    <span class="comment"># custom pv span for the whole site</span></span><br><span class="line">    <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">site_pv_header:</span> <span class="string">&lt;i</span> <span class="string">class=&quot;fa</span> <span class="string">fa-eye&quot;&gt;&lt;/i&gt;</span></span><br><span class="line">    <span class="attr">site_pv_footer:</span> <span class="string">Total</span> <span class="string">Visits</span></span><br><span class="line">    <span class="comment"># custom pv span for one page only</span></span><br><span class="line">    <span class="attr">page_pv:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">page_pv_header:</span> <span class="string">&lt;i</span> <span class="string">class=&quot;fa</span> <span class="string">fa-eye&quot;&gt;&lt;/i&gt;</span></span><br><span class="line">    <span class="attr">page_pv_footer:</span> <span class="string">Reads</span></span><br></pre></td></tr></table></figure>

<h3 id="gitment-for-comment-not"><a href="#gitment-for-comment-not" class="headerlink" title="gitment for comment (not)"></a>gitment for comment (not)</h3><p>We can use github repo to store blog site’s comments in <code>issues</code></p>
<h4 id="register-OAuth-Application"><a href="#register-OAuth-Application" class="headerlink" title="register OAuth Application"></a>register OAuth Application</h4><ol>
<li>visit <a target="_blank" rel="noopener" href="https://github.com/settings/applications/new">https://github.com/settings/applications/new</a></li>
<li>fill in blanks, callback URL: <code>https://kezunlin.me</code></li>
<li>get <code>client ID</code> and <code>client secret</code></li>
</ol>
<blockquote>
<p>go to <a target="_blank" rel="noopener" href="https://github.com/settings/developers">https://github.com/settings/developers</a> to check your OAuth Apps</p>
</blockquote>
<h4 id="gitment-config"><a href="#gitment-config" class="headerlink" title="gitment config"></a>gitment config</h4><ol>
<li>create a new repo named <code>gitment</code> in Github for storing comments in issues</li>
<li>edit <code>blog\themes\next\_config.yml</code></li>
</ol>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gitment:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">mint:</span> <span class="literal">true</span> <span class="comment"># RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway</span></span><br><span class="line">    <span class="attr">count:</span> <span class="literal">true</span> <span class="comment"># Show comments count in post meta area</span></span><br><span class="line">    <span class="attr">lazy:</span> <span class="literal">true</span> <span class="comment"># Comments lazy loading with a button</span></span><br><span class="line">    <span class="attr">cleanly:</span> <span class="literal">false</span> <span class="comment"># Hide &#x27;Powered by ...&#x27; on footer, and more</span></span><br><span class="line">    <span class="attr">language:</span> <span class="string">zh-Hans</span> <span class="comment"># Force language, or auto switch by theme</span></span><br><span class="line">    <span class="attr">github_user:</span> <span class="string">kezunlin</span> <span class="comment"># MUST HAVE, Your Github ID</span></span><br><span class="line">    <span class="attr">github_repo:</span> <span class="string">gitment</span> <span class="comment"># MUST HAVE, The repo you use to store Gitment comments</span></span><br><span class="line">    <span class="attr">client_id:</span> <span class="string">xxx</span> <span class="comment"># MUST HAVE, Github client id for the Gitment</span></span><br><span class="line">    <span class="attr">client_secret:</span> <span class="string">yyy</span>  <span class="comment"># EITHER this or proxy_gateway, Github access secret token for the Gitment</span></span><br><span class="line">    <span class="attr">proxy_gateway:</span> <span class="comment"># Address of api proxy, See: https://github.com/aimingoo/intersect</span></span><br><span class="line">    <span class="attr">redirect_protocol:</span> <span class="comment"># Protocol of redirect_uri with force_redirect_protocol when mint enabled</span></span><br></pre></td></tr></table></figure>

<p><strong>Notice</strong></p>
<ul>
<li>github_user: kezunlin</li>
<li>github_repo: gitment</li>
</ul>
<h4 id="init-page-comment"><a href="#init-page-comment" class="headerlink" title="init page comment"></a>init page comment</h4><ol>
<li><code>hexo deploy</code> to deploy blogs</li>
<li>visit page and click button <code>Initialize Comment</code></li>
<li>post your first comment.</li>
</ol>
<blockquote>
<p>error fix: <a target="_blank" rel="noopener" href="https://github.com/imsun/gitment/issues/188">https://github.com/imsun/gitment/issues/188</a></p>
</blockquote>
<h3 id="gitalk-for-comment"><a href="#gitalk-for-comment" class="headerlink" title="gitalk for comment"></a>gitalk for comment</h3><p>see <a target="_blank" rel="noopener" href="https://introspelliam.github.io/2018/07/09/hexo/NexT%E4%B8%BB%E9%A2%98%E4%B8%AD%E9%9B%86%E6%88%90gitalk%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/">gitalk for hexo next</a></p>
<h3 id="valine"><a href="#valine" class="headerlink" title="valine"></a>valine</h3><p>skip now.</p>
<h3 id="copy-code-not"><a href="#copy-code-not" class="headerlink" title="copy code (not)"></a>copy code (not)</h3><ul>
<li><p>see <a target="_blank" rel="noopener" href="https://leafjame.github.io/posts/2114475547.html">hexo-copy</a></p>
</li>
<li><p>see <a target="_blank" rel="noopener" href="https://yfzhou.coding.me/2018/08/27/Hexo-Next%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD%EF%BC%89/">hexo copy 2</a></p>
</li>
</ul>
<h3 id="customize-hexo"><a href="#customize-hexo" class="headerlink" title="customize hexo"></a>customize hexo</h3><ul>
<li><a target="_blank" rel="noopener" href="https://bestzuo.cn/posts/1689445187.html">bestzuo </a></li>
<li><a target="_blank" rel="noopener" href="https://leafjame.github.io/posts/507826828.html">leafjame</a></li>
<li><a target="_blank" rel="noopener" href="https://inspurer.github.io/2018/11/11/hexo-next%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96/">customize</a></li>
</ul>
<h3 id="shareJS"><a href="#shareJS" class="headerlink" title="shareJS"></a>shareJS</h3><blockquote>
<p>see <a target="_blank" rel="noopener" href="https://leafjame.github.io/posts/2114475547.html">here</a></p>
</blockquote>
<h3 id="optimize-for-speed"><a href="#optimize-for-speed" class="headerlink" title="optimize for speed"></a>optimize for speed</h3><h4 id="multiple-deploy"><a href="#multiple-deploy" class="headerlink" title="multiple deploy"></a>multiple deploy</h4><p>deploy to <code>coding.net</code>.</p>
<h4 id="hexo-neat"><a href="#hexo-neat" class="headerlink" title="hexo-neat"></a>hexo-neat</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-neat --save</span><br></pre></td></tr></table></figure>

<p>edit <code>blog\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-neat</span></span><br><span class="line"><span class="attr">neat_enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">exclude:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">neat_css:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">exclude:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&#x27;*.min.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">neat_js:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">output:</span></span><br><span class="line">    <span class="attr">compress:</span></span><br><span class="line">    <span class="attr">exclude:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&#x27;*.min.js&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="hexo-all-minifier-not"><a href="#hexo-all-minifier-not" class="headerlink" title="hexo-all-minifier (not)"></a>hexo-all-minifier (not)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-all-minifier --save</span><br></pre></td></tr></table></figure>

<p>edit <code>blog\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">all_minifier:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Tips: not enable minifier currently because not stable.</p>
</blockquote>
<h4 id="hexo-filter-optimize-not"><a href="#hexo-filter-optimize-not" class="headerlink" title="hexo-filter-optimize (not)"></a>hexo-filter-optimize (not)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-filter-optimize</span><br></pre></td></tr></table></figure>

<p>and edit <code>blog\theme\next\_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">filter_optimize:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="Lazy-load"><a href="#Lazy-load" class="headerlink" title="Lazy load"></a>Lazy load</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://web.dev/codelab-use-lazysizes-to-lazyload-images/">Lazy load offscreen images with lazysizes</a></p>
</blockquote>
<h4 id="cdn"><a href="#cdn" class="headerlink" title="cdn"></a>cdn</h4><p>skip </p>
<h3 id="multi-language"><a href="#multi-language" class="headerlink" title="multi language"></a>multi language</h3><ul>
<li><a target="_blank" rel="noopener" href="https://dengcb.com/zh/hexo-minos-multi-language/">multi-language</a></li>
<li><a target="_blank" rel="noopener" href="https://tstrs.me/1448.html">multi language</a></li>
<li><a target="_blank" rel="noopener" href="http://bambooom.github.io/2018/03/08/hexo-multi-lang/">hexo-multi-lang</a></li>
</ul>
<h3 id="sel-tools"><a href="#sel-tools" class="headerlink" title="sel tools"></a>sel tools</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.alexa.com/siteinfo/kezunlin.me">alexa</a></li>
<li><a target="_blank" rel="noopener" href="https://alexa.chinaz.com/kezunlin.me">chinaz</a></li>
<li><a target="_blank" rel="noopener" href="https://www.opace.co.uk/">opace SEO</a></li>
</ul>
<blockquote>
<p>very good ref <a target="_blank" rel="noopener" href="https://bawodu.com/plagiarized-site-case-study/">here</a></p>
</blockquote>
<h3 id="get-alexa-rank"><a href="#get-alexa-rank" class="headerlink" title="get alexa rank"></a>get alexa rank</h3><p>access <a target="_blank" rel="noopener" href="http://data.alexa.com/data?cli=10&dat=snbamz&url=kezunlin.me">alexa rank for kezunlin.me</a></p>
<p>output </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> Need more Alexa data?  Find our APIs here: https://aws.amazon.com/alexa/ </span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ALEXA</span> <span class="attr">VER</span>=<span class="string">&quot;0.9&quot;</span> <span class="attr">URL</span>=<span class="string">&quot;kezunlin.me/&quot;</span> <span class="attr">HOME</span>=<span class="string">&quot;0&quot;</span> <span class="attr">AID</span>=<span class="string">&quot;=&quot;</span> <span class="attr">IDN</span>=<span class="string">&quot;kezunlin.me/&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RLS</span> <span class="attr">PREFIX</span>=<span class="string">&quot;http://&quot;</span> <span class="attr">more</span>=<span class="string">&quot;0&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">RLS</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">SD</span> <span class="attr">TITLE</span>=<span class="string">&quot;A&quot;</span> <span class="attr">FLAGS</span>=<span class="string">&quot;&quot;</span> <span class="attr">HOST</span>=<span class="string">&quot;kezunlin.me&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">SD</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">SD</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">POPULARITY</span> <span class="attr">URL</span>=<span class="string">&quot;kezunlin.me/&quot;</span> <span class="attr">TEXT</span>=<span class="string">&quot;4070983&quot;</span> <span class="attr">SOURCE</span>=<span class="string">&quot;panel&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">REACH</span> <span class="attr">RANK</span>=<span class="string">&quot;3600610&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RANK</span> <span class="attr">DELTA</span>=<span class="string">&quot;+1226051&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">SD</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ALEXA</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>kezunlin.me</code> alexa rank is 4070983.</p>
</blockquote>
<h3 id="image-resource"><a href="#image-resource" class="headerlink" title="image resource"></a>image resource</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.gaoding.com/design?id=125755&simple=1">gaoding</a></li>
</ul>
<h2 id="Errors"><a href="#Errors" class="headerlink" title="Errors"></a>Errors</h2><h3 id="hexo-Error-watch-ENOSPC"><a href="#hexo-Error-watch-ENOSPC" class="headerlink" title="hexo Error watch ENOSPC"></a>hexo Error watch ENOSPC</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; hexo server </span><br><span class="line">(node:7563) [DEP0061] DeprecationWarning: fs.SyncWriteStream is deprecated.</span><br><span class="line">INFO  Start processing</span><br><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</span><br><span class="line">Error: watch /media/kezunlin/Workspace/git/blog/source/_posts ENOSPC</span><br></pre></td></tr></table></figure>

<p>solution:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> fs.inotify.max_user_watches=524288 | <span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/sysctl.conf &amp;&amp; <span class="built_in">sudo</span> sysctl -p</span><br></pre></td></tr></table></figure>

<h3 id="ERROR-Local-hexo-not-found-in"><a href="#ERROR-Local-hexo-not-found-in" class="headerlink" title="ERROR Local hexo not found in"></a>ERROR Local hexo not found in</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br><span class="line">ERROR Local hexo not found <span class="keyword">in</span> /home/kezunlin/git/blog</span><br></pre></td></tr></table></figure>

<p>solution:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line"><span class="built_in">rm</span> node_modules</span><br><span class="line">cnpm install --save</span><br></pre></td></tr></table></figure>

<h3 id="cache"><a href="#cache" class="headerlink" title="cache"></a>cache</h3><p>google chrome force reload page without cache</p>
<p>steps</p>
<blockquote>
<p>F12-&gt;Application-&gt;Clear Storage-&gt;Clear site data</p>
</blockquote>
<p><img src="https://kezunlin.me/images/posts/635233-20191009101920292-50734223.png" alt="clear site data"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="http://dearmadman.com/2015/10/11/Error-watch-ENOSPC/">error watch ENOSPC</a></li>
<li><a target="_blank" rel="noopener" href="http://theme-next.iissnan.com/third-party-services.html#disqus">third party services</a></li>
<li><a target="_blank" rel="noopener" href="https://imsun.net/posts/gitment-introduction/#more">gitment</a></li>
<li><a target="_blank" rel="noopener" href="https://rainylog.com/post/hexo-post-image-manage/">hexo image manage</a></li>
<li><a target="_blank" rel="noopener" href="http://yangq.me/post/19acb239.html">hexo prement link</a></li>
<li><a target="_blank" rel="noopener" href="http://cnodejs.org/topic/566ff3421d2912ce2a35aa51">using cnblogs and chrome extension to upload iamges</a></li>
<li><a target="_blank" rel="noopener" href="http://cnodejs.org/topic/566ff3421d2912ce2a35aa51">img uploader</a></li>
<li><a target="_blank" rel="noopener" href="https://www.hrwhisper.me/baidu-share-not-support-https-solution/">baidushare support https</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chenzhutian/hexo-all-minifier">hexo minifier</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000008082288">hexo neat</a></li>
<li><a target="_blank" rel="noopener" href="http://winterttr.me/2015/10/23/from-dns-to-github-custom-domain/">domain dnspod godaddy</a></li>
<li><a target="_blank" rel="noopener" href="https://thecodeway.com/blog/?p=1447">use https</a></li>
<li><a target="_blank" rel="noopener" href="http://www.joryhe.com/2016-06-05-hexo_site_seo_speed_more_optimization.html">optimize for speed</a></li>
<li><a target="_blank" rel="noopener" href="https://help.github.com/articles/setting-up-an-apex-domain/">github page IP</a></li>
<li><a target="_blank" rel="noopener" href="https://yaml.vip/">google adsense demo site</a></li>
<li><a target="_blank" rel="noopener" href="https://yaml.vip/2019/03/19/hexo-next%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0google-adsense-%E4%BA%B2%E6%B5%8B%E5%8F%AF%E7%94%A8/">google adsense for hexo blog</a></li>
<li><a target="_blank" rel="noopener" href="https://leafjame.github.io/posts/662668482.html">leafjame google adsense</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/huiwang/hexo-recommended-posts">hexo-recommended-posts</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next/pull/2054/files">hexo-theme-next hexo-recommended-posts</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.shuiba.co/comment-systems-recommendation">hexo comment systems</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/gitalk/gitalk">gitalk</a></li>
<li><a target="_blank" rel="noopener" href="https://yunhao.space/2018/07/04/hexo-next-gitalk-comments-tutor/">gitalk for hexo next</a></li>
<li><a target="_blank" rel="noopener" href="https://introspelliam.github.io/2018/07/09/hexo/NexT%E4%B8%BB%E9%A2%98%E4%B8%AD%E9%9B%86%E6%88%90gitalk%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/">gitalk for hexo next 2</a></li>
<li><a target="_blank" rel="noopener" href="http://x1aoboo.com/posts/3a6c8e44/">gitalk for hexo next 3</a></li>
</ul>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>2017&#x2F;12&#x2F;26: created.</li>
<li>2017&#x2F;12&#x2F;27: add Appendix,use next theame,add tags&#x2F;categories page.</li>
<li>2017&#x2F;12&#x2F;28: add Advanced, use gitment,baidushare,local search,etc.</li>
<li>2018&#x2F;01&#x2F;02: upload images to cnblogs.</li>
<li>2018&#x2F;01&#x2F;03: hexo-neat to compress,cdn,etc.</li>
<li>2018&#x2F;01&#x2F;22: add part2.</li>
<li>2018&#x2F;09&#x2F;05: add ssl.</li>
<li>2019&#x2F;11&#x2F;07: reorganize post contents.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/17/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/19/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">kezunlin</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">181</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">213</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kezunlin</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
